"use strict";(self.webpackChunkmobile=self.webpackChunkmobile||[]).push([[1284],{91284:(f,g,t)=>{t.r(g),t.d(g,{EditPhonePageModule:()=>D});var d=t(88692),m=t(69900),s=t(61074),h=t(54963),p=t(8239),a=t(57061),P=t(7026),v=t(94184),e=t(66985),y=t(1747),b=t(95972),C=t(4014),M=t(21086),T=t(7930),O=t(474);function x(o,l){if(1&o&&(e.TgZ(0,"ion-row")(1,"ion-col"),e._UZ(2,"ion-icon",9),e.TgZ(3,"ion-text",10),e._uU(4),e.qZA()()()),2&o){const n=e.oxw();e.xp6(4),e.Oqu(n.displayText.errors.invalidPhone)}}const E=[{path:"",component:(()=>{class o{constructor(n,i,c,r,u,I,A){this.headerType=n,this.modalController=i,this.accountInfoService=c,this.utilityService=r,this.noteSettingsService=u,this.platformService=I,this.router=A,this.displayText=a,this.actionOption={headername:this.displayText.headerName,btnleft:!0,btnright:!0,buttonLeft:{name:"",link:"settings/account-and-personal-info"},buttonRight:{name:"",link:"notification"}},this.phoneVailid=!0,this.isWeb=this.utilityService.getIsWeb(),this.platformService.isDesktop().subscribe(U=>{this.isDesktop=U})}ngOnInit(){this.headerType.publish({type:v.n.navbar,actionOption:this.actionOption}),this.fetchData()}fetchData(){this.subscription=this.noteSettingsService.getNotificationSettings().subscribe(n=>{this.prefSettings=n,this.contactId=n.mobilePhone.partyContactId,this.phone=n.mobilePhone.phoneNumber,this.valueChanged(n.mobilePhone.phoneNumber)})}valueChanged(n){this.phone=this.utilityService.formatPhone(n),this.phoneVailid=this.utilityService.validatePhone(this.phone)}goBack(){this.router.navigateByUrl(`/${this.isWeb&&!this.isDesktop?"more":"settings"}/account-and-personal-info`)}savePhone(){var n=this;return(0,p.Z)(function*(){const i=yield n.modalController.create({component:P.w,cssClass:"modal-not-fullscreen",componentProps:{titleMessage:n.displayText.alert.message,imageUrl:n.displayText.alert.imageUrl,saveFunction:(c=(0,p.Z)(function*(){return new Promise(r=>{n.phone=n.phone?.replace(/[-\s]/g,""),n.accountInfoService.savePhone(n.phone,n.contactId).then(u=>{r(!!u)})})}),function(){return c.apply(this,arguments)})}});var c;return i.onDidDismiss().then(c=>{n.modalDismissed(c.data)}),i.present()})()}modalDismissed(n){n.saved&&(this.prefSettings.mobilePhone.phoneNumber=this.phone.replace(/-/g,""),this.noteSettingsService.setNotificationSettings(this.prefSettings),this.goBack(),this.noteSettingsService.getNotificationSettings(!0))}ngOnDestroy(){this.subscription.unsubscribe()}}return o.\u0275fac=function(n){return new(n||o)(e.Y36(y.v),e.Y36(s.IN),e.Y36(b.o),e.Y36(C.O),e.Y36(M.O),e.Y36(T.m),e.Y36(h.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["mobile-edit-phone"]],decls:24,vars:8,consts:[[1,"ion-no-margin","p-20"],[3,"ngClass"],[1,"header-desc"],["id","editPhone","name","editPhone","type","text","pattern","[0-9]{3} [0-9]{3} [0-9]{4}","maxlength","12","inputmode","numeric","clearInput","",1,"edit-phone",3,"value","ionChange"],["editPhoneInput",""],[4,"ngIf"],["size-md","2","size-sm","1","size-xs","1"],["size","small","id","cancel-btn","name","submit","shape","round","expand","block","color","btncolor","fill","outline",1,"font-16",3,"click"],["size","small","id","save-btn","name","submit","shape","round","expand","block","color","btncolor","type","submit",1,"font-16",3,"disabled","click"],["src","assets/icon/warning.svg","alt","warning",1,"error-icon"],[1,"error"]],template:function(n,i){if(1&n){const c=e.EpF();e.TgZ(0,"ion-grid",0)(1,"div",1)(2,"ion-row")(3,"ion-col",2),e._uU(4),e.qZA()(),e.TgZ(5,"ion-row")(6,"ion-col")(7,"ion-label"),e._uU(8),e.qZA()()(),e.TgZ(9,"ion-row")(10,"ion-col")(11,"ion-input",3,4),e.NdJ("ionChange",function(){e.CHM(c);const u=e.MAs(12);return e.KtG(i.valueChanged(u.value))}),e.qZA()()(),e.YNc(13,x,5,1,"ion-row",5),e.TgZ(14,"ion-row"),e._UZ(15,"ion-col",6),e.TgZ(16,"ion-col")(17,"ion-button",7),e.NdJ("click",function(){return i.goBack()}),e._uU(18),e.qZA()(),e.TgZ(19,"ion-col")(20,"ion-button",8),e.NdJ("click",function(){return i.savePhone()}),e._uU(21),e.qZA()(),e._UZ(22,"ion-col",6),e.qZA(),e._UZ(23,"app-legal"),e.qZA()()}2&n&&(e.xp6(1),e.Q6J("ngClass",i.isWeb?"web-edit-phone":"mobile-edit-phone"),e.xp6(3),e.Oqu(i.displayText.headerDesc),e.xp6(4),e.Oqu(i.displayText.label),e.xp6(3),e.Q6J("value",i.phone),e.xp6(2),e.Q6J("ngIf",!i.phoneVailid),e.xp6(5),e.hij("",i.displayText.button.cancel," "),e.xp6(2),e.Q6J("disabled",!i.phoneVailid),e.xp6(1),e.hij("",i.displayText.button.save," "))},dependencies:[d.mk,d.O5,s.YG,s.wI,s.jY,s.gu,s.pK,s.Q$,s.Nd,s.yW,s.j9,O.N],styles:["[_nghost-%COMP%]{background-color:var(--ion-color-white)}[_nghost-%COMP%]   .header-desc[_ngcontent-%COMP%]{font-size:16px;font-weight:700;margin-bottom:40px}[_nghost-%COMP%]   ion-input[_ngcontent-%COMP%]{border:1px solid var(--secondary-colors-medium-gray-1);border-radius:4px;height:54px;--padding-start: 18px;margin-bottom:20px}[_nghost-%COMP%]   .error[_ngcontent-%COMP%]{color:var(--secondary-colors-error-red);margin-left:4px;vertical-align:top}[_nghost-%COMP%]   .error-icon[_ngcontent-%COMP%]{width:22px;height:22px;margin-left:4px;fill:var(--secondary-colors-error-red)}[_nghost-%COMP%]   .web-edit-phone[_ngcontent-%COMP%]{margin:20px}"]}),o})()}];let S=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[h.Bz.forChild(E),h.Bz]}),o})();var Z=t(91659);let D=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[d.ez,m.u5,s.Pc,S,Z.n]}),o})()},91659:(f,g,t)=>{t.d(g,{n:()=>p});var d=t(88692),m=t(69900),s=t(61074),h=t(66985);let p=(()=>{class a{}return a.\u0275fac=function(v){return new(v||a)},a.\u0275mod=h.oAB({type:a}),a.\u0275inj=h.cJS({imports:[d.ez,m.u5,s.Pc]}),a})()}}]);