"use strict";(self.webpackChunkmobile=self.webpackChunkmobile||[]).push([[3706],{23706:(dn,v,a)=>{a.r(v),a.d(v,{StepsModule:()=>un});var _=a(88692),u=a(61074),d=a(54963),e=a(66985),w=a(2398),p=a(71249),M=a(87730),m=a(14813),y=a(26682),b=a(89128),l=a(78517),O=a(81553),j=a(42597),h=a(4014),f=a(13288),P=a(46597),T=a(53479),k=a(92941),J=a(65519),I=a(24494),Q=a(71638),S=a(71209),Z=a(56755),N=a(74799),Y=a(51772);const A=["img"],E=function(t){return{width:t}},B=function(t,o,n){return{width:t,height:o,background:n}};let U=(()=>{class t{constructor(n){this.journeyService=n,this.times=0,this.animationSeen=!1}ngOnInit(){this.speed=this.element.speed?this.element.speed:50,this.widthOfSpriteSheet=this.element.widthOfEachSprite*(this.element.numberOfSpritesPerRow-1),this.currentStepSubscription=this.journeyService.getCurrentStep$().subscribe(n=>{n===this.index&&this.startAnimation()})}startAnimation(){if(!this.animationSeen){this.animationSeen=!0;let n=this.element.widthOfEachSprite,i=0;this.animationInterval=setInterval(()=>{this.times++,this.img.nativeElement.style.backgroundPosition=`-${n}px -${i}px`,n<this.widthOfSpriteSheet?n+=this.element.widthOfEachSprite:(n=0,i+=this.element.heightOfEachSprite),this.times>=this.element.totalNumberOfSprites-1&&(clearInterval(this.animationInterval),this.times=0)},this.speed)}}ngOnDestroy(){this.currentStepSubscription.unsubscribe()}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(l.W))},t.\u0275cmp=e.Xpm({type:t,selectors:[["journeys-steps-step-animation"]],viewQuery:function(n,i){if(1&n&&e.Gf(A,5),2&n){let s;e.iGM(s=e.CRH())&&(i.img=s.first)}},inputs:{element:"element",index:"index"},decls:4,vars:8,consts:[[1,"container",3,"ngStyle"],[3,"ngStyle"],["img",""],[1,"hide-px"]],template:function(n,i){1&n&&(e.TgZ(0,"div",0),e._UZ(1,"div",1,2)(3,"div",3),e.qZA()),2&n&&(e.Q6J("ngStyle",e.VKq(2,E,i.element.widthOfEachSprite+"px")),e.xp6(1),e.Q6J("ngStyle",e.kEZ(4,B,i.element.widthOfEachSprite-1+"px",i.element.heightOfEachSprite+"px","url("+i.element.imageUrl+") 0 0")))},dependencies:[_.PC],styles:["div.container[_ngcontent-%COMP%]{margin:auto;display:flex;padding-bottom:20px}div.container[_ngcontent-%COMP%]   .hide-px[_ngcontent-%COMP%]{width:1px}"]}),t})();var x=a(8239),V=a(95972),W=a(13952),F=a(61040);const H=function(t){return{"padding-bottom":t}},$=function(t,o){return{"margin-top":t,"margin-bottom":o}};let L=(()=>{class t{constructor(n,i,s,r,c,g){this.journeyService=n,this.utilityService=i,this.accountInfoService=s,this.settingsService=r,this.router=c,this.accountService=g,this.moreContentSubscription=new m.w0}ngOnInit(){var n=this;return(0,x.Z)(function*(){n.isWeb=n.utilityService.getIsWeb(),n.settingsDisplayFlags=yield n.settingsService.getSettingsDisplayFlags()})()}openWebView(){var n=this;return(0,x.Z)(function*(){"videoUrl"in n.element?n.journeyService.openModal({element:n.element}):n.settingsDisplayFlags.displayContactLink&&!("externalLink"in n.element)?n.isWeb?n.router.navigateByUrl("/journeys/contact-a-coach"):(yield n.fetchScreenContent(),n.journeyService.openModal({element:{id:"contactACoach"},screenMessage:n.screenMessage,settingsDisplayFlags:n.settingsDisplayFlags})):"externalLink"in n.element?window.open(n.element.externalLink,"_blank"):n.isWeb?window.open(n.element.link,"_blank"):n.accountService.openPwebAccountLink(decodeURIComponent(n.element.link))})()}fetchScreenContent(){return new Promise(n=>{this.moreContentSubscription.add(this.accountInfoService.getScreenMessage().subscribe(i=>{this.screenMessage=i,this.settingsDisplayFlags.suppressAppointment&&(this.screenMessage.TimetapURL=this.settingsDisplayFlags.pwebStatementUrl),n()}))})}ngOnDestroy(){this.moreContentSubscription.unsubscribe()}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(l.W),e.Y36(h.O),e.Y36(V.o),e.Y36(W.g),e.Y36(d.F0),e.Y36(F.B))},t.\u0275cmp=e.Xpm({type:t,selectors:[["journeys-steps-step-help-card"]],inputs:{element:"element"},decls:14,vars:13,consts:[[3,"ngClass"],["tabindex","0",3,"id","keyup.enter","click"],[1,"helpImg-col",3,"ngStyle"],[3,"src","alt"],[1,"header-txt",3,"ngStyle"],[1,"helpHeader-col"],[1,"header"],[1,"helpDesc-col"],[1,"description"]],template:function(n,i){1&n&&(e.TgZ(0,"div",0)(1,"ion-card",1),e.NdJ("keyup.enter",function(){return i.openWebView()})("click",function(){return i.openWebView()}),e.TgZ(2,"ion-row")(3,"ion-col",2),e._UZ(4,"img",3),e.qZA(),e.TgZ(5,"ion-col",4)(6,"ion-row")(7,"ion-col",5)(8,"ion-text",6),e._uU(9),e.qZA()()(),e.TgZ(10,"ion-row")(11,"ion-col",7)(12,"ion-text",8),e._uU(13),e.qZA()()()()()()()),2&n&&(e.Q6J("ngClass",i.isWeb?"helpcard-web":"helpcard-mobile"),e.xp6(1),e.Q6J("id","helpCard"+i.element.idSuffix),e.xp6(2),e.Q6J("ngStyle",e.VKq(8,H,i.element.paddingBottom)),e.xp6(1),e.Q6J("src",i.element.imageUrl,e.LSH)("alt",i.element.altText||""),e.xp6(1),e.Q6J("ngStyle",e.WLB(10,$,i.element.marginTop,i.element.marginBottom)),e.xp6(4),e.Oqu(i.element.header),e.xp6(4),e.Oqu(i.element.description))},dependencies:[u.PM,u.wI,u.Nd,u.yW,_.mk,_.PC],styles:["[_nghost-%COMP%]{display:block}[_nghost-%COMP%]   ion-card[_ngcontent-%COMP%]{cursor:pointer;box-shadow:var(--card-box-shadow);border-radius:var(--card-border-radius);margin:0;color:var(--primary-colors-voya-black)}[_nghost-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-col.header-txt[_ngcontent-%COMP%]{margin:auto}[_nghost-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-col.header-txt[_ngcontent-%COMP%]   ion-col.helpHeader-col[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{font-weight:700;font-size:18px}[_nghost-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-col.header-txt[_ngcontent-%COMP%]   ion-col.helpDesc-col[_ngcontent-%COMP%]{margin:auto}[_nghost-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-col.header-txt[_ngcontent-%COMP%]   ion-col.helpDesc-col[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{font-size:16px}[_nghost-%COMP%]   .helpcard-web[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]{padding:15px 20px}[_nghost-%COMP%]   .helpcard-web[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   .helpImg-col[_ngcontent-%COMP%]{display:flex;margin:auto}@media screen and (max-width: 500px){[_nghost-%COMP%]   .helpcard-web[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   .helpImg-col[_ngcontent-%COMP%]{max-width:116px}}@media screen and (min-width: 500px){[_nghost-%COMP%]   .helpcard-web[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   .helpImg-col[_ngcontent-%COMP%]{max-width:138px}}[_nghost-%COMP%]   .helpcard-web[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   .helpImg-col[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:98px;height:98px}[_nghost-%COMP%]   .helpcard-web[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-col.header-txt[_ngcontent-%COMP%]   ion-col.helpHeader-col[_ngcontent-%COMP%]{margin-bottom:12px}[_nghost-%COMP%]   .helpcard-web[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]:hover{box-shadow:0 0 8px #000c;cursor:pointer}[_nghost-%COMP%]   .helpcard-mobile[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]{padding:5px 20px}[_nghost-%COMP%]   .helpcard-mobile[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   .helpImg-col[_ngcontent-%COMP%]{margin:auto}@media screen and (max-width: 500px){[_nghost-%COMP%]   .helpcard-mobile[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   .helpImg-col[_ngcontent-%COMP%]{max-width:98px;max-height:98px}}@media screen and (min-width: 500px){[_nghost-%COMP%]   .helpcard-mobile[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   .helpImg-col[_ngcontent-%COMP%]{max-width:128px}}[_nghost-%COMP%]   .helpcard-mobile[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   .helpImg-col[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:86px;height:85px}"]}),t})(),D=(()=>{class t{constructor(n){this.journeyService=n}openModal(){this.journeyService.openModal({element:this.element})}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(l.W))},t.\u0275cmp=e.Xpm({type:t,selectors:[["journeys-steps-step-video"]],inputs:{element:"element"},decls:1,vars:3,consts:[["tabindex","0",3,"src","id","alt","click","keydown.enter"]],template:function(n,i){1&n&&(e.TgZ(0,"img",0),e.NdJ("click",function(){return i.openModal()})("keydown.enter",function(){return i.openModal()}),e.qZA()),2&n&&e.Q6J("src",i.element.imageUrl,e.LSH)("id","journeyVideo"+i.element.idSuffix)("alt",i.element.altText||"")},styles:["[_nghost-%COMP%]{display:block;margin-bottom:10px;text-align:center}[_nghost-%COMP%]   img[_ngcontent-%COMP%]{cursor:pointer}"]}),t})();var q=a(56515);function K(t,o){if(1&t&&(e.ynx(0),e.TgZ(1,"journeys-expand-collapse",2),e._UZ(2,"journeys-steps-step-intro",3),e.qZA(),e.BQk()),2&t){const n=o.$implicit,i=o.index,s=e.oxw();e.xp6(1),e.Q6J("header",s.element.options[i].label)("index",n.idSuffix),e.xp6(1),e.Q6J("element",n)}}let G=(()=>{class t{constructor(){this.stepContentElements=[]}ngOnInit(){this.element.options?.forEach((n,i)=>{this.stepContentElements.push({description:n.description,descriptions:n.descriptions,webviewHeader:n.webviewHeader,webviewLinks:n.webviewLinks,webviewHeaders:n.webviewHeaders,webviewToolbars:n.webviewToolbars,videoUrl:n.videoUrl,videoUrls:n.videoUrls,idSuffix:this.element.idSuffix+i})})}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["journeys-steps-step-expand-collapse"]],inputs:{element:"element"},decls:2,vars:1,consts:[["inset","true","lines","full"],[4,"ngFor","ngForOf"],[3,"header","index"],[3,"element"]],template:function(n,i){1&n&&(e.TgZ(0,"ion-list",0),e.YNc(1,K,3,3,"ng-container",1),e.qZA()),2&n&&(e.xp6(1),e.Q6J("ngForOf",i.stepContentElements))},dependencies:[u.q_,_.sg,q.X,S.k],styles:["[_nghost-%COMP%]   ion-list[_ngcontent-%COMP%]{margin:0;padding:0;background-color:var(--ion-color-white);overflow:auto;font-size:initial}"]}),t})();function R(t,o){if(1&t&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&t){const n=e.oxw();e.xp6(1),e.Oqu(n.element.header)}}function z(t,o){if(1&t&&(e.TgZ(0,"span",6),e._uU(1),e.ALo(2,"currency"),e.qZA()),2&t){const n=e.oxw();e.xp6(1),e.Oqu("dollar"===n.element.type&&"-"!==n.answer?e.gM2(2,1,n.answer,"USD","symbol","1.0-0"):n.answer)}}const X=function(t){return{"with-header":t}};let ee=(()=>{class t{constructor(n){this.journeyService=n,this.subscription=new m.w0,this.service=this.journeyService.journeyServiceMap[this.journeyService.getCurrentJourney().journeyID]}ngOnInit(){this.answer=this.element.answer,this.service&&!this.answer&&this.subscription.add(this.service.valueChange.subscribe(()=>{this.answer=this.element.answerId?this.service[this.element.answerId]:this.element.answer,this.journeyService.isValueEmpty(this.answer)&&(this.answer="-")}))}ngOnDestroy(){this.subscription.unsubscribe()}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(l.W))},t.\u0275cmp=e.Xpm({type:t,selectors:[["journeys-steps-step-row-with-image"]],inputs:{element:"element"},decls:8,vars:8,consts:[[3,"ngClass"],[1,"img-container"],[3,"src","alt"],[4,"ngIf"],[1,"desc-answer-container"],["class","answer",4,"ngIf"],[1,"answer"]],template:function(n,i){1&n&&(e.TgZ(0,"div",0)(1,"div",1),e._UZ(2,"img",2),e.YNc(3,R,2,1,"span",3),e.qZA(),e.TgZ(4,"div",4)(5,"span"),e._uU(6),e.qZA(),e.YNc(7,z,3,6,"span",5),e.qZA()()),2&n&&(e.Q6J("ngClass",e.VKq(6,X,i.element.header)),e.xp6(2),e.Q6J("src",i.element.imageUrl,e.LSH)("alt",(null==i.element?null:i.element.altText)||""),e.xp6(1),e.Q6J("ngIf",i.element.header),e.xp6(3),e.Oqu(i.element.description),e.xp6(1),e.Q6J("ngIf",void 0===i.element.displayAnswer||i.element.displayAnswer))},dependencies:[_.mk,_.O5,_.H9],styles:["[_nghost-%COMP%]{display:block}[_nghost-%COMP%]   div[_ngcontent-%COMP%]{display:flex}[_nghost-%COMP%]   div.desc-answer-container[_ngcontent-%COMP%]{flex-grow:0;width:100%}[_nghost-%COMP%]   div.desc-answer-container[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:18px;color:var(--primary-colors-voya-black);margin:auto 0;white-space:pre-wrap}@media (max-width: 768px){[_nghost-%COMP%]   div.desc-answer-container[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin:unset}}[_nghost-%COMP%]   div.desc-answer-container[_ngcontent-%COMP%]   span.answer[_ngcontent-%COMP%]{font-size:24px;font-weight:600;padding-left:10px;margin-left:auto}[_nghost-%COMP%]   div.img-container[_ngcontent-%COMP%]{min-width:43px;margin-right:7px;align-items:flex-start}[_nghost-%COMP%]   div.img-container[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:18px;margin-left:10px;font-weight:600;color:var(--primary-colors-voya-black)}[_nghost-%COMP%]   .with-header[_ngcontent-%COMP%]{flex-direction:column}"]}),t})(),ne=(()=>{class t{constructor(n){this.journeyService=n,this.service=this.journeyService.journeyServiceMap[this.journeyService.getCurrentJourney().journeyID]}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(l.W))},t.\u0275cmp=e.Xpm({type:t,selectors:[["journeys-steps-step-header-with-logo"]],inputs:{element:"element"},decls:4,vars:2,consts:[["alt","account logo",3,"src"]],template:function(n,i){1&n&&(e.TgZ(0,"div"),e._UZ(1,"img",0),e.TgZ(2,"span"),e._uU(3),e.qZA()()),2&n&&(e.xp6(1),e.Q6J("src",i.element.imageId?i.service[i.element.imageId]:i.element.imageUrl,e.LSH),e.xp6(2),e.Oqu(i.element.answerId?i.service[i.element.answerId]:i.element.header))},styles:["[_nghost-%COMP%]{display:block}[_nghost-%COMP%]   div[_ngcontent-%COMP%]{display:flex;align-items:center}[_nghost-%COMP%]   div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:40px}[_nghost-%COMP%]   div[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px;color:var(--primary-colors-voya-black);font-weight:700;padding-left:10px}"]}),t})();var te=a(20359),ie=a(1282);const oe=["pieChartContainer"];let se=(()=>{class t{constructor(n,i){this.journeyService=n,this.utilityService=i,this.subscription=new m.w0,this.highCharts=ie,this.colors=[]}ngOnInit(){this.isWeb=this.utilityService.getIsWeb();const n=this.journeyService.getCurrentJourney();this.journeyService.journeyServiceMap[n.journeyID]&&this.subscription.add(this.journeyService.journeyServiceMap[n.journeyID].valueChange.subscribe(()=>{this.doPieCalculations(this.journeyService.journeyServiceMap[n.journeyID])}))}doPieCalculations(n){this.colors=[];const i=[];this.element.elements.forEach(s=>{this.colors.push(s.color),i.push({name:s.label,y:Math.round(n[s.answerId])})}),this.setLabelAndDistance(i),this.pushDataToPieChart(i)}setLabelAndDistance(n){const i=n.reduce((s,r)=>s+r.y,0);n.forEach(s=>{const r=this.percentage(s.y,i);s.label=0===r?"":Math.round(r)+"%",s.dataLabels={distance:this.setDistance(r)}})}setDistance(n){return 0<n&&n<25?-15:26<n&&n<50?-50:-75}ngAfterViewInit(){setTimeout(()=>{this.chart&&this.chart.reflow()},50)}pushDataToPieChart(n){this.highCharts.setOptions({lang:{thousandsSep:","}});const i={credits:{enabled:!1},chart:{height:300},title:{text:void 0},plotOptions:{pie:{size:"80%",events:{click:function(s){s.preventDefault()}},allowPointSelect:!0,tooltip:{headerFormat:void 0,pointFormat:"<b>{point.name} : ${point.y:,.0f}</b>"},dataLabels:{format:"<b>{point.label}</b>",useHTML:!0,style:{fontWeight:"bold",color:"white",textDecoration:"none",fontSize:"14px"}},startAngle:0,endAngle:0,center:["50%","50%"],colors:this.colors}},series:[{type:"pie",data:n}]};this.isWeb||(i.chart.width=window.innerWidth-77),this.chart=this.highCharts.chart("pie-chart-container",i)}percentage(n,i){const s=n/i*100;return s<=this.element.minValue?0:s}ngOnDestroy(){this.pieChartContainer.nativeElement.remove(),this.subscription.unsubscribe()}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(l.W),e.Y36(h.O))},t.\u0275cmp=e.Xpm({type:t,selectors:[["journey-step-charts-pie-chart"]],viewQuery:function(n,i){if(1&n&&e.Gf(oe,5),2&n){let s;e.iGM(s=e.CRH())&&(i.pieChartContainer=s.first)}},inputs:{element:"element"},decls:2,vars:0,consts:[["id","pie-chart-container"],["pieChartContainer",""]],template:function(n,i){1&n&&e._UZ(0,"div",0,1)},encapsulation:2}),t})();function re(t,o){if(1&t&&e._UZ(0,"journey-step-charts-pie-chart",1),2&t){const n=e.oxw();e.Q6J("element",n.element)}}let ae=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["journey-step-charts"]],inputs:{element:"element"},decls:1,vars:1,consts:[[3,"element",4,"ngIf"],[3,"element"]],template:function(n,i){1&n&&e.YNc(0,re,1,1,"journey-step-charts-pie-chart",0),2&n&&e.Q6J("ngIf","pie"===i.element.type)},dependencies:[_.O5,se],encapsulation:2}),t})();function ce(t,o){if(1&t&&e._UZ(0,"journeys-steps-step-intro",15),2&t){const n=e.oxw(2).$implicit;e.Q6J("element",n)}}function _e(t,o){if(1&t&&e._UZ(0,"journeys-steps-step-header-with-logo",15),2&t){const n=e.oxw(2).$implicit;e.Q6J("element",n)}}function pe(t,o){if(1&t&&e._UZ(0,"journeys-steps-step-image-with-value",16),2&t){const n=e.oxw(2).$implicit,i=e.oxw(3);e.Q6J("imageUrl",n.imageUrl)("value",i.imageValue)}}function le(t,o){if(1&t&&e._UZ(0,"journey-step-charts",15),2&t){const n=e.oxw(2).$implicit;e.Q6J("element",n)}}function ue(t,o){if(1&t&&e._UZ(0,"journeys-link",15),2&t){const n=e.oxw(2).$implicit;e.Q6J("element",n)}}const C=function(t){return{"margin-bottom":t}};function ge(t,o){if(1&t){const n=e.EpF();e.TgZ(0,"journeys-steps-step-input",17),e.NdJ("valueChange",function(s){e.CHM(n);const r=e.oxw(2).$implicit,c=e.oxw(3);return e.KtG(c.updateStepValue(s,r))})("currentValue",function(s){e.CHM(n);const r=e.oxw(5);return e.KtG(r.updateImageValue(s))})("isRequired",function(s){e.CHM(n);const r=e.oxw(2).$implicit,c=e.oxw(3);return e.KtG(c.setRequired(s,r))})("updateStepValueAndStep",function(){e.CHM(n);const s=e.oxw(5);return e.KtG(s.updateStepHandler())}),e.qZA()}if(2&t){const n=e.oxw(2).$implicit,i=e.oxw(3);e.Q6J("element",n)("values",i.step.value)("answer",i.step.answer)("ngStyle",e.VKq(5,C,n.marginBottom))("index",i.index)}}function de(t,o){if(1&t&&e._UZ(0,"journeys-steps-step-animation",18),2&t){const n=e.oxw(2).$implicit,i=e.oxw(3);e.Q6J("element",n)("index",i.index)}}function me(t,o){if(1&t&&e._UZ(0,"journeys-steps-step-video",15),2&t){const n=e.oxw(2).$implicit;e.Q6J("element",n)}}function he(t,o){1&t&&e._UZ(0,"app-orange-money",19),2&t&&e.Q6J("displayHeader",!1)("fromJourneys",!0)}const Ce=function(t,o,n){return{"margin-top":t,"margin-bottom":o,"max-width":n}};function ye(t,o){if(1&t&&e._UZ(0,"img",20),2&t){const n=e.oxw(2).$implicit;e.Q6J("src",n.imageUrl,e.LSH)("ngStyle",e.kEZ(3,Ce,n.marginTop,n.marginBottomWeb?n.marginBottomWeb:n.marginBottom,n.maxWidth))("alt",(null==n?null:n.altText)||"")}}function fe(t,o){if(1&t&&e._UZ(0,"app-table",15),2&t){const n=e.oxw(2).$implicit;e.Q6J("element",n)}}function ve(t,o){if(1&t&&e._UZ(0,"journeys-steps-step-mx-widget",15),2&t){const n=e.oxw(2).$implicit;e.Q6J("element",n)}}function Se(t,o){if(1&t&&e._UZ(0,"journeys-steps-step-expand-collapse",15),2&t){const n=e.oxw(2).$implicit;e.Q6J("element",n)}}function xe(t,o){if(1&t&&e._UZ(0,"journeys-steps-step-row-with-image",15),2&t){const n=e.oxw(2).$implicit;e.Q6J("element",n)}}function we(t,o){if(1&t){const n=e.EpF();e.TgZ(0,"journeys-steps-step-contentLink",21),e.NdJ("valueChange",function(s){e.CHM(n);const r=e.oxw(2).$implicit,c=e.oxw(3);return e.KtG(c.updateStepValueAndStep(s,r))}),e.qZA()}if(2&t){const n=e.oxw(2).$implicit,i=e.oxw(3);e.Q6J("element",n)("ngStyle",e.VKq(4,C,(null==n?null:n.marginBottom)||"0px"))("values",i.step.value)("answer",i.step.answer)}}function Me(t,o){if(1&t&&e._UZ(0,"journeys-steps-step-intro",15),2&t){const n=e.oxw().$implicit;e.Q6J("element",n)}}function be(t,o){if(1&t&&e._UZ(0,"journeys-steps-step-image-with-value",16),2&t){const n=e.oxw().$implicit,i=e.oxw(7);e.Q6J("imageUrl",n.imageUrl)("value",i.imageValue)}}function Oe(t,o){if(1&t){const n=e.EpF();e.TgZ(0,"journeys-steps-step-input",28),e.NdJ("valueChange",function(s){e.CHM(n);const r=e.oxw().$implicit,c=e.oxw(7);return e.KtG(c.updateStepValue(s,r))})("currentValue",function(s){e.CHM(n);const r=e.oxw(8);return e.KtG(r.updateImageValue(s))})("updateStepValueAndStep",function(){e.CHM(n);const s=e.oxw(8);return e.KtG(s.updateStepHandler())}),e.qZA()}if(2&t){const n=e.oxw().$implicit,i=e.oxw(7);e.Q6J("element",n)("values",i.step.value)("answer",i.step.answer)("ngStyle",e.VKq(5,C,n.marginBottom))("index",i.index)}}function je(t,o){if(1&t){const n=e.EpF();e.TgZ(0,"journeys-steps-step-button",29),e.NdJ("continueClick",function(s){e.CHM(n);const r=e.oxw(8);return e.KtG(r.handleContinueClick(s))})("backClick",function(){e.CHM(n);const s=e.oxw(8);return e.KtG(s.handleBackClick())}),e.qZA()}if(2&t){const n=e.oxw().$implicit,i=e.oxw().$implicit,s=e.oxw(6);e.Q6J("label",n.label)("link",n.link)("idSuffix",n.idSuffix)("isActiveBackBtn",0!==s.currentStep)("backBtnColor",i.backgroundColor?"var(--primary-colors-voya-white":"var(--primary-colors-voya-dark-blue)")}}function Pe(t,o){if(1&t&&e._UZ(0,"journeys-steps-step-video",15),2&t){const n=e.oxw().$implicit;e.Q6J("element",n)}}function Te(t,o){if(1&t&&e._UZ(0,"img",30),2&t){const n=e.oxw().$implicit;e.Q6J("src",n.imageUrl,e.LSH)("alt",(null==n?null:n.altText)||"")}}function ke(t,o){if(1&t&&e._UZ(0,"journeys-steps-step-mx-widget",15),2&t){const n=e.oxw().$implicit;e.Q6J("element",n)}}function Je(t,o){if(1&t&&e._UZ(0,"app-table",15),2&t){const n=e.oxw().$implicit;e.Q6J("element",n)}}function Ie(t,o){if(1&t&&e._UZ(0,"journeys-steps-step-expand-collapse",15),2&t){const n=e.oxw().$implicit;e.Q6J("element",n)}}function Qe(t,o){if(1&t&&e._UZ(0,"journeys-steps-step-row-with-image",15),2&t){const n=e.oxw().$implicit;e.Q6J("element",n)}}function Ze(t,o){if(1&t){const n=e.EpF();e.TgZ(0,"journeys-steps-step-contentLink",31),e.NdJ("valueChange",function(s){e.CHM(n);const r=e.oxw(5).$implicit,c=e.oxw(3);return e.KtG(c.updateStepValueAndStep(s,r))}),e.qZA()}if(2&t){const n=e.oxw().$implicit,i=e.oxw(4).$implicit,s=e.oxw(3);e.Q6J("ngStyle",e.VKq(4,C,(null==i?null:i.marginBottom)||"0px"))("element",n)("values",s.step.value)("answer",s.step.answer)}}function Ne(t,o){if(1&t&&(e.ynx(0),e.YNc(1,Me,1,1,"journeys-steps-step-intro",7),e.YNc(2,be,1,2,"journeys-steps-step-image-with-value",8),e.YNc(3,Oe,1,7,"journeys-steps-step-input",24),e.YNc(4,je,1,5,"journeys-steps-step-button",25),e.YNc(5,Pe,1,1,"journeys-steps-step-video",7),e.YNc(6,Te,1,2,"img",26),e.YNc(7,ke,1,1,"journeys-steps-step-mx-widget",7),e.YNc(8,Je,1,1,"app-table",7),e.YNc(9,Ie,1,1,"journeys-steps-step-expand-collapse",7),e.YNc(10,Qe,1,1,"journeys-steps-step-row-with-image",7),e.YNc(11,Ze,1,6,"journeys-steps-step-contentLink",27),e.BQk()),2&t){const n=o.$implicit;e.xp6(1),e.Q6J("ngIf","intro"===n.id),e.xp6(1),e.Q6J("ngIf","imageWithValue"===n.id),e.xp6(1),e.Q6J("ngIf","input"===n.id),e.xp6(1),e.Q6J("ngIf","button"===n.id),e.xp6(1),e.Q6J("ngIf","video"===n.id),e.xp6(1),e.Q6J("ngIf","image"===n.id),e.xp6(1),e.Q6J("ngIf","mxWidget"===n.id),e.xp6(1),e.Q6J("ngIf","table"===n.id),e.xp6(1),e.Q6J("ngIf","expandCollapse"===n.id),e.xp6(1),e.Q6J("ngIf","rowWithImage"===n.id),e.xp6(1),e.Q6J("ngIf","contentModal"===n.id||"modalButton"===n.id)}}const Ye=function(t,o){return{"background-color":t,"margin-bottom":o}};function Ae(t,o){if(1&t&&(e.TgZ(0,"ion-card",23),e.YNc(1,Ne,12,11,"ng-container",6),e.qZA()),2&t){const n=o.$implicit;e.Q6J("ngStyle",e.WLB(2,Ye,n.backgroundColor,n.marginBottom)),e.xp6(1),e.Q6J("ngForOf",n.elements)}}function Ee(t,o){if(1&t&&(e.ynx(0),e.YNc(1,Ae,2,5,"ion-card",22),e.BQk()),2&t){const n=e.oxw(2).$implicit;e.xp6(1),e.Q6J("ngForOf",n.pageElements)}}function Be(t,o){1&t&&e.GkF(0)}function Ue(t,o){if(1&t&&(e.ynx(0),e.YNc(1,Be,1,0,"ng-container",32),e.BQk()),2&t){e.oxw(4);const n=e.MAs(4);e.xp6(1),e.Q6J("ngTemplateOutlet",n)}}const Ve=function(t){return{"padding-top":t}};function We(t,o){if(1&t){const n=e.EpF();e.TgZ(0,"journeys-steps-step-button",33),e.NdJ("continueClick",function(s){e.CHM(n);const r=e.oxw(5);return e.KtG(r.handleContinueClick(s))})("backClick",function(){e.CHM(n);const s=e.oxw(5);return e.KtG(s.handleBackClick())}),e.qZA()}if(2&t){const n=e.oxw(2).$implicit,i=e.oxw().$implicit,s=e.oxw(2);e.Q6J("label",n.label)("link",n.link)("type",n.type)("idSuffix",n.idSuffix)("noSpacing","true"===(null==n?null:n.noSpacing))("isActiveBackBtn",0!==s.currentStep&&"false"!==(null==n?null:n.noBackLink))("backBtnColor",i.backgroundColor?"var(--primary-colors-voya-white":"var(--primary-colors-voya-dark-blue)")("disabled",n.isContinueButton&&!s.continueButtonEnabled)("ngStyle",e.VKq(10,Ve,n.paddingTop))("ngClass","true"===(null==n?null:n.noSpacing)?"no-spacing":"spacing")}}function Fe(t,o){if(1&t&&e._UZ(0,"journeys-line",15),2&t){const n=e.oxw(2).$implicit;e.Q6J("element",n)}}function He(t,o){if(1&t&&(e.ynx(0),e.YNc(1,ce,1,1,"journeys-steps-step-intro",7),e.YNc(2,_e,1,1,"journeys-steps-step-header-with-logo",7),e.YNc(3,pe,1,2,"journeys-steps-step-image-with-value",8),e.YNc(4,le,1,1,"journey-step-charts",7),e.YNc(5,ue,1,1,"journeys-link",7),e.YNc(6,ge,1,7,"journeys-steps-step-input",9),e.YNc(7,de,1,2,"journeys-steps-step-animation",10),e.YNc(8,me,1,1,"journeys-steps-step-video",7),e.YNc(9,he,1,2,"app-orange-money",11),e.YNc(10,ye,1,7,"img",12),e.YNc(11,fe,1,1,"app-table",7),e.YNc(12,ve,1,1,"journeys-steps-step-mx-widget",7),e.YNc(13,Se,1,1,"journeys-steps-step-expand-collapse",7),e.YNc(14,xe,1,1,"journeys-steps-step-row-with-image",7),e.YNc(15,we,1,6,"journeys-steps-step-contentLink",13),e.YNc(16,Ee,2,1,"ng-container",3),e.YNc(17,Ue,2,1,"ng-container",3),e.YNc(18,We,1,12,"journeys-steps-step-button",14),e.YNc(19,Fe,1,1,"journeys-line",7),e.BQk()),2&t){const n=e.oxw(),i=n.$implicit,s=n.index,r=e.oxw().$implicit,c=e.oxw().ngIf,g=e.oxw();e.xp6(1),e.Q6J("ngIf","intro"===i.id),e.xp6(1),e.Q6J("ngIf","headerWithLogo"===i.id),e.xp6(1),e.Q6J("ngIf","imageWithValue"===i.id),e.xp6(1),e.Q6J("ngIf","chart"===i.id),e.xp6(1),e.Q6J("ngIf","link"===i.id),e.xp6(1),e.Q6J("ngIf","input"===i.id),e.xp6(1),e.Q6J("ngIf","animation"===i.id),e.xp6(1),e.Q6J("ngIf","video"===i.id),e.xp6(1),e.Q6J("ngIf","orangeMoney"===i.id),e.xp6(1),e.Q6J("ngIf","image"===i.id),e.xp6(1),e.Q6J("ngIf","table"===i.id),e.xp6(1),e.Q6J("ngIf","mxWidget"===i.id),e.xp6(1),e.Q6J("ngIf","expandCollapse"===i.id),e.xp6(1),e.Q6J("ngIf","rowWithImage"===i.id),e.xp6(1),e.Q6J("ngIf","contentModal"===i.id||"modalButton"===i.id),e.xp6(1),e.Q6J("ngIf",i.pageElements),e.xp6(1),e.Q6J("ngIf",c.helpCards&&g.isWeb&&r.elements.length===s+1),e.xp6(1),e.Q6J("ngIf","button"===i.id),e.xp6(1),e.Q6J("ngIf","line"===i.id)}}function $e(t,o){if(1&t&&(e.ynx(0),e.YNc(1,He,20,19,"ng-container",3),e.BQk()),2&t){const n=o.$implicit,i=e.oxw(3);e.xp6(1),e.Q6J("ngIf",!n.flag||i.journeyServiceMap[i.journeyId]&&i.journeyServiceMap[i.journeyId][n.flag])}}const Le=function(t){return{"background-color":t}},De=function(t){return{hideStep:t}};function qe(t,o){if(1&t&&(e.TgZ(0,"ion-card",5),e.YNc(1,$e,2,1,"ng-container",6),e.qZA()),2&t){const n=o.$implicit,i=e.oxw(2);e.Q6J("ngStyle",e.VKq(3,Le,n.backgroundColor))("ngClass",e.VKq(5,De,i.currentStep!==i.index)),e.xp6(1),e.Q6J("ngForOf",n.elements)}}function Ke(t,o){1&t&&e.GkF(0)}function Ge(t,o){if(1&t&&(e.ynx(0),e.YNc(1,Ke,1,0,"ng-container",32),e.BQk()),2&t){e.oxw();const n=e.MAs(4);e.xp6(1),e.Q6J("ngTemplateOutlet",n)}}function Re(t,o){if(1&t&&e._UZ(0,"journeys-steps-step-help-card",15),2&t){const n=e.oxw().$implicit;e.Q6J("element",n)}}function ze(t,o){if(1&t&&(e.ynx(0),e.YNc(1,Re,1,1,"journeys-steps-step-help-card",7),e.ALo(2,"async"),e.BQk()),2&t){const n=o.$implicit,i=e.oxw(3);e.xp6(1),e.Q6J("ngIf",!n.flag||e.lcZ(2,1,i.journeys$).flags[n.flag])}}function Xe(t,o){if(1&t&&e.YNc(0,ze,3,3,"ng-container",6),2&t){const n=e.oxw().ngIf;e.Q6J("ngForOf",n.helpCards)}}function en(t,o){if(1&t&&(e.TgZ(0,"div",1),e.YNc(1,qe,2,7,"ion-card",2),e.YNc(2,Ge,2,1,"ng-container",3),e.YNc(3,Xe,1,1,"ng-template",null,4,e.W1O),e.qZA()),2&t){const n=o.ngIf,i=e.oxw();e.Q6J("ngClass",i.isWeb?"web-step":"mobile-step"),e.xp6(1),e.Q6J("ngForOf",n.pageElements),e.xp6(1),e.Q6J("ngIf",n.helpCards&&!i.isWeb)}}let nn=(()=>{class t{constructor(n,i){this.utilitySerivce=n,this.journeyService=i,this.continueClick=new e.vpe,this.backClick=new e.vpe,this.swipeEnabled=new e.vpe,this.continueButtonEnabled=!0,this.requiredAnswerIds=[],this.updateStep=new e.vpe,this.journeyServiceMap=this.journeyService.journeyServiceMap}ngOnInit(){this.isWeb=this.utilitySerivce.getIsWeb(),this.journeys$=this.journeyService.fetchJourneys(),this.step.answer&&!this.step.value&&(this.step.value=this.journeyService.safeParse(this.step.answer))}handleContinueClick(n){this.continueClick.emit(n)}handleBackClick(){this.backClick.emit()}updateStepValueAndStep(n,i){this.updateStepValue(n,i),this.updateStepHandler()}updateStepHandler(){this.updateStep.emit(this.step.value)}updateStepValue(n,i){this.step.value||(this.step.value={}),i.accumulateAnswers?this.step.value[i.answerId]?this.step.value[i.answerId].push(n):this.step.value[i.answerId]=[n]:this.step.value[i.answerId]=n,this.checkForContinue()}checkForContinue(){let n=!0;this.requiredAnswerIds.forEach(i=>{this.journeyService.isValueEmpty(this.step.value[i])&&!this.isRequiredInputSetCompleted(i)&&(n=!1)}),this.continueButtonEnabled=n,this.swipeEnabled.emit({swipeEnabled:n,index:this.index})}isRequiredInputSetCompleted(n){let i=!1;return this.step.content.requiredInputSets&&this.step.content.requiredInputSets.forEach(s=>{s.includes(n)&&s.forEach(r=>{this.journeyService.isValueEmpty(this.step.value[r])||(i=!0)})}),i}setRequired(n,i){n&&(this.requiredAnswerIds.push(i.answerId),this.checkForContinue())}updateImageValue(n){this.imageValue=n}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(h.O),e.Y36(l.W))},t.\u0275cmp=e.Xpm({type:t,selectors:[["journeys-steps-step"]],inputs:{step:"step",index:"index",currentStep:"currentStep",journeyId:"journeyId"},outputs:{continueClick:"continueClick",backClick:"backClick",swipeEnabled:"swipeEnabled",updateStep:"updateStep"},decls:1,vars:1,consts:[[3,"ngClass",4,"ngIf"],[3,"ngClass"],["class","journeys-steps-step",3,"ngStyle","ngClass",4,"ngFor","ngForOf"],[4,"ngIf"],["helpCardsTemp",""],[1,"journeys-steps-step",3,"ngStyle","ngClass"],[4,"ngFor","ngForOf"],[3,"element",4,"ngIf"],[3,"imageUrl","value",4,"ngIf"],[3,"element","values","answer","ngStyle","index","valueChange","currentValue","isRequired","updateStepValueAndStep",4,"ngIf"],[3,"element","index",4,"ngIf"],[3,"displayHeader","fromJourneys",4,"ngIf"],[3,"src","ngStyle","alt",4,"ngIf"],[3,"element","ngStyle","values","answer","valueChange",4,"ngIf"],[3,"label","link","type","idSuffix","noSpacing","isActiveBackBtn","backBtnColor","disabled","ngStyle","ngClass","continueClick","backClick",4,"ngIf"],[3,"element"],[3,"imageUrl","value"],[3,"element","values","answer","ngStyle","index","valueChange","currentValue","isRequired","updateStepValueAndStep"],[3,"element","index"],[3,"displayHeader","fromJourneys"],[3,"src","ngStyle","alt"],[3,"element","ngStyle","values","answer","valueChange"],["class","internal",3,"ngStyle",4,"ngFor","ngForOf"],[1,"internal",3,"ngStyle"],[3,"element","values","answer","ngStyle","index","valueChange","currentValue","updateStepValueAndStep",4,"ngIf"],[3,"label","link","idSuffix","isActiveBackBtn","backBtnColor","continueClick","backClick",4,"ngIf"],[3,"src","alt",4,"ngIf"],[3,"ngStyle","element","values","answer","valueChange",4,"ngIf"],[3,"element","values","answer","ngStyle","index","valueChange","currentValue","updateStepValueAndStep"],[3,"label","link","idSuffix","isActiveBackBtn","backBtnColor","continueClick","backClick"],[3,"src","alt"],[3,"ngStyle","element","values","answer","valueChange"],[4,"ngTemplateOutlet"],[3,"label","link","type","idSuffix","noSpacing","isActiveBackBtn","backBtnColor","disabled","ngStyle","ngClass","continueClick","backClick"]],template:function(n,i){1&n&&e.YNc(0,en,5,3,"div",0),2&n&&e.Q6J("ngIf",i.step.content)},dependencies:[u.PM,_.mk,_.sg,_.O5,_.tP,_.PC,T.a,k.W,J.o,I.a,Q.y,S.k,Z.V,N._,Y.r,U,L,D,G,ee,ne,te.N,ae,_.Ov],styles:["[_nghost-%COMP%]   div[_ngcontent-%COMP%]{min-height:100%;flex-direction:column}[_nghost-%COMP%]   div[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]{flex-grow:1;box-shadow:var(--card-box-shadow);border-radius:var(--card-border-radius);margin:0;padding:15px 20px 20px;text-align:left;display:flex;flex-direction:column}[_nghost-%COMP%]   div[_ngcontent-%COMP%]   ion-card.internal[_ngcontent-%COMP%]{box-shadow:none;display:block;flex-grow:0}[_nghost-%COMP%]   div[_ngcontent-%COMP%]   ion-card.hideStep[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:not(journeys-steps-step-animation){display:none}[_nghost-%COMP%]   div[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   journeys-steps-step-input[_ngcontent-%COMP%]:last-of-type{margin-bottom:20px}[_nghost-%COMP%]   div[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   journeys-steps-step-row-with-image[_ngcontent-%COMP%]{margin-bottom:25px}[_nghost-%COMP%]   div[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   journeys-steps-step-row-with-image[_ngcontent-%COMP%]:last-of-type{margin-bottom:0}[_nghost-%COMP%]   div[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   journeys-steps-step-mx-widget[_ngcontent-%COMP%]{margin-bottom:10px}[_nghost-%COMP%]   div[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   journeys-steps-step-button[_ngcontent-%COMP%]{width:100%;margin-top:auto}[_nghost-%COMP%]   div[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   journeys-steps-step-button.spacing[_ngcontent-%COMP%]{padding-top:20px}[_nghost-%COMP%]   div[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   journeys-steps-step-button.no-spacing[_ngcontent-%COMP%]{margin-top:0;margin-bottom:0;padding-top:0;padding-bottom:0}[_nghost-%COMP%]   div[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   journeys-steps-step-header-with-logo[_ngcontent-%COMP%]{margin-bottom:20px}[_nghost-%COMP%]   div[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]:not(:last-of-type){margin-bottom:20px}[_nghost-%COMP%]   div[_ngcontent-%COMP%]   journeys-steps-step-help-card[_ngcontent-%COMP%]{margin-top:20px}[_nghost-%COMP%]   div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto;margin-bottom:20px;width:362px}[_nghost-%COMP%]   div.web-step[_ngcontent-%COMP%]{background:var(--ion-color-white)}@media screen and (min-width: 920px){[_nghost-%COMP%]   div.web-step[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]{margin:0 36px 100px;box-shadow:none}}@media screen and (max-width: 920px){[_nghost-%COMP%]   div.web-step[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]{box-shadow:none}}[_nghost-%COMP%]   div.mobile-step[_ngcontent-%COMP%]{margin-bottom:25px;display:flex}"]}),t})();const tn=["journeyStep"];function on(t,o){if(1&t){const n=e.EpF();e.TgZ(0,"div",4)(1,"journeys-steps-step",5,6),e.NdJ("continueClick",function(s){e.CHM(n);const r=e.oxw(2);return e.KtG(r.handleContinueClick(s))})("backClick",function(){e.CHM(n);const s=e.oxw(2);return e.KtG(s.handleBackClick())})("swipeEnabled",function(s){e.CHM(n);const r=e.oxw(2);return e.KtG(r.updateSwipeEnabled(s))})("updateStep",function(s){e.CHM(n);const r=e.oxw().index,c=e.oxw();return e.KtG(c.updateStep(s,r))}),e.qZA()()}if(2&t){const n=e.oxw(),i=n.index,s=n.$implicit,r=e.oxw();e.xp6(1),e.Q6J("index",i)("step",s)("currentStep",r.currentStep)("journeyId",r.journey.journeyID)}}function sn(t,o){1&t&&e.YNc(0,on,3,4,"ng-template",3)}function rn(t,o){1&t&&e._UZ(0,"div")}const an=[{path:"",component:(()=>{class t{constructor(n,i,s,r,c,g,gn){this.footerService=n,this.journeyService=i,this.ngZone=s,this.router=r,this.eventManager=c,this.eventTracking=g,this.utilityService=gn,this.currentStep=0,this.slideOpts={},this.keyboard=M.N1,this.subscription=new m.w0,this.updateStatuses=!0,this.saveLastStep=!0}ngOnInit(){this.isWeb=this.utilityService.getIsWeb(),this.slideOpts=this.isWeb?{slidesPerView:1,centeredSlides:!0,spaceBetween:50,noSwipingSelector:"ion-range",longSwipes:!0,longSwipesMs:100,longSwipesRatio:.1,shortSwipes:!1}:{slidesPerView:1.1,centeredSlides:!0,spaceBetween:10,noSwipingSelector:"ion-range"},this.subscription.add(this.eventManager.createSubscriber(y.S.leaveJourney).subscribe(()=>{this.leaveJourney()})),this.refreshJourneyStatusPublisher=this.eventManager.createPublisher(y.S.refreshJourneyStatus),this.scrollToTopPublisher=this.eventManager.createPublisher(y.S.journeyStepsScrollToTop),this.subscription.add(this.journeyService.fetchJourneys().subscribe(()=>{const n=this.journeyService.getCurrentJourney();this.journey&&this.journey!==n&&(this.journey=this.journeyService.getCurrentJourney(),this.steps=this.journey.steps)}))}ionViewWillEnter(){this.footerService.publish({type:w.v.none}),this.journeyService.publishSelectedTab("steps"),this.journey=this.journeyService.getCurrentJourney(),this.steps=this.journey.steps,this.swipeEnabledList=Array(this.steps.length).fill(!0),this.progressBarSteps=JSON.parse(JSON.stringify(Array(this.steps.length).fill({status:p.q.notStarted}))),this.steps&&this.steps.length>0&&(this.updateStepStatuses(0,void 0,!1),this.isWeb&&this.refreshJourneyStatusPublisher.publish(void 0)),this.journeyService.publishCurrentStep(this.currentStep),this.saveLastStep=!0}ionViewDidEnter(){setTimeout(()=>{this.slides.slideTo(this.journey.lastModifiedStepIndex,0);for(let n=0;n<this.journey.lastModifiedStepIndex;n++)this.progressBarSteps[n]={status:p.q.completed}},100)}setSwiperInstance(n){this.slides=n,this.swipeEnabledList&&(this.slides.allowTouchMove=this.swipeEnabledList[this.currentStep])}handleSlideChange(){this.ngZone.run(()=>{this.isWeb||this.keyboard.hide();const n=this.slides?this.slides.activeIndex:this.slideOpts.initialSlide;if(n===this.steps.length)return this.updateStepStatuses(this.currentStep),void this.finishJourney();this.updateStepStatuses(n),this.currentStep=n,this.slides&&(this.slides.allowTouchMove=this.swipeEnabledList[this.currentStep]),this.journeyService.publishCurrentStep(this.currentStep),this.isWeb&&this.scrollToTopPublisher.publish(void 0)})}updateStepStatuses(n,i=this.currentStep,s=!0){if(this.updateStatuses){const r=[];if(s){const c=this.getUpdatedCompleteStep(i);c&&r.push(this.journeyService.removeContent(c))}this.steps[n].status||(0===n&&this.eventTracking.eventTracking({eventName:"Journey Not Completed",journeyID:this.journey.journeyID,journeyName:this.journey.journeyName}),this.steps[n].status=p.q.inProgress,r.push(this.journeyService.removeContent(this.steps[n]))),this.saveProgress(r),this.journeyService.updateJourneySteps(this.steps,this.journey.journeyID),n>0&&(this.progressBarSteps[n-1].status=p.q.completed),this.progressBarSteps[n].status=p.q.notStarted}this.updateStatuses=!0}getUpdatedCompleteStep(n){let i;return(this.steps[n].status!==p.q.completed||this.steps[n].answer!==JSON.stringify(this.steps[n].value))&&(this.steps[n].status!==p.q.completed&&n===this.steps.length-1&&this.eventTracking.eventTracking({eventName:"Journey Not Completed",journeyID:this.journey.journeyID,updateInd:"Y",journeyName:this.journey.journeyName}),this.steps[n].status=p.q.completed,this.steps[n].value&&this.steps[n].value!=={}&&(this.steps[n].answer=JSON.stringify(this.steps[n].value)),i=this.steps[n]),i}saveProgress(n){n.length>0&&this.journeyService.saveProgress(n)}handleContinueClick(n){this.currentStep<this.steps.length-1?this.slides.slideNext():(this.updateStepStatuses(this.currentStep),n.route?this.finishJourney():this.leaveJourney())}handleBackClick(){0!==this.currentStep&&this.slides.slideTo(this.currentStep-1)}finishJourney(){this.stepToSave=0,this.leaveJourney(),this.journeyService.isSummaryStepCompleted()?this.isWeb?(this.refreshJourneyStatusPublisher.publish(void 0),this.router.navigate(["/journeys/journey/"+this.journey.journeyID+"/overview"],{queryParams:{journeyType:"all"}})):this.router.navigateByUrl("/journeys/journey/"+this.journey.journeyID+"/overview"):this.router.navigateByUrl("/journeys")}scrollToTop(){this.isWeb||this.stepEls.get(this.currentStep).nativeElement.scrollIntoView({behavior:"auto",block:"center",inline:"end"})}updateSwipeEnabled(n){this.swipeEnabledList[n.index]=n.swipeEnabled,this.slides&&(this.slides.allowTouchMove=this.swipeEnabledList[this.currentStep])}leaveJourney(){if(this.journey&&(this.journeyService.updateJourneySteps(this.steps,this.journey.journeyID),this.updateStatuses=!1,this.saveLastStep)){this.saveLastStep=!1;const n=this.stepToSave||0===this.stepToSave?this.stepToSave:this.currentStep;this.saveProgress([this.journeyService.removeContent(this.steps[n])]),this.journey.lastModifiedStepIndex=n,this.journeyService.setCurrentJourney(this.journey,!0),this.stepToSave=void 0}}updateStep(n,i){this.steps[i].value=n,this.journeyService.updateJourneySteps(this.steps,this.journey.journeyID,!1)}ionViewWillLeave(){this.leaveJourney()}ngOnDestroy(){this.subscription.unsubscribe(),this.isWeb&&this.leaveJourney()}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(b.c),e.Y36(l.W),e.Y36(e.R0b),e.Y36(d.F0),e.Y36(O.O),e.Y36(j.f),e.Y36(h.O))},t.\u0275cmp=e.Xpm({type:t,selectors:[["journeys-steps"]],viewQuery:function(n,i){if(1&n&&e.Gf(tn,5,e.SBq),2&n){let s;e.iGM(s=e.CRH())&&(i.stepEls=s)}},decls:4,vars:4,consts:[[3,"steps","currentStep"],[3,"config","swiper","slideChange","slideChangeTransitionEnd"],[4,"ngFor","ngForOf"],["swiperSlide",""],[1,"steps-content"],[3,"index","step","currentStep","journeyId","continueClick","backClick","swipeEnabled","updateStep"],["journeyStep",""]],template:function(n,i){1&n&&(e._UZ(0,"app-step-progress-bar",0),e.TgZ(1,"swiper",1),e.NdJ("swiper",function(r){return i.setSwiperInstance(r)})("slideChange",function(){return i.handleSlideChange()})("slideChangeTransitionEnd",function(){return i.scrollToTop()}),e.YNc(2,sn,1,0,null,2),e.YNc(3,rn,1,0,"ng-template",3),e.qZA()),2&n&&(e.Q6J("steps",i.progressBarSteps)("currentStep",i.currentStep),e.xp6(1),e.Q6J("config",i.slideOpts),e.xp6(1),e.Q6J("ngForOf",i.steps))},dependencies:[_.sg,f.nF,f.YC,P.b,nn],styles:["[_nghost-%COMP%]{height:100%;display:block}[_nghost-%COMP%]   .steps-content[_ngcontent-%COMP%]{height:100%;width:100%}[_nghost-%COMP%]   app-step-progress-bar[_ngcontent-%COMP%]{margin:20px auto}[_nghost-%COMP%]   swiper[_ngcontent-%COMP%]{height:calc(100% - 48px);overflow-y:scroll}[_nghost-%COMP%]   swiper[_ngcontent-%COMP%]   journeys-steps-step[_ngcontent-%COMP%]{display:block;height:100%;width:100%}[_nghost-%COMP%]   .web-steps[_ngcontent-%COMP%]{margin:0 36px}"]}),t})()}];let cn=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[d.Bz.forChild(an),d.Bz]}),t})();var _n=a(76192),pn=a(37707),ln=a(12286);let un=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[u.Pc,_.ez,cn,f.kz,_n.q,pn.g,ln.k]}),t})()}}]);