"use strict";(self.webpackChunkmyvoyage=self.webpackChunkmyvoyage||[]).push([[2291],{72291:function(i,t,e){e.r(t),e.d(t,{EditEmailPageModule:function(){return x}});var n=e(38583),o=e(90665),a=e(47823),r=e(45195),s=e(64762),l=e(39313),c=e(94184),d=e(42070),p=e.t(d,2),m=e(57700),u=e(1747),h=e(40654),g=e(27603),f=e(37364),v=e(7930);function b(i,t){if(1&i&&(m.TgZ(0,"ion-row"),m.TgZ(1,"ion-col"),m._UZ(2,"ion-icon",10),m.TgZ(3,"ion-text",11),m._uU(4),m.qZA(),m.qZA(),m.qZA()),2&i){const i=m.oxw();m.xp6(4),m.Oqu(i.displayText.errors.invalidEmail)}}const y=[{path:"",component:(()=>{class i{constructor(i,t,e,n,o,a,r){this.headerType=i,this.router=t,this.modalController=e,this.accountInfoService=n,this.notificationService=o,this.utilityService=a,this.platformService=r,this.displayText=JSON.parse(JSON.stringify(p)).default,this.emailVailid=!0,this.actionOption={headername:this.displayText.headerName,btnleft:!0,btnright:!0,buttonLeft:{name:"",link:"settings/account-and-personal-info"},buttonRight:{name:"",link:"notification"}},this.isWeb=this.utilityService.getIsWeb(),this.platformService.isDesktop().subscribe(i=>{this.isDesktop=i})}ngOnInit(){this.headerType.publish({type:c.n.navbar,actionOption:this.actionOption}),this.fetchData()}fetchData(){this.subscription=this.notificationService.getNotificationSettings().subscribe(i=>{this.prefSettings=i,this.contactId=i.primaryEmail.partyContactId,this.email=i.primaryEmail.email})}cancel(){this.router.navigateByUrl(`/${this.isWeb&&!this.isDesktop?"more":"settings"}/account-and-personal-info`)}valueChanged(i){this.email=null==i?void 0:i.toString(),this.emailVailid=this.utilityService.validateEmail(this.email)}saveEmail(){return(0,s.mG)(this,void 0,void 0,function*(){const i=yield this.modalController.create({component:l.w,cssClass:"modal-not-fullscreen",swipeToClose:!1,componentProps:{titleMessage:this.displayText.alert.message,imageUrl:this.displayText.alert.imageUrl,saveFunction:()=>(0,s.mG)(this,void 0,void 0,function*(){return new Promise(i=>{this.accountInfoService.saveEmail(this.email,this.contactId).then(t=>{i(!!t)})})})}});return i.onDidDismiss().then(i=>{this.modalDismissed(i)}),i.present()})}modalDismissed(i){i.data.saved&&(this.prefSettings.primaryEmail.email=this.email,this.notificationService.setNotificationSettings(this.prefSettings),this.cancel())}ngOnDestroy(){this.subscription.unsubscribe()}}return i.\u0275fac=function(t){return new(t||i)(m.Y36(u.v),m.Y36(r.F0),m.Y36(a.IN),m.Y36(h.o),m.Y36(g.O),m.Y36(f.O),m.Y36(v.m))},i.\u0275cmp=m.Xpm({type:i,selectors:[["app-edit-email"]],decls:20,vars:7,consts:[[1,"ion-no-margin","p-20"],[3,"ngClass"],[1,"input-header"],["id","editEmail","name","editEmail","type","email","inputmode","email","pattern","email","autocomplete","email","clearInput","",1,"edit-email",3,"value","ionChange"],["editEmailInput",""],[4,"ngIf"],[1,"buttons"],["size","2"],["id","cancel-btn","name","submit","shape","round","expand","block","color","btncolor","fill","outline",1,"font-12",3,"click"],["id","save-btn","name","submit","shape","round","expand","block","color","btncolor","disabled","",1,"font-12",3,"click"],["src","assets/icon/warning.svg","alt","warning",1,"error-icon"],[1,"error"]],template:function(i,t){if(1&i){const i=m.EpF();m.TgZ(0,"ion-grid",0),m.TgZ(1,"div",1),m.TgZ(2,"ion-row"),m.TgZ(3,"ion-col"),m.TgZ(4,"div",2),m._uU(5),m.qZA(),m.qZA(),m.qZA(),m.TgZ(6,"ion-row"),m.TgZ(7,"ion-col"),m.TgZ(8,"ion-input",3,4),m.NdJ("ionChange",function(){m.CHM(i);const e=m.MAs(9);return t.valueChanged(e.value)}),m.qZA(),m.qZA(),m.qZA(),m.YNc(10,b,5,1,"ion-row",5),m.TgZ(11,"ion-row",6),m._UZ(12,"ion-col",7),m.TgZ(13,"ion-col"),m.TgZ(14,"ion-button",8),m.NdJ("click",function(){return t.cancel()}),m._uU(15),m.qZA(),m.qZA(),m.TgZ(16,"ion-col"),m.TgZ(17,"ion-button",9),m.NdJ("click",function(){return t.saveEmail()}),m._uU(18),m.qZA(),m.qZA(),m._UZ(19,"ion-col",7),m.qZA(),m.qZA(),m.qZA()}2&i&&(m.xp6(1),m.Q6J("ngClass",t.isWeb?"web-edit-email":"mobile-edit-email"),m.xp6(4),m.Oqu(t.displayText.nameLabel),m.xp6(3),m.Q6J("value",t.email),m.xp6(2),m.Q6J("ngIf",!t.emailVailid),m.xp6(5),m.hij("",t.displayText.button.cancel," "),m.xp6(2),m.uIk("disabled",!t.emailVailid),m.xp6(1),m.hij("",t.displayText.button.save," "))},directives:[a.jY,n.mk,a.Nd,a.wI,a.pK,a.j9,n.O5,a.YG,a.gu,a.yW],styles:["[_nghost-%COMP%]{background-color:var(--ion-color-white)}[_nghost-%COMP%]   .sub-header[_ngcontent-%COMP%]{font-size:16px;font-weight:bold;line-height:1.25;letter-spacing:.08px;margin-bottom:20px}[_nghost-%COMP%]   .edit-email[_ngcontent-%COMP%]{border:1px solid var(--secondary-colors-medium-gray-2);border-radius:4px;width:auto;color:var(--primary-colors-voya-black);--padding-start: 16px;height:56px}[_nghost-%COMP%]   .buttons[_ngcontent-%COMP%]{margin-top:40px}[_nghost-%COMP%]   .error[_ngcontent-%COMP%]{color:var(--secondary-colors-error-red);margin-left:4px;vertical-align:top}[_nghost-%COMP%]   .error-icon[_ngcontent-%COMP%]{width:22px;height:22px;margin-left:4px;fill:var(--secondary-colors-error-red)}[_nghost-%COMP%]   .error-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border-color:var(--secondary-colors-error-red)!important}[_nghost-%COMP%]   .error-title[_ngcontent-%COMP%]{color:var(--secondary-colors-error-red)}[_nghost-%COMP%]   .web-edit-email[_ngcontent-%COMP%]{margin:20px}"]}),i})()}];let Z=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=m.oAB({type:i}),i.\u0275inj=m.cJS({imports:[[r.Bz.forChild(y)],r.Bz]}),i})(),x=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=m.oAB({type:i}),i.\u0275inj=m.cJS({imports:[[n.ez,o.u5,a.Pc,Z]]}),i})()}}]);