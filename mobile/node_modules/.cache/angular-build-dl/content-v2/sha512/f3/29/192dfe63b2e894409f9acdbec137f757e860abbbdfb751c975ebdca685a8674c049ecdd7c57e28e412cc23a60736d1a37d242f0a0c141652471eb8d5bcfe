{"version":3,"mappings":"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","names":["EnrollmentGuidanceComponent","savviService","headerType","sanitizer","footerType","utilityService","headername","btnleft","buttonLeft","name","link","publish","type","_shared_lib_constants_headerType_enum__WEBPACK_IMPORTED_MODULE_2__","actionOption","_shared_lib_modules_footer_constants_footerType_enum__WEBPACK_IMPORTED_MODULE_6__","isWeb","getIsWeb","setSuppressHeaderFooter","generateSavviUrl","savviUrl","bypassSecurityTrustResourceUrl","_shared_lib_services_benefits_open_savvi_open_savvi_service__WEBPACK_IMPORTED_MODULE_3__","_shared_lib_services_header_type_header_type_service__WEBPACK_IMPORTED_MODULE_4__","_angular_platform_browser__WEBPACK_IMPORTED_MODULE_9__","_shared_lib_modules_footer_services_footer_type_footer_type_service__WEBPACK_IMPORTED_MODULE_5__","_shared_lib_services_utility_utility_service__WEBPACK_IMPORTED_MODULE_7__","selector","template","routes","path","component","_savvi_component__WEBPACK_IMPORTED_MODULE_1__","children","_components_enrollment_guidance_enrollment_guidance_component__WEBPACK_IMPORTED_MODULE_0__","SavviRoutingModule","imports","_angular_router__WEBPACK_IMPORTED_MODULE_4__","exports","SavviComponent","_shared_lib_services_utility_utility_service__WEBPACK_IMPORTED_MODULE_1__","SavviModule","_angular_common__WEBPACK_IMPORTED_MODULE_5__","_ionic_angular__WEBPACK_IMPORTED_MODULE_6__","_savvi_routing_module__WEBPACK_IMPORTED_MODULE_0__","declarations","_components_enrollment_guidance_enrollment_guidance_component__WEBPACK_IMPORTED_MODULE_2__","OpenSavviService","authService","baseService","loadingController","_shared_lib_services_benefits_constants_endpoints__WEBPACK_IMPORTED_MODULE_2__","environment","getEnvironment","tokenEndPoints","appendBaseUrlToEndpoints","tokenBaseUrl","loginEndPoints","loginBaseUrl","savviSaml","replace","savviBaseUrl","create","translucent","loading","present","getAccessToken","authToken","request","client_id","authTokenExchangeClient","subject_token","subject_token_type","audience","ssoSamlUrl","grant_type","requested_token_type","scope","postUrlEncoded","samlAuthToken","queryAuthTokenResponse","dismiss","access_token","_mobile_app_modules_shared_service_authentication_authentication_service__WEBPACK_IMPORTED_MODULE_3__","_shared_lib_services_utility_utility_service__WEBPACK_IMPORTED_MODULE_0__","_shared_lib_services_base_base_factory_provider__WEBPACK_IMPORTED_MODULE_1__","_ionic_angular__WEBPACK_IMPORTED_MODULE_5__","providedIn","__webpack_exports__"],"sources":["webpack:///shared-lib/modules/savvi/components/enrollment-guidance/enrollment-guidance.component.ts","webpack:///shared-lib/modules/savvi/savvi-routing.module.ts","webpack:///shared-lib/modules/savvi/savvi.component.ts","webpack:///shared-lib/modules/savvi/savvi.module.ts","webpack:///shared-lib/services/benefits/open-savvi/open-savvi.service.ts","webpack:///shared-lib/modules/savvi/components/enrollment-guidance/enrollment-guidance.component.html","webpack:///shared-lib/modules/savvi/savvi.component.html"],"sourcesContent":["import {Component, OnInit} from '@angular/core';\nimport {HeaderType} from '@shared-lib/constants/headerType.enum';\nimport {ActionOptions} from '@shared-lib/models/ActionOptions.model';\nimport {OpenSavviService} from '@shared-lib/services/benefits/open-savvi/open-savvi.service';\nimport {HeaderTypeService} from '@shared-lib/services/header-type/header-type.service';\nimport {DomSanitizer, SafeResourceUrl} from '@angular/platform-browser';\nimport {FooterTypeService} from '@shared-lib/modules/footer/services/footer-type/footer-type.service';\nimport {FooterType} from '@shared-lib/modules/footer/constants/footerType.enum';\nimport {SharedUtilityService} from '@shared-lib/services/utility/utility.service';\n@Component({\n  selector: 'app-enrollment-guidance',\n  templateUrl: './enrollment-guidance.component.html',\n  styleUrls: ['enrollment-guidance.component.scss'],\n})\nexport class EnrollmentGuidanceComponent implements OnInit {\n  actionOption: ActionOptions = {\n    headername: 'Dashboard',\n    btnleft: true,\n    buttonLeft: {\n      name: '',\n      link: 'back',\n    },\n  };\n  savviUrl: SafeResourceUrl;\n  isWeb: boolean;\n\n  constructor(\n    private savviService: OpenSavviService,\n    private headerType: HeaderTypeService,\n    private sanitizer: DomSanitizer,\n    private footerType: FooterTypeService,\n    private utilityService: SharedUtilityService\n  ) {}\n\n  ngOnInit() {\n    this.headerType.publish({\n      type: HeaderType.navbar,\n      actionOption: this.actionOption,\n    });\n    this.footerType.publish({type: FooterType.none});\n    this.isWeb = this.utilityService.getIsWeb();\n    this.utilityService.setSuppressHeaderFooter(true);\n  }\n\n  async ionViewWillEnter() {\n    this.utilityService.setSuppressHeaderFooter(true);\n    this.savviUrl = this.sanitizer.bypassSecurityTrustResourceUrl(\n      await this.savviService.generateSavviUrl()\n    );\n  }\n\n  ionViewWillLeave() {\n    this.utilityService.setSuppressHeaderFooter(false);\n  }\n\n  ngOnDestroy() {\n    this.utilityService.setSuppressHeaderFooter(false);\n  }\n}\n","import {NgModule} from '@angular/core';\nimport {Routes, RouterModule} from '@angular/router';\nimport {EnrollmentGuidanceComponent} from './components/enrollment-guidance/enrollment-guidance.component';\nimport {SavviComponent} from './savvi.component';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: SavviComponent,\n    children: [\n      {\n        path: 'enrollment-guidance',\n        component: EnrollmentGuidanceComponent,\n      },\n    ],\n  },\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class SavviRoutingModule {}\n","import {Component} from '@angular/core';\nimport {SharedUtilityService} from '@shared-lib/services/utility/utility.service';\n\n@Component({\n  selector: 'app-savvi',\n  templateUrl: './savvi.component.html',\n  styleUrls: [],\n})\nexport class SavviComponent {\n  constructor(private utilityService: SharedUtilityService) {}\n\n  ionViewWillEnter() {\n    this.utilityService.setSuppressHeaderFooter(true);\n  }\n\n  ionViewWillLeave() {\n    this.utilityService.setSuppressHeaderFooter(false);\n  }\n}\n","import {NgModule} from '@angular/core';\nimport {CommonModule} from '@angular/common';\nimport {IonicModule} from '@ionic/angular';\nimport {SavviRoutingModule} from './savvi-routing.module';\nimport {SavviComponent} from './savvi.component';\nimport {EnrollmentGuidanceComponent} from './components/enrollment-guidance/enrollment-guidance.component';\n\n@NgModule({\n  imports: [CommonModule, IonicModule, SavviRoutingModule],\n  declarations: [SavviComponent, EnrollmentGuidanceComponent],\n})\nexport class SavviModule {}\n","import {Injectable} from '@angular/core';\nimport {SharedUtilityService} from '@shared-lib/services/utility/utility.service';\nimport {BaseService} from '@shared-lib/services/base/base-factory-provider';\nimport {\n  loginEndPoints,\n  tokenEndPoints,\n} from '@shared-lib/services/benefits/constants/endpoints';\nimport {Environment} from '@shared-lib/models/environment.model';\nimport {AuthenticationService} from '@mobile/app/modules/shared/service/authentication/authentication.service';\nimport {QueryAccessToken} from '@shared-lib/services/benefits/open-savvi/models/queryAccessToken.model';\nimport {LoadingController} from '@ionic/angular';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class OpenSavviService {\n  public environment: Environment;\n  public tokenEndPoints = tokenEndPoints;\n  public loginEndPoints = loginEndPoints;\n\n  constructor(\n    private authService: AuthenticationService,\n    private utilityService: SharedUtilityService,\n    private baseService: BaseService,\n    private loadingController: LoadingController\n  ) {\n    this.environment = this.utilityService.getEnvironment();\n    this.tokenEndPoints = this.utilityService.appendBaseUrlToEndpoints(\n      tokenEndPoints,\n      this.environment.tokenBaseUrl\n    );\n    this.loginEndPoints = this.utilityService.appendBaseUrlToEndpoints(\n      loginEndPoints,\n      this.environment.loginBaseUrl\n    );\n  }\n\n  async generateSavviUrl(): Promise<string> {\n    this.loginEndPoints.savviSaml = this.loginEndPoints.savviSaml.replace(\n      '{savviBaseUrl}',\n      this.environment.savviBaseUrl\n    );\n    if (!this.utilityService.getIsWeb()) {\n      const loading = await this.loadingController.create({\n        translucent: true,\n      });\n      await loading.present();\n      const authToken = await this.authService.getAccessToken();\n      const request = {\n        client_id: this.environment.authTokenExchangeClient,\n        subject_token: authToken,\n        subject_token_type: 'access_token',\n        audience: this.environment.ssoSamlUrl,\n        grant_type: 'urn:ietf:params:oauth:grant-type:token-exchange',\n        requested_token_type: 'access_token',\n        scope: 'urn:voya:federation',\n      };\n      const queryAuthTokenResponse: QueryAccessToken = await this.baseService.postUrlEncoded(\n        this.tokenEndPoints.samlAuthToken,\n        request,\n        {}\n      );\n      loading.dismiss();\n      return (\n        this.loginEndPoints.savviSaml + queryAuthTokenResponse.access_token\n      );\n    } else {\n      return this.loginEndPoints.savviSaml;\n    }\n  }\n}\n","export default \"<iframe\\n  *ngIf=\\\"savviUrl\\\"\\n  [src]=\\\"savviUrl\\\"\\n  title=\\\"Savvi Enrollment Guidance\\\"\\n  allowfullscreen\\n></iframe>\\n\";","export default \"<ion-router-outlet></ion-router-outlet>\\n\";"]}