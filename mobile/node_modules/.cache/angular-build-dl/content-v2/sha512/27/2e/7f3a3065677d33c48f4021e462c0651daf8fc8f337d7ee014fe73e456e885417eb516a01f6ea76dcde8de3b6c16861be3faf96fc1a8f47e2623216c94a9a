"use strict";(self.webpackChunkmyvoyage=self.webpackChunkmyvoyage||[]).push([[1522],{51522:function(e,t,i){i.r(t),i.d(t,{EditPhonePageModule:function(){return x}});var n=i(38583),o=i(90665),s=i(47823),r=i(93206),a=i(64762),c=i(57061),h=i(39313),l=i(94184),p=i(57700),d=i(1747),u=i(40654),g=i(37364),m=i(27603),b=i(7930);function f(e,t){if(1&e&&(p.TgZ(0,"ion-row"),p.TgZ(1,"ion-col"),p._UZ(2,"ion-icon",10),p.TgZ(3,"ion-text",11),p._uU(4),p.qZA(),p.qZA(),p.qZA()),2&e){const e=p.oxw();p.xp6(4),p.Oqu(e.displayText.errors.invalidPhone)}}const v=[{path:"",component:(()=>{class e{constructor(e,t,i,n,o,s,r){this.headerType=e,this.modalController=t,this.accountInfoService=i,this.utilityService=n,this.noteSettingsService=o,this.platformService=s,this.router=r,this.displayText=c,this.actionOption={headername:this.displayText.headerName,btnleft:!0,btnright:!0,buttonLeft:{name:"",link:"settings/account-and-personal-info"},buttonRight:{name:"",link:"notification"}},this.phoneVailid=!0,this.isWeb=this.utilityService.getIsWeb(),this.platformService.isDesktop().subscribe(e=>{this.isDesktop=e})}ngOnInit(){this.headerType.publish({type:l.n.navbar,actionOption:this.actionOption}),this.fetchData()}fetchData(){this.subscription=this.noteSettingsService.getNotificationSettings().subscribe(e=>{this.prefSettings=e,this.contactId=e.mobilePhone.partyContactId,this.phone=e.mobilePhone.phoneNumber,this.valueChanged(e.mobilePhone.phoneNumber)})}valueChanged(e){this.phone=this.utilityService.formatPhone(e),this.phoneVailid=this.utilityService.validatePhone(this.phone)}goBack(){this.router.navigateByUrl(`/${this.isWeb&&!this.isDesktop?"more":"settings"}/account-and-personal-info`)}savePhone(){return(0,a.mG)(this,void 0,void 0,function*(){const e=yield this.modalController.create({component:h.w,cssClass:"modal-not-fullscreen",swipeToClose:!1,componentProps:{titleMessage:this.displayText.alert.message,imageUrl:this.displayText.alert.imageUrl,saveFunction:()=>(0,a.mG)(this,void 0,void 0,function*(){return new Promise(e=>{var t;this.phone=null===(t=this.phone)||void 0===t?void 0:t.replace(/[-\s]/g,""),this.accountInfoService.savePhone(this.phone,this.contactId).then(t=>{e(!!t)})})})}});return e.onDidDismiss().then(e=>{this.modalDismissed(e.data)}),e.present()})}modalDismissed(e){e.saved&&(this.prefSettings.mobilePhone.phoneNumber=this.phone.replace(/-/g,""),this.noteSettingsService.setNotificationSettings(this.prefSettings),this.goBack(),this.noteSettingsService.getNotificationSettings(!0))}ngOnDestroy(){this.subscription.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(p.Y36(d.v),p.Y36(s.IN),p.Y36(u.o),p.Y36(g.O),p.Y36(m.O),p.Y36(b.m),p.Y36(r.F0))},e.\u0275cmp=p.Xpm({type:e,selectors:[["mobile-edit-phone"]],decls:23,vars:8,consts:[[1,"ion-no-margin","p-20"],[3,"ngClass"],[1,"header-desc"],["id","editPhone","name","editPhone","type","text","pattern","[0-9]{3} [0-9]{3} [0-9]{4}","maxlength","12","inputmode","numeric","clearInput","",1,"edit-phone",3,"value","ionChange"],["editPhoneInput",""],[4,"ngIf"],[1,"mt-42"],["size-md","2","size-sm","1","size-xs","1"],["id","cancel-btn","name","submit","shape","round","expand","block","color","btncolor","fill","outline",1,"font-16",3,"click"],["id","save-btn","name","submit","shape","round","expand","block","color","btncolor","type","submit",1,"font-16",3,"disabled","click"],["src","assets/icon/warning.svg","alt","warning",1,"error-icon"],[1,"error"]],template:function(e,t){if(1&e){const e=p.EpF();p.TgZ(0,"ion-grid",0),p.TgZ(1,"div",1),p.TgZ(2,"ion-row"),p.TgZ(3,"ion-col",2),p._uU(4),p.qZA(),p.qZA(),p.TgZ(5,"ion-row"),p.TgZ(6,"ion-col"),p.TgZ(7,"ion-label"),p._uU(8),p.qZA(),p.qZA(),p.qZA(),p.TgZ(9,"ion-row"),p.TgZ(10,"ion-col"),p.TgZ(11,"ion-input",3,4),p.NdJ("ionChange",function(){p.CHM(e);const i=p.MAs(12);return t.valueChanged(i.value)}),p.qZA(),p.qZA(),p.qZA(),p.YNc(13,f,5,1,"ion-row",5),p.TgZ(14,"ion-row",6),p._UZ(15,"ion-col",7),p.TgZ(16,"ion-col"),p.TgZ(17,"ion-button",8),p.NdJ("click",function(){return t.goBack()}),p._uU(18),p.qZA(),p.qZA(),p.TgZ(19,"ion-col"),p.TgZ(20,"ion-button",9),p.NdJ("click",function(){return t.savePhone()}),p._uU(21),p.qZA(),p.qZA(),p._UZ(22,"ion-col",7),p.qZA(),p.qZA(),p.qZA()}2&e&&(p.xp6(1),p.Q6J("ngClass",t.isWeb?"web-edit-phone":"mobile-edit-phone"),p.xp6(3),p.Oqu(t.displayText.headerDesc),p.xp6(4),p.Oqu(t.displayText.label),p.xp6(3),p.Q6J("value",t.phone),p.xp6(2),p.Q6J("ngIf",!t.phoneVailid),p.xp6(5),p.hij("",t.displayText.button.cancel," "),p.xp6(2),p.Q6J("disabled",!t.phoneVailid),p.xp6(1),p.hij("",t.displayText.button.save," "))},directives:[s.jY,n.mk,s.Nd,s.wI,s.Q$,s.pK,s.j9,n.O5,s.YG,s.gu,s.yW],styles:["[_nghost-%COMP%]{background-color:var(--ion-color-white)}[_nghost-%COMP%]   .header-desc[_ngcontent-%COMP%]{font-size:16px;font-weight:bold;margin-bottom:40px}[_nghost-%COMP%]   ion-input[_ngcontent-%COMP%]{border:1px solid var(--secondary-colors-medium-gray-1);border-radius:4px;height:54px;--padding-start: 18px;margin-bottom:20px}[_nghost-%COMP%]   .error[_ngcontent-%COMP%]{color:var(--secondary-colors-error-red);margin-left:4px;vertical-align:top}[_nghost-%COMP%]   .error-icon[_ngcontent-%COMP%]{width:22px;height:22px;margin-left:4px;fill:var(--secondary-colors-error-red)}[_nghost-%COMP%]   .web-edit-phone[_ngcontent-%COMP%]{margin:20px}"]}),e})()}];let Z=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=p.oAB({type:e}),e.\u0275inj=p.cJS({imports:[[r.Bz.forChild(v)],r.Bz]}),e})(),x=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=p.oAB({type:e}),e.\u0275inj=p.cJS({imports:[[n.ez,o.u5,s.Pc,Z]]}),e})()}}]);