!function(){"use strict";function e(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */e=function(){return t};var t={},n=Object.prototype,i=n.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(j){u=function(e,t,n){return e[t]=n}}function l(e,t,n,i){var o=t&&t.prototype instanceof d?t:d,s=Object.create(o.prototype),a=new _(i||[]);return r(s,"_invoke",{value:S(e,n,a)}),s}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(j){return{type:"throw",arg:j}}}t.wrap=l;var h={};function d(){}function g(){}function f(){}var v={};u(v,s,function(){return this});var m=Object.getPrototypeOf,y=m&&m(m(P([])));y&&y!==n&&i.call(y,s)&&(v=y);var w=f.prototype=d.prototype=Object.create(v);function x(e){["next","throw","return"].forEach(function(t){u(e,t,function(e){return this._invoke(t,e)})})}function C(e,t){function n(r,o,s,a){var c=p(e[r],e,o);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==typeof l&&i.call(l,"__await")?t.resolve(l.__await).then(function(e){n("next",e,s,a)},function(e){n("throw",e,s,a)}):t.resolve(l).then(function(e){u.value=e,s(u)},function(e){return n("throw",e,s,a)})}a(c.arg)}var o;r(this,"_invoke",{value:function(e,i){function r(){return new t(function(t,r){n(e,i,t,r)})}return o=o?o.then(r,r):r()}})}function S(e,t,n){var i="suspendedStart";return function(r,o){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===r)throw o;return k()}for(n.method=r,n.arg=o;;){var s=n.delegate;if(s){var a=b(s,n);if(a){if(a===h)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var c=p(e,t,n);if("normal"===c.type){if(i=n.done?"completed":"suspendedYield",c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(i="completed",n.method="throw",n.arg=c.arg)}}}function b(e,t){var n=t.method,i=e.iterator[n];if(void 0===i)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,b(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var r=p(i,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,h;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function M(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function _(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function P(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(i.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:k}}function k(){return{value:void 0,done:!0}}return g.prototype=f,r(w,"constructor",{value:f,configurable:!0}),r(f,"constructor",{value:g,configurable:!0}),g.displayName=u(f,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,u(e,c,"GeneratorFunction")),e.prototype=Object.create(w),e},t.awrap=function(e){return{__await:e}},x(C.prototype),u(C.prototype,a,function(){return this}),t.AsyncIterator=C,t.async=function(e,n,i,r,o){void 0===o&&(o=Promise);var s=new C(l(e,n,i,r),o);return t.isGeneratorFunction(n)?s:s.next().then(function(e){return e.done?e.value:s.next()})},x(w),u(w,c,"Generator"),u(w,s,function(){return this}),u(w,"toString",function(){return"[object Generator]"}),t.keys=function(e){var t=Object(e),n=[];for(var i in t)n.push(i);return n.reverse(),function e(){for(;n.length;){var i=n.pop();if(i in t)return e.value=i,e.done=!1,e}return e.done=!0,e}},t.values=P,_.prototype={constructor:_,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(M),!e)for(var t in this)"t"===t.charAt(0)&&i.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,i){return s.type="throw",s.arg=e,t.next=n,i&&(t.method="next",t.arg=void 0),!!i}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],s=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var a=i.call(o,"catchLoc"),c=i.call(o,"finallyLoc");if(a&&c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=e,s.arg=t,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),M(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var r=i.arg;M(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:P(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},t}function t(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(r=i.key,o=void 0,"symbol"==typeof(o=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"))?o:String(o)),i)}var r,o}function n(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(self.webpackChunkmyvoyage=self.webpackChunkmyvoyage||[]).push([[3771],{3771:function(t,r,o){o.r(r),o.d(r,{StepsModule:function(){return ct}});var s,a=o(38583),c=o(47823),u=o(93206),l=o(57700),p=o(2398),h=o(71249),d=o(87730),g=o(75319),f=o(26682),v=o(89128),m=o(78503),y=o(78899),w=o(42597),x=o(37364),C=o(46597),S=o(14081),b=o(39777),O=((s=n(function e(t){i(this,e),this.journeyService=t,this.service=this.journeyService.journeyServiceMap[this.journeyService.getCurrentJourney().journeyID]})).\u0275fac=function(e){return new(e||s)(l.Y36(m.W))},s.\u0275cmp=l.Xpm({type:s,selectors:[["journeys-steps-step-header-with-logo"]],inputs:{element:"element"},decls:4,vars:2,consts:[["alt","account logo",3,"src"]],template:function(e,t){1&e&&(l.TgZ(0,"div"),l._UZ(1,"img",0),l.TgZ(2,"span"),l._uU(3),l.qZA(),l.qZA()),2&e&&(l.xp6(1),l.Q6J("src",t.element.imageId?t.service[t.element.imageId]:t.element.imageUrl,l.LSH),l.xp6(2),l.Oqu(t.element.answerId?t.service[t.element.answerId]:t.element.header))},styles:["[_nghost-%COMP%]{display:block}[_nghost-%COMP%]   div[_ngcontent-%COMP%]{display:flex;align-items:center}[_nghost-%COMP%]   div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:40px}[_nghost-%COMP%]   div[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px;color:var(--primary-colors-voya-black);font-weight:bold;padding-left:10px}"]}),s),M=o(96915),_=o(1282),P=["pieChartContainer"],k=function(){var e=function(){function e(t){i(this,e),this.journeyService=t,this.subscription=new g.w,this.highCharts=_,this.colors=[]}return n(e,[{key:"ngOnInit",value:function(){var e=this,t=this.journeyService.getCurrentJourney();this.journeyService.journeyServiceMap[t.journeyID]&&this.subscription.add(this.journeyService.journeyServiceMap[t.journeyID].valueChange.subscribe(function(){e.doPieCalculations(e.journeyService.journeyServiceMap[t.journeyID])}))}},{key:"doPieCalculations",value:function(e){var t=this;this.colors=[];var n=[];this.element.elements.forEach(function(i){t.colors.push(i.color),n.push({name:i.label,y:Math.round(e[i.answerId])})}),this.setLabelAndDistance(n),this.pushDataToPieChart(n)}},{key:"setLabelAndDistance",value:function(e){var t=this,n=e.reduce(function(e,t){return e+t.y},0);e.forEach(function(e){var i=t.percentage(e.y,n);e.label=0===i?"":Math.round(i)+"%",e.dataLabels={distance:t.setDistance(i)}})}},{key:"setDistance",value:function(e){return 0<e&&e<25?-15:26<e&&e<50?-50:-75}},{key:"ngAfterViewInit",value:function(){var e=this;setTimeout(function(){e.chart&&e.chart.reflow()},50)}},{key:"pushDataToPieChart",value:function(e){this.highCharts.setOptions({lang:{thousandsSep:","}}),this.chart=this.highCharts.chart("pie-chart-container",{credits:{enabled:!1},chart:{height:300},title:{text:void 0},plotOptions:{pie:{size:"80%",events:{click:function(e){e.preventDefault()}},allowPointSelect:!0,tooltip:{headerFormat:void 0,pointFormat:"<b>{point.name} : ${point.y:,.0f}</b>"},dataLabels:{format:"<b>{point.label}</b>",useHTML:!0,style:{fontWeight:"bold",color:"white",textDecoration:"none",fontSize:"14px"}},startAngle:0,endAngle:0,center:["50%","50%"],colors:this.colors}},series:[{type:"pie",data:e}]})}},{key:"percentage",value:function(e,t){var n=e/t*100;return n<=this.element.minValue?0:n}},{key:"ngOnDestroy",value:function(){this.pieChartContainer.nativeElement.remove(),this.subscription.unsubscribe()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(l.Y36(m.W))},e.\u0275cmp=l.Xpm({type:e,selectors:[["journey-step-charts-pie-chart"]],viewQuery:function(e,t){var n;(1&e&&l.Gf(P,5),2&e)&&(l.iGM(n=l.CRH())&&(t.pieChartContainer=n.first))},inputs:{element:"element"},decls:2,vars:0,consts:[["id","pie-chart-container"],["pieChartContainer",""]],template:function(e,t){1&e&&l._UZ(0,"div",0,1)},encapsulation:2}),e}();function j(e,t){if(1&e&&l._UZ(0,"journey-step-charts-pie-chart",1),2&e){var n=l.oxw();l.Q6J("element",n.element)}}var J=function(){var e=n(function e(){i(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=l.Xpm({type:e,selectors:[["journey-step-charts"]],inputs:{element:"element"},decls:1,vars:1,consts:[[3,"element",4,"ngIf"],[3,"element"]],template:function(e,t){1&e&&l.YNc(0,j,1,1,"journey-step-charts-pie-chart",0),2&e&&l.Q6J("ngIf","pie"===t.element.type)},directives:[a.O5,k],encapsulation:2}),e}(),I=o(20359),Z=o(5135),Q=["img"],T=function(e){return{width:e}},N=function(e,t,n){return{width:e,height:t,background:n}},E=function(){var e=function(){function e(t){i(this,e),this.journeyService=t,this.times=0,this.animationSeen=!1}return n(e,[{key:"ngOnInit",value:function(){var e=this;this.speed=this.element.speed?this.element.speed:50,this.widthOfSpriteSheet=this.element.widthOfEachSprite*(this.element.numberOfSpritesPerRow-1),this.currentStepSubscription=this.journeyService.getCurrentStep$().subscribe(function(t){t===e.index&&e.startAnimation()})}},{key:"startAnimation",value:function(){var e=this;if(!this.animationSeen){this.animationSeen=!0;var t=this.element.widthOfEachSprite,n=0;this.animationInterval=setInterval(function(){e.times++,e.img.nativeElement.style.backgroundPosition="-".concat(t,"px -").concat(n,"px"),t<e.widthOfSpriteSheet?t+=e.element.widthOfEachSprite:(t=0,n+=e.element.heightOfEachSprite),e.times>=e.element.totalNumberOfSprites-1&&(clearInterval(e.animationInterval),e.times=0)},this.speed)}}},{key:"ngOnDestroy",value:function(){this.currentStepSubscription.unsubscribe()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(l.Y36(m.W))},e.\u0275cmp=l.Xpm({type:e,selectors:[["journeys-steps-step-animation"]],viewQuery:function(e,t){var n;(1&e&&l.Gf(Q,5),2&e)&&(l.iGM(n=l.CRH())&&(t.img=n.first))},inputs:{element:"element",index:"index"},decls:4,vars:8,consts:[[1,"container",3,"ngStyle"],[3,"ngStyle"],["img",""],[1,"hide-px"]],template:function(e,t){1&e&&(l.TgZ(0,"div",0),l._UZ(1,"div",1,2),l._UZ(3,"div",3),l.qZA()),2&e&&(l.Q6J("ngStyle",l.VKq(2,T,t.element.widthOfEachSprite+"px")),l.xp6(1),l.Q6J("ngStyle",l.kEZ(4,N,t.element.widthOfEachSprite-1+"px",t.element.heightOfEachSprite+"px","url("+t.element.imageUrl+") 0 0")))},directives:[a.PC],styles:["div.container[_ngcontent-%COMP%]{margin:auto;display:flex;padding-bottom:20px}div.container[_ngcontent-%COMP%]   .hide-px[_ngcontent-%COMP%]{width:1px}"]}),e}(),A=function(){var e=function(){function e(t){i(this,e),this.journeyService=t}return n(e,[{key:"openModal",value:function(){this.journeyService.openModal({element:this.element})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(l.Y36(m.W))},e.\u0275cmp=l.Xpm({type:e,selectors:[["journeys-steps-step-video"]],inputs:{element:"element"},decls:1,vars:3,consts:[["tabindex","0",3,"src","id","alt","click","keydown.enter"]],template:function(e,t){1&e&&(l.TgZ(0,"img",0),l.NdJ("click",function(){return t.openModal()})("keydown.enter",function(){return t.openModal()}),l.qZA()),2&e&&l.Q6J("src",t.element.imageUrl,l.LSH)("id","journeyVideo"+t.element.idSuffix)("alt",t.element.altText||"")},styles:["[_nghost-%COMP%]{display:block;margin-bottom:10px;text-align:center}[_nghost-%COMP%]   img[_ngcontent-%COMP%]{cursor:pointer}"]}),e}(),Y=o(65388),q=o(24494),L=o(56755),B=o(56515);function U(e,t){if(1&e&&(l.ynx(0),l.TgZ(1,"journeys-expand-collapse",2),l._UZ(2,"journeys-steps-step-intro",3),l.qZA(),l.BQk()),2&e){var n=t.$implicit,i=t.index,r=l.oxw();l.xp6(1),l.Q6J("header",r.element.options[i].label)("index",n.idSuffix),l.xp6(1),l.Q6J("element",n)}}var V=function(){var e=function(){function e(){i(this,e),this.stepContentElements=[]}return n(e,[{key:"ngOnInit",value:function(){var e,t=this;null===(e=this.element.options)||void 0===e||e.forEach(function(e,n){t.stepContentElements.push({description:e.description,descriptions:e.descriptions,webviewHeader:e.webviewHeader,webviewLinks:e.webviewLinks,webviewHeaders:e.webviewHeaders,webviewToolbars:e.webviewToolbars,videoUrl:e.videoUrl,videoUrls:e.videoUrls,idSuffix:t.element.idSuffix+n})})}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=l.Xpm({type:e,selectors:[["journeys-steps-step-expand-collapse"]],inputs:{element:"element"},decls:2,vars:1,consts:[["inset","true","lines","full"],[4,"ngFor","ngForOf"],[3,"header","index"],[3,"element"]],template:function(e,t){1&e&&(l.TgZ(0,"ion-list",0),l.YNc(1,U,3,3,"ng-container",1),l.qZA()),2&e&&(l.xp6(1),l.Q6J("ngForOf",t.stepContentElements))},directives:[c.q_,a.sg,B.X,b.k],styles:["[_nghost-%COMP%]   ion-list[_ngcontent-%COMP%]{margin:0;padding:0;background-color:var(--ion-color-white);overflow:auto;font-size:medium;font-size:initial}"]}),e}();function $(e,t){if(1&e&&(l.TgZ(0,"span"),l._uU(1),l.qZA()),2&e){var n=l.oxw();l.xp6(1),l.Oqu(n.element.header)}}function W(e,t){if(1&e&&(l.TgZ(0,"span",6),l._uU(1),l.ALo(2,"currency"),l.qZA()),2&e){var n=l.oxw();l.xp6(1),l.Oqu("dollar"===n.element.type&&"-"!==n.answer?l.gM2(2,1,n.answer,"USD","symbol","1.0-0"):n.answer)}}var F=function(e){return{"with-header":e}},H=function(){var e=function(){function e(t){i(this,e),this.journeyService=t,this.subscription=new g.w,this.service=this.journeyService.journeyServiceMap[this.journeyService.getCurrentJourney().journeyID]}return n(e,[{key:"ngOnInit",value:function(){var e=this;this.answer=this.element.answer,this.service&&!this.answer&&this.subscription.add(this.service.valueChange.subscribe(function(){e.answer=e.element.answerId?e.service[e.element.answerId]:e.element.answer,e.journeyService.isValueEmpty(e.answer)&&(e.answer="-")}))}},{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(l.Y36(m.W))},e.\u0275cmp=l.Xpm({type:e,selectors:[["journeys-steps-step-row-with-image"]],inputs:{element:"element"},decls:8,vars:8,consts:[[3,"ngClass"],[1,"img-container"],[3,"src","alt"],[4,"ngIf"],[1,"desc-answer-container"],["class","answer",4,"ngIf"],[1,"answer"]],template:function(e,t){1&e&&(l.TgZ(0,"div",0),l.TgZ(1,"div",1),l._UZ(2,"img",2),l.YNc(3,$,2,1,"span",3),l.qZA(),l.TgZ(4,"div",4),l.TgZ(5,"span"),l._uU(6),l.qZA(),l.YNc(7,W,3,6,"span",5),l.qZA(),l.qZA()),2&e&&(l.Q6J("ngClass",l.VKq(6,F,t.element.header)),l.xp6(2),l.Q6J("src",t.element.imageUrl,l.LSH)("alt",(null==t.element?null:t.element.altText)||""),l.xp6(1),l.Q6J("ngIf",t.element.header),l.xp6(3),l.Oqu(t.element.description),l.xp6(1),l.Q6J("ngIf",void 0===t.element.displayAnswer||t.element.displayAnswer))},directives:[a.mk,a.O5],pipes:[a.H9],styles:["[_nghost-%COMP%]{display:block}[_nghost-%COMP%]   div[_ngcontent-%COMP%]{display:flex}[_nghost-%COMP%]   div.desc-answer-container[_ngcontent-%COMP%]{flex-grow:0;width:100%}[_nghost-%COMP%]   div.desc-answer-container[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:18px;color:var(--primary-colors-voya-black);margin:auto 0;white-space:pre-wrap}@media (max-width: 768px){[_nghost-%COMP%]   div.desc-answer-container[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin:unset}}[_nghost-%COMP%]   div.desc-answer-container[_ngcontent-%COMP%]   span.answer[_ngcontent-%COMP%]{font-size:24px;font-weight:600;padding-left:10px;margin-left:auto}[_nghost-%COMP%]   div.img-container[_ngcontent-%COMP%]{min-width:43px;margin-right:7px;align-items:flex-start}[_nghost-%COMP%]   div.img-container[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:18px;margin-left:10px;font-weight:600;color:var(--primary-colors-voya-black)}[_nghost-%COMP%]   .with-header[_ngcontent-%COMP%]{flex-direction:column}"]}),e}(),D=o(74799),G=o(51772),z=o(71638),R=o(97582),X=o(40654),K=o(88786),ee=o(61040),te=function(e){return{"padding-bottom":e}},ne=function(e,t){return{"margin-top":e,"margin-bottom":t}},ie=function(){var t=function(){function t(e,n,r,o,s,a){i(this,t),this.journeyService=e,this.utilityService=n,this.accountInfoService=r,this.settingsService=o,this.router=s,this.accountService=a,this.moreContentSubscription=new g.w}return n(t,[{key:"ngOnInit",value:function(){return(0,R.mG)(this,void 0,void 0,e().mark(function t(){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.isWeb=this.utilityService.getIsWeb(),e.next=3,this.settingsService.getSettingsDisplayFlags();case 3:this.settingsDisplayFlags=e.sent;case 4:case"end":return e.stop()}},t,this)}))}},{key:"openWebView",value:function(){return(0,R.mG)(this,void 0,void 0,e().mark(function t(){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!("videoUrl"in this.element)){e.next=4;break}this.journeyService.openModal({element:this.element}),e.next=15;break;case 4:if(!this.settingsDisplayFlags.displayContactLink||"externalLink"in this.element){e.next=14;break}if(!this.isWeb){e.next=9;break}this.router.navigateByUrl("/journeys/contact-a-coach"),e.next=12;break;case 9:return e.next=11,this.fetchScreenContent();case 11:this.journeyService.openModal({element:{id:"contactACoach"},screenMessage:this.screenMessage,settingsDisplayFlags:this.settingsDisplayFlags});case 12:e.next=15;break;case 14:"externalLink"in this.element?window.open(this.element.externalLink,"_blank"):this.isWeb?window.open(this.element.link,"_blank"):this.accountService.openPwebAccountLink(decodeURIComponent(this.element.link));case 15:case"end":return e.stop()}},t,this)}))}},{key:"fetchScreenContent",value:function(){var e=this;return new Promise(function(t){e.moreContentSubscription.add(e.accountInfoService.getScreenMessage().subscribe(function(n){e.screenMessage=n,e.settingsDisplayFlags.suppressAppointment&&(e.screenMessage.TimetapURL=e.settingsDisplayFlags.pwebStatementUrl),t()}))})}},{key:"ngOnDestroy",value:function(){this.moreContentSubscription.unsubscribe()}}]),t}();return t.\u0275fac=function(e){return new(e||t)(l.Y36(m.W),l.Y36(x.O),l.Y36(X.o),l.Y36(K.g),l.Y36(u.F0),l.Y36(ee.B))},t.\u0275cmp=l.Xpm({type:t,selectors:[["journeys-steps-step-help-card"]],inputs:{element:"element"},decls:14,vars:13,consts:[[3,"ngClass"],["tabindex","0",3,"id","keyup.enter","click"],[1,"helpImg-col",3,"ngStyle"],[3,"src","alt"],[1,"header-txt",3,"ngStyle"],[1,"helpHeader-col"],[1,"header"],[1,"helpDesc-col"],[1,"description"]],template:function(e,t){1&e&&(l.TgZ(0,"div",0),l.TgZ(1,"ion-card",1),l.NdJ("keyup.enter",function(){return t.openWebView()})("click",function(){return t.openWebView()}),l.TgZ(2,"ion-row"),l.TgZ(3,"ion-col",2),l._UZ(4,"img",3),l.qZA(),l.TgZ(5,"ion-col",4),l.TgZ(6,"ion-row"),l.TgZ(7,"ion-col",5),l.TgZ(8,"ion-text",6),l._uU(9),l.qZA(),l.qZA(),l.qZA(),l.TgZ(10,"ion-row"),l.TgZ(11,"ion-col",7),l.TgZ(12,"ion-text",8),l._uU(13),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&e&&(l.Q6J("ngClass",t.isWeb?"helpcard-web":"helpcard-mobile"),l.xp6(1),l.Q6J("id","helpCard"+t.element.idSuffix),l.xp6(2),l.Q6J("ngStyle",l.VKq(8,te,t.element.paddingBottom)),l.xp6(1),l.Q6J("src",t.element.imageUrl,l.LSH)("alt",t.element.altText||""),l.xp6(1),l.Q6J("ngStyle",l.WLB(10,ne,t.element.marginTop,t.element.marginBottom)),l.xp6(4),l.Oqu(t.element.header),l.xp6(4),l.Oqu(t.element.description))},directives:[a.mk,c.PM,c.Nd,c.wI,a.PC,c.yW],styles:["[_nghost-%COMP%]{display:block}[_nghost-%COMP%]   ion-card[_ngcontent-%COMP%]{cursor:pointer;box-shadow:var(--card-box-shadow);border-radius:var(--card-border-radius);margin:0;color:var(--primary-colors-voya-black)}[_nghost-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-col.header-txt[_ngcontent-%COMP%]{margin:auto}[_nghost-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-col.header-txt[_ngcontent-%COMP%]   ion-col.helpHeader-col[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{font-weight:bold;font-size:18px}[_nghost-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-col.header-txt[_ngcontent-%COMP%]   ion-col.helpDesc-col[_ngcontent-%COMP%]{margin:auto}[_nghost-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-col.header-txt[_ngcontent-%COMP%]   ion-col.helpDesc-col[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{font-size:16px}[_nghost-%COMP%]   .helpcard-web[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]{padding:15px 20px}[_nghost-%COMP%]   .helpcard-web[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   .helpImg-col[_ngcontent-%COMP%]{display:flex;margin:auto}@media screen and (max-width: 500px){[_nghost-%COMP%]   .helpcard-web[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   .helpImg-col[_ngcontent-%COMP%]{max-width:116px}}@media screen and (min-width: 500px){[_nghost-%COMP%]   .helpcard-web[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   .helpImg-col[_ngcontent-%COMP%]{max-width:138px}}[_nghost-%COMP%]   .helpcard-web[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   .helpImg-col[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:98px;height:98px}[_nghost-%COMP%]   .helpcard-web[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-col.header-txt[_ngcontent-%COMP%]   ion-col.helpHeader-col[_ngcontent-%COMP%]{margin-bottom:12px}[_nghost-%COMP%]   .helpcard-web[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]:hover{box-shadow:0 0 8px #000c;cursor:pointer}[_nghost-%COMP%]   .helpcard-mobile[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]{padding:5px 20px}[_nghost-%COMP%]   .helpcard-mobile[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   .helpImg-col[_ngcontent-%COMP%]{margin:auto}@media screen and (max-width: 500px){[_nghost-%COMP%]   .helpcard-mobile[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   .helpImg-col[_ngcontent-%COMP%]{max-width:98px;max-height:98px}}@media screen and (min-width: 500px){[_nghost-%COMP%]   .helpcard-mobile[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   .helpImg-col[_ngcontent-%COMP%]{max-width:128px}}[_nghost-%COMP%]   .helpcard-mobile[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   .helpImg-col[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:86px;height:85px}"]}),t}();function re(e,t){if(1&e&&l._UZ(0,"journeys-steps-step-intro",15),2&e){var n=l.oxw(2).$implicit;l.Q6J("element",n)}}function oe(e,t){if(1&e&&l._UZ(0,"journeys-steps-step-header-with-logo",15),2&e){var n=l.oxw(2).$implicit;l.Q6J("element",n)}}function se(e,t){if(1&e&&l._UZ(0,"journeys-steps-step-image-with-value",16),2&e){var n=l.oxw(2).$implicit,i=l.oxw(3);l.Q6J("imageUrl",n.imageUrl)("value",i.imageValue)}}function ae(e,t){if(1&e&&l._UZ(0,"journey-step-charts",15),2&e){var n=l.oxw(2).$implicit;l.Q6J("element",n)}}function ce(e,t){if(1&e&&l._UZ(0,"journeys-link",15),2&e){var n=l.oxw(2).$implicit;l.Q6J("element",n)}}var ue=function(e){return{"margin-bottom":e}};function le(e,t){if(1&e){var n=l.EpF();l.TgZ(0,"journeys-steps-step-input",17),l.NdJ("valueChange",function(e){l.CHM(n);var t=l.oxw(2).$implicit;return l.oxw(3).updateStepValue(e,t)})("currentValue",function(e){return l.CHM(n),l.oxw(5).updateImageValue(e)})("isRequired",function(e){l.CHM(n);var t=l.oxw(2).$implicit;return l.oxw(3).setRequired(e,t)})("updateStepValueAndStep",function(){return l.CHM(n),l.oxw(5).updateStepHandler()}),l.qZA()}if(2&e){var i=l.oxw(2).$implicit,r=l.oxw(3);l.Q6J("element",i)("values",r.step.value)("answer",r.step.answer)("ngStyle",l.VKq(5,ue,i.marginBottom))("index",r.index)}}function pe(e,t){if(1&e&&l._UZ(0,"journeys-steps-step-animation",18),2&e){var n=l.oxw(2).$implicit,i=l.oxw(3);l.Q6J("element",n)("index",i.index)}}function he(e,t){if(1&e&&l._UZ(0,"journeys-steps-step-video",15),2&e){var n=l.oxw(2).$implicit;l.Q6J("element",n)}}function de(e,t){1&e&&l._UZ(0,"app-orange-money",19),2&e&&l.Q6J("displayHeader",!1)}var ge=function(e,t,n){return{"margin-top":e,"margin-bottom":t,"max-width":n}};function fe(e,t){if(1&e&&l._UZ(0,"img",20),2&e){var n=l.oxw(2).$implicit;l.Q6J("src",n.imageUrl,l.LSH)("ngStyle",l.kEZ(3,ge,n.marginTop,n.marginBottomWeb?n.marginBottomWeb:n.marginBottom,n.maxWidth))("alt",(null==n?null:n.altText)||"")}}function ve(e,t){if(1&e&&l._UZ(0,"app-table",15),2&e){var n=l.oxw(2).$implicit;l.Q6J("element",n)}}function me(e,t){if(1&e&&l._UZ(0,"journeys-steps-step-mx-widget",15),2&e){var n=l.oxw(2).$implicit;l.Q6J("element",n)}}function ye(e,t){if(1&e&&l._UZ(0,"journeys-steps-step-expand-collapse",15),2&e){var n=l.oxw(2).$implicit;l.Q6J("element",n)}}function we(e,t){if(1&e&&l._UZ(0,"journeys-steps-step-row-with-image",15),2&e){var n=l.oxw(2).$implicit;l.Q6J("element",n)}}function xe(e,t){if(1&e){var n=l.EpF();l.TgZ(0,"journeys-steps-step-contentLink",21),l.NdJ("valueChange",function(e){l.CHM(n);var t=l.oxw(2).$implicit;return l.oxw(3).updateStepValueAndStep(e,t)}),l.qZA()}if(2&e){var i=l.oxw(2).$implicit,r=l.oxw(3);l.Q6J("element",i)("ngStyle",l.VKq(4,ue,(null==i?null:i.marginBottom)||"0px"))("values",r.step.value)("answer",r.step.answer)}}function Ce(e,t){if(1&e&&l._UZ(0,"journeys-steps-step-intro",15),2&e){var n=l.oxw().$implicit;l.Q6J("element",n)}}function Se(e,t){if(1&e&&l._UZ(0,"journeys-steps-step-image-with-value",16),2&e){var n=l.oxw().$implicit,i=l.oxw(7);l.Q6J("imageUrl",n.imageUrl)("value",i.imageValue)}}function be(e,t){if(1&e){var n=l.EpF();l.TgZ(0,"journeys-steps-step-input",28),l.NdJ("valueChange",function(e){l.CHM(n);var t=l.oxw().$implicit;return l.oxw(7).updateStepValue(e,t)})("currentValue",function(e){return l.CHM(n),l.oxw(8).updateImageValue(e)})("updateStepValueAndStep",function(){return l.CHM(n),l.oxw(8).updateStepHandler()}),l.qZA()}if(2&e){var i=l.oxw().$implicit,r=l.oxw(7);l.Q6J("element",i)("values",r.step.value)("answer",r.step.answer)("ngStyle",l.VKq(5,ue,i.marginBottom))("index",r.index)}}function Oe(e,t){if(1&e){var n=l.EpF();l.TgZ(0,"journeys-steps-step-button",29),l.NdJ("continueClick",function(e){return l.CHM(n),l.oxw(8).handleContinueClick(e)})("backClick",function(){return l.CHM(n),l.oxw(8).handleBackClick()}),l.qZA()}if(2&e){var i=l.oxw().$implicit,r=l.oxw().$implicit,o=l.oxw(6);l.Q6J("label",i.label)("link",i.link)("idSuffix",i.idSuffix)("isActiveBackBtn",0!==o.currentStep)("backBtnColor",r.backgroundColor?"var(--primary-colors-voya-white":"var(--primary-colors-voya-dark-blue)")}}function Me(e,t){if(1&e&&l._UZ(0,"journeys-steps-step-video",15),2&e){var n=l.oxw().$implicit;l.Q6J("element",n)}}function _e(e,t){if(1&e&&l._UZ(0,"img",30),2&e){var n=l.oxw().$implicit;l.Q6J("src",n.imageUrl,l.LSH)("alt",(null==n?null:n.altText)||"")}}function Pe(e,t){if(1&e&&l._UZ(0,"journeys-steps-step-mx-widget",15),2&e){var n=l.oxw().$implicit;l.Q6J("element",n)}}function ke(e,t){if(1&e&&l._UZ(0,"app-table",15),2&e){var n=l.oxw().$implicit;l.Q6J("element",n)}}function je(e,t){if(1&e&&l._UZ(0,"journeys-steps-step-expand-collapse",15),2&e){var n=l.oxw().$implicit;l.Q6J("element",n)}}function Je(e,t){if(1&e&&l._UZ(0,"journeys-steps-step-row-with-image",15),2&e){var n=l.oxw().$implicit;l.Q6J("element",n)}}function Ie(e,t){if(1&e){var n=l.EpF();l.TgZ(0,"journeys-steps-step-contentLink",31),l.NdJ("valueChange",function(e){l.CHM(n);var t=l.oxw(5).$implicit;return l.oxw(3).updateStepValueAndStep(e,t)}),l.qZA()}if(2&e){var i=l.oxw().$implicit,r=l.oxw(4).$implicit,o=l.oxw(3);l.Q6J("ngStyle",l.VKq(4,ue,(null==r?null:r.marginBottom)||"0px"))("element",i)("values",o.step.value)("answer",o.step.answer)}}function Ze(e,t){if(1&e&&(l.ynx(0),l.YNc(1,Ce,1,1,"journeys-steps-step-intro",7),l.YNc(2,Se,1,2,"journeys-steps-step-image-with-value",8),l.YNc(3,be,1,7,"journeys-steps-step-input",24),l.YNc(4,Oe,1,5,"journeys-steps-step-button",25),l.YNc(5,Me,1,1,"journeys-steps-step-video",7),l.YNc(6,_e,1,2,"img",26),l.YNc(7,Pe,1,1,"journeys-steps-step-mx-widget",7),l.YNc(8,ke,1,1,"app-table",7),l.YNc(9,je,1,1,"journeys-steps-step-expand-collapse",7),l.YNc(10,Je,1,1,"journeys-steps-step-row-with-image",7),l.YNc(11,Ie,1,6,"journeys-steps-step-contentLink",27),l.BQk()),2&e){var n=t.$implicit;l.xp6(1),l.Q6J("ngIf","intro"===n.id),l.xp6(1),l.Q6J("ngIf","imageWithValue"===n.id),l.xp6(1),l.Q6J("ngIf","input"===n.id),l.xp6(1),l.Q6J("ngIf","button"===n.id),l.xp6(1),l.Q6J("ngIf","video"===n.id),l.xp6(1),l.Q6J("ngIf","image"===n.id),l.xp6(1),l.Q6J("ngIf","mxWidget"===n.id),l.xp6(1),l.Q6J("ngIf","table"===n.id),l.xp6(1),l.Q6J("ngIf","expandCollapse"===n.id),l.xp6(1),l.Q6J("ngIf","rowWithImage"===n.id),l.xp6(1),l.Q6J("ngIf","contentModal"===n.id||"modalButton"===n.id)}}var Qe=function(e,t){return{"background-color":e,"margin-bottom":t}};function Te(e,t){if(1&e&&(l.TgZ(0,"ion-card",23),l.YNc(1,Ze,12,11,"ng-container",6),l.qZA()),2&e){var n=t.$implicit;l.Q6J("ngStyle",l.WLB(2,Qe,n.backgroundColor,n.marginBottom)),l.xp6(1),l.Q6J("ngForOf",n.elements)}}function Ne(e,t){if(1&e&&(l.ynx(0),l.YNc(1,Te,2,5,"ion-card",22),l.BQk()),2&e){var n=l.oxw(2).$implicit;l.xp6(1),l.Q6J("ngForOf",n.pageElements)}}function Ee(e,t){1&e&&l.GkF(0)}function Ae(e,t){if(1&e&&(l.ynx(0),l.YNc(1,Ee,1,0,"ng-container",32),l.BQk()),2&e){l.oxw(4);var n=l.MAs(4);l.xp6(1),l.Q6J("ngTemplateOutlet",n)}}var Ye=function(e){return{"padding-top":e}};function qe(e,t){if(1&e){var n=l.EpF();l.TgZ(0,"journeys-steps-step-button",33),l.NdJ("continueClick",function(e){return l.CHM(n),l.oxw(5).handleContinueClick(e)})("backClick",function(){return l.CHM(n),l.oxw(5).handleBackClick()}),l.qZA()}if(2&e){var i=l.oxw(2).$implicit,r=l.oxw().$implicit,o=l.oxw(2);l.Q6J("label",i.label)("link",i.link)("type",i.type)("idSuffix",i.idSuffix)("noSpacing","true"===(null==i?null:i.noSpacing))("isActiveBackBtn",0!==o.currentStep&&"false"!==(null==i?null:i.noBackLink))("backBtnColor",r.backgroundColor?"var(--primary-colors-voya-white":"var(--primary-colors-voya-dark-blue)")("disabled",i.isContinueButton&&!o.continueButtonEnabled)("ngStyle",l.VKq(10,Ye,i.paddingTop))("ngClass","true"===(null==i?null:i.noSpacing)?"no-spacing":"spacing")}}function Le(e,t){if(1&e&&l._UZ(0,"journeys-line",15),2&e){var n=l.oxw(2).$implicit;l.Q6J("element",n)}}function Be(e,t){if(1&e&&(l.ynx(0),l.YNc(1,re,1,1,"journeys-steps-step-intro",7),l.YNc(2,oe,1,1,"journeys-steps-step-header-with-logo",7),l.YNc(3,se,1,2,"journeys-steps-step-image-with-value",8),l.YNc(4,ae,1,1,"journey-step-charts",7),l.YNc(5,ce,1,1,"journeys-link",7),l.YNc(6,le,1,7,"journeys-steps-step-input",9),l.YNc(7,pe,1,2,"journeys-steps-step-animation",10),l.YNc(8,he,1,1,"journeys-steps-step-video",7),l.YNc(9,de,1,1,"app-orange-money",11),l.YNc(10,fe,1,7,"img",12),l.YNc(11,ve,1,1,"app-table",7),l.YNc(12,me,1,1,"journeys-steps-step-mx-widget",7),l.YNc(13,ye,1,1,"journeys-steps-step-expand-collapse",7),l.YNc(14,we,1,1,"journeys-steps-step-row-with-image",7),l.YNc(15,xe,1,6,"journeys-steps-step-contentLink",13),l.YNc(16,Ne,2,1,"ng-container",3),l.YNc(17,Ae,2,1,"ng-container",3),l.YNc(18,qe,1,12,"journeys-steps-step-button",14),l.YNc(19,Le,1,1,"journeys-line",7),l.BQk()),2&e){var n=l.oxw(),i=n.$implicit,r=n.index,o=l.oxw().$implicit,s=l.oxw().ngIf,a=l.oxw();l.xp6(1),l.Q6J("ngIf","intro"===i.id),l.xp6(1),l.Q6J("ngIf","headerWithLogo"===i.id),l.xp6(1),l.Q6J("ngIf","imageWithValue"===i.id),l.xp6(1),l.Q6J("ngIf","chart"===i.id),l.xp6(1),l.Q6J("ngIf","link"===i.id),l.xp6(1),l.Q6J("ngIf","input"===i.id),l.xp6(1),l.Q6J("ngIf","animation"===i.id),l.xp6(1),l.Q6J("ngIf","video"===i.id),l.xp6(1),l.Q6J("ngIf","orangeMoney"===i.id),l.xp6(1),l.Q6J("ngIf","image"===i.id),l.xp6(1),l.Q6J("ngIf","table"===i.id),l.xp6(1),l.Q6J("ngIf","mxWidget"===i.id),l.xp6(1),l.Q6J("ngIf","expandCollapse"===i.id),l.xp6(1),l.Q6J("ngIf","rowWithImage"===i.id),l.xp6(1),l.Q6J("ngIf","contentModal"===i.id||"modalButton"===i.id),l.xp6(1),l.Q6J("ngIf",i.pageElements),l.xp6(1),l.Q6J("ngIf",s.helpCards&&a.isWeb&&o.elements.length===r+1),l.xp6(1),l.Q6J("ngIf","button"===i.id),l.xp6(1),l.Q6J("ngIf","line"===i.id)}}function Ue(e,t){if(1&e&&(l.ynx(0),l.YNc(1,Be,20,19,"ng-container",3),l.BQk()),2&e){var n=t.$implicit,i=l.oxw(3);l.xp6(1),l.Q6J("ngIf",!n.flag||i.journeyServiceMap[i.journeyId]&&i.journeyServiceMap[i.journeyId][n.flag])}}var Ve=function(e){return{"background-color":e}},$e=function(e){return{hideStep:e}};function We(e,t){if(1&e&&(l.TgZ(0,"ion-card",5),l.YNc(1,Ue,2,1,"ng-container",6),l.qZA()),2&e){var n=t.$implicit,i=l.oxw(2);l.Q6J("ngStyle",l.VKq(3,Ve,n.backgroundColor))("ngClass",l.VKq(5,$e,i.currentStep!==i.index)),l.xp6(1),l.Q6J("ngForOf",n.elements)}}function Fe(e,t){1&e&&l.GkF(0)}function He(e,t){if(1&e&&(l.ynx(0),l.YNc(1,Fe,1,0,"ng-container",32),l.BQk()),2&e){l.oxw();var n=l.MAs(4);l.xp6(1),l.Q6J("ngTemplateOutlet",n)}}function De(e,t){if(1&e&&l._UZ(0,"journeys-steps-step-help-card",15),2&e){var n=l.oxw().$implicit;l.Q6J("element",n)}}function Ge(e,t){if(1&e&&(l.ynx(0),l.YNc(1,De,1,1,"journeys-steps-step-help-card",7),l.ALo(2,"async"),l.BQk()),2&e){var n=t.$implicit,i=l.oxw(3);l.xp6(1),l.Q6J("ngIf",!n.flag||l.lcZ(2,1,i.journeys$).flags[n.flag])}}function ze(e,t){if(1&e&&l.YNc(0,Ge,3,3,"ng-container",6),2&e){var n=l.oxw().ngIf;l.Q6J("ngForOf",n.helpCards)}}function Re(e,t){if(1&e&&(l.TgZ(0,"div",1),l.YNc(1,We,2,7,"ion-card",2),l.YNc(2,He,2,1,"ng-container",3),l.YNc(3,ze,1,1,"ng-template",null,4,l.W1O),l.qZA()),2&e){var n=t.ngIf,i=l.oxw();l.Q6J("ngClass",i.isWeb?"web-step":"mobile-step"),l.xp6(1),l.Q6J("ngForOf",n.pageElements),l.xp6(1),l.Q6J("ngIf",n.helpCards&&!i.isWeb)}}var Xe=function(){var e=function(){function e(t,n){i(this,e),this.utilitySerivce=t,this.journeyService=n,this.continueClick=new l.vpe,this.backClick=new l.vpe,this.swipeEnabled=new l.vpe,this.continueButtonEnabled=!0,this.requiredAnswerIds=[],this.updateStep=new l.vpe,this.journeyServiceMap=this.journeyService.journeyServiceMap}return n(e,[{key:"ngOnInit",value:function(){this.isWeb=this.utilitySerivce.getIsWeb(),this.journeys$=this.journeyService.fetchJourneys(),this.step.answer&&!this.step.value&&(this.step.value=this.journeyService.safeParse(this.step.answer))}},{key:"handleContinueClick",value:function(e){this.continueClick.emit(e)}},{key:"handleBackClick",value:function(){this.backClick.emit()}},{key:"updateStepValueAndStep",value:function(e,t){this.updateStepValue(e,t),this.updateStepHandler()}},{key:"updateStepHandler",value:function(){this.updateStep.emit(this.step.value)}},{key:"updateStepValue",value:function(e,t){this.step.value||(this.step.value={}),t.accumulateAnswers?this.step.value[t.answerId]?this.step.value[t.answerId].push(e):this.step.value[t.answerId]=[e]:this.step.value[t.answerId]=e,this.checkForContinue()}},{key:"checkForContinue",value:function(){var e=this,t=!0;this.requiredAnswerIds.forEach(function(n){e.journeyService.isValueEmpty(e.step.value[n])&&(t=!1)}),this.continueButtonEnabled=t,this.swipeEnabled.emit({swipeEnabled:t,index:this.index})}},{key:"setRequired",value:function(e,t){e&&(this.requiredAnswerIds.push(t.answerId),this.checkForContinue())}},{key:"updateImageValue",value:function(e){this.imageValue=e}}]),e}();return e.\u0275fac=function(t){return new(t||e)(l.Y36(x.O),l.Y36(m.W))},e.\u0275cmp=l.Xpm({type:e,selectors:[["journeys-steps-step"]],inputs:{step:"step",index:"index",currentStep:"currentStep",journeyId:"journeyId"},outputs:{continueClick:"continueClick",backClick:"backClick",swipeEnabled:"swipeEnabled",updateStep:"updateStep"},decls:1,vars:1,consts:[[3,"ngClass",4,"ngIf"],[3,"ngClass"],["class","journeys-steps-step",3,"ngStyle","ngClass",4,"ngFor","ngForOf"],[4,"ngIf"],["helpCardsTemp",""],[1,"journeys-steps-step",3,"ngStyle","ngClass"],[4,"ngFor","ngForOf"],[3,"element",4,"ngIf"],[3,"imageUrl","value",4,"ngIf"],[3,"element","values","answer","ngStyle","index","valueChange","currentValue","isRequired","updateStepValueAndStep",4,"ngIf"],[3,"element","index",4,"ngIf"],[3,"displayHeader",4,"ngIf"],[3,"src","ngStyle","alt",4,"ngIf"],[3,"element","ngStyle","values","answer","valueChange",4,"ngIf"],[3,"label","link","type","idSuffix","noSpacing","isActiveBackBtn","backBtnColor","disabled","ngStyle","ngClass","continueClick","backClick",4,"ngIf"],[3,"element"],[3,"imageUrl","value"],[3,"element","values","answer","ngStyle","index","valueChange","currentValue","isRequired","updateStepValueAndStep"],[3,"element","index"],[3,"displayHeader"],[3,"src","ngStyle","alt"],[3,"element","ngStyle","values","answer","valueChange"],["class","internal",3,"ngStyle",4,"ngFor","ngForOf"],[1,"internal",3,"ngStyle"],[3,"element","values","answer","ngStyle","index","valueChange","currentValue","updateStepValueAndStep",4,"ngIf"],[3,"label","link","idSuffix","isActiveBackBtn","backBtnColor","continueClick","backClick",4,"ngIf"],[3,"src","alt",4,"ngIf"],[3,"ngStyle","element","values","answer","valueChange",4,"ngIf"],[3,"element","values","answer","ngStyle","index","valueChange","currentValue","updateStepValueAndStep"],[3,"label","link","idSuffix","isActiveBackBtn","backBtnColor","continueClick","backClick"],[3,"src","alt"],[3,"ngStyle","element","values","answer","valueChange"],[4,"ngTemplateOutlet"],[3,"label","link","type","idSuffix","noSpacing","isActiveBackBtn","backBtnColor","disabled","ngStyle","ngClass","continueClick","backClick"]],template:function(e,t){1&e&&l.YNc(0,Re,5,3,"div",0),2&e&&l.Q6J("ngIf",t.step.content)},directives:[a.O5,a.mk,a.sg,c.PM,a.PC,b.k,O,M.o,J,I.N,Z.a,E,A,Y.W,q.a,L.V,V,H,D._,G.r,a.tP,z.y,ie],pipes:[a.Ov],styles:["[_nghost-%COMP%]   div[_ngcontent-%COMP%]{min-height:100%;flex-direction:column}[_nghost-%COMP%]   div[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]{flex-grow:1;box-shadow:var(--card-box-shadow);border-radius:var(--card-border-radius);margin:0;padding:15px 20px 20px;text-align:left;display:flex;flex-direction:column}[_nghost-%COMP%]   div[_ngcontent-%COMP%]   ion-card.internal[_ngcontent-%COMP%]{box-shadow:none;display:block;flex-grow:0}[_nghost-%COMP%]   div[_ngcontent-%COMP%]   ion-card.hideStep[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:not(journeys-steps-step-animation){display:none}[_nghost-%COMP%]   div[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   journeys-steps-step-input[_ngcontent-%COMP%]:last-of-type{margin-bottom:20px}[_nghost-%COMP%]   div[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   journeys-steps-step-row-with-image[_ngcontent-%COMP%]{margin-bottom:25px}[_nghost-%COMP%]   div[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   journeys-steps-step-row-with-image[_ngcontent-%COMP%]:last-of-type{margin-bottom:0}[_nghost-%COMP%]   div[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   journeys-steps-step-mx-widget[_ngcontent-%COMP%]{margin-bottom:10px}[_nghost-%COMP%]   div[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   journeys-steps-step-button[_ngcontent-%COMP%]{width:100%;margin-top:auto}[_nghost-%COMP%]   div[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   journeys-steps-step-button.spacing[_ngcontent-%COMP%]{padding-top:20px}[_nghost-%COMP%]   div[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   journeys-steps-step-button.no-spacing[_ngcontent-%COMP%]{margin-top:0;margin-bottom:0;padding-top:0;padding-bottom:0}[_nghost-%COMP%]   div[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   journeys-steps-step-header-with-logo[_ngcontent-%COMP%]{margin-bottom:20px}[_nghost-%COMP%]   div[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]:not(:last-of-type){margin-bottom:20px}[_nghost-%COMP%]   div[_ngcontent-%COMP%]   journeys-steps-step-help-card[_ngcontent-%COMP%]{margin-top:20px}[_nghost-%COMP%]   div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto;margin-bottom:20px;width:362px}[_nghost-%COMP%]   div.web-step[_ngcontent-%COMP%]{background:var(--ion-color-white)}@media screen and (min-width: 920px){[_nghost-%COMP%]   div.web-step[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]{margin:0 36px 100px;box-shadow:none}}@media screen and (max-width: 920px){[_nghost-%COMP%]   div.web-step[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]{box-shadow:none}}[_nghost-%COMP%]   div.mobile-step[_ngcontent-%COMP%]{margin-bottom:25px;display:flex}"]}),e}(),Ke=["journeyStep"];function et(e,t){if(1&e){var n=l.EpF();l.TgZ(0,"div",4),l.TgZ(1,"journeys-steps-step",5,6),l.NdJ("continueClick",function(e){return l.CHM(n),l.oxw(2).handleContinueClick(e)})("backClick",function(){return l.CHM(n),l.oxw(2).handleBackClick()})("swipeEnabled",function(e){return l.CHM(n),l.oxw(2).updateSwipeEnabled(e)})("updateStep",function(e){l.CHM(n);var t=l.oxw().index;return l.oxw().updateStep(e,t)}),l.qZA(),l.qZA()}if(2&e){var i=l.oxw(),r=i.index,o=i.$implicit,s=l.oxw();l.xp6(1),l.Q6J("index",r)("step",o)("currentStep",s.currentStep)("journeyId",s.journey.journeyID)}}function tt(e,t){1&e&&l.YNc(0,et,3,4,"ng-template",3)}function nt(e,t){1&e&&l._UZ(0,"div")}var it=[{path:"",component:function(){var e=function(){function e(t,n,r,o,s,a,c){i(this,e),this.footerService=t,this.journeyService=n,this.ngZone=r,this.router=o,this.eventManager=s,this.eventTracking=a,this.utilityService=c,this.currentStep=0,this.slideOpts={},this.keyboard=d.N1,this.subscription=new g.w,this.updateStatuses=!0,this.saveLastStep=!0}return n(e,[{key:"ngOnInit",value:function(){var e=this;this.isWeb=this.utilityService.getIsWeb(),this.slideOpts=this.isWeb?{slidesPerView:1,centeredSlides:!0,spaceBetween:50,noSwipingSelector:"ion-range",longSwipes:!0,longSwipesMs:100,longSwipesRatio:.1,shortSwipes:!1}:{slidesPerView:1.1,centeredSlides:!0,spaceBetween:10,noSwipingSelector:"ion-range"},this.subscription.add(this.eventManager.createSubscriber(f.S.leaveJourney).subscribe(function(){e.leaveJourney()})),this.refreshJourneyStatusPublisher=this.eventManager.createPublisher(f.S.refreshJourneyStatus),this.scrollToTopPublisher=this.eventManager.createPublisher(f.S.journeyStepsScrollToTop),this.subscription.add(this.journeyService.fetchJourneys().subscribe(function(){var t=e.journeyService.getCurrentJourney();e.journey&&e.journey!==t&&(e.journey=e.journeyService.getCurrentJourney(),e.steps=e.journey.steps)}))}},{key:"ionViewWillEnter",value:function(){this.footerService.publish({type:p.v.none}),this.journeyService.publishSelectedTab("steps"),this.journey=this.journeyService.getCurrentJourney(),this.steps=this.journey.steps,this.swipeEnabledList=Array(this.steps.length).fill(!0),this.progressBarSteps=JSON.parse(JSON.stringify(Array(this.steps.length).fill({status:h.q.notStarted}))),this.steps&&this.steps.length>0&&(this.updateStepStatuses(0,void 0,!1),this.isWeb&&this.refreshJourneyStatusPublisher.publish(void 0)),this.journeyService.publishCurrentStep(this.currentStep),this.saveLastStep=!0}},{key:"ionViewDidEnter",value:function(){var e=this;setTimeout(function(){e.slides.slideTo(e.journey.lastModifiedStepIndex,0);for(var t=0;t<e.journey.lastModifiedStepIndex;t++)e.progressBarSteps[t]={status:h.q.completed}},100)}},{key:"setSwiperInstance",value:function(e){this.slides=e,this.swipeEnabledList&&(this.slides.allowTouchMove=this.swipeEnabledList[this.currentStep])}},{key:"handleSlideChange",value:function(){var e=this;this.ngZone.run(function(){e.keyboard.hide();var t=e.slides?e.slides.activeIndex:e.slideOpts.initialSlide;if(t===e.steps.length)return e.updateStepStatuses(e.currentStep),void e.finishJourney();e.updateStepStatuses(t),e.currentStep=t,e.slides&&(e.slides.allowTouchMove=e.swipeEnabledList[e.currentStep]),e.journeyService.publishCurrentStep(e.currentStep),e.isWeb&&e.scrollToTopPublisher.publish(void 0)})}},{key:"updateStepStatuses",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.currentStep,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(this.updateStatuses){var i=[];if(n){var r=this.getUpdatedCompleteStep(t);r&&i.push(this.journeyService.removeContent(r))}this.steps[e].status||(0===e&&this.eventTracking.eventTracking({eventName:"Journey Not Completed",journeyID:this.journey.journeyID,journeyName:this.journey.journeyName}),this.steps[e].status=h.q.inProgress,i.push(this.journeyService.removeContent(this.steps[e]))),this.saveProgress(i),this.journeyService.updateJourneySteps(this.steps,this.journey.journeyID),e>0&&(this.progressBarSteps[e-1].status=h.q.completed),this.progressBarSteps[e].status=h.q.notStarted}this.updateStatuses=!0}},{key:"getUpdatedCompleteStep",value:function(e){var t;return(this.steps[e].status!==h.q.completed||this.steps[e].answer!==JSON.stringify(this.steps[e].value))&&(this.steps[e].status!==h.q.completed&&e===this.steps.length-1&&this.eventTracking.eventTracking({eventName:"Journey Not Completed",journeyID:this.journey.journeyID,updateInd:"Y",journeyName:this.journey.journeyName}),this.steps[e].status=h.q.completed,this.steps[e].value&&this.steps[e].value!=={}&&(this.steps[e].answer=JSON.stringify(this.steps[e].value)),t=this.steps[e]),t}},{key:"saveProgress",value:function(e){e.length>0&&this.journeyService.saveProgress(e)}},{key:"handleContinueClick",value:function(e){this.currentStep<this.steps.length-1?this.slides.slideNext():(this.updateStepStatuses(this.currentStep),e.route?this.finishJourney():this.leaveJourney())}},{key:"handleBackClick",value:function(){0!==this.currentStep&&this.slides.slideTo(this.currentStep-1)}},{key:"finishJourney",value:function(){this.stepToSave=0,this.leaveJourney(),this.journeyService.isSummaryStepCompleted()?this.isWeb?(this.refreshJourneyStatusPublisher.publish(void 0),this.router.navigate(["/journeys/journey/"+this.journey.journeyID+"/overview"],{queryParams:{journeyType:"all"}})):this.router.navigateByUrl("/journeys/journey/"+this.journey.journeyID+"/overview"):this.router.navigateByUrl("/journeys")}},{key:"scrollToTop",value:function(){this.isWeb||this.stepEls.get(this.currentStep).nativeElement.scrollIntoView({behavior:"auto",block:"center",inline:"end"})}},{key:"updateSwipeEnabled",value:function(e){this.swipeEnabledList[e.index]=e.swipeEnabled,this.slides&&(this.slides.allowTouchMove=this.swipeEnabledList[this.currentStep])}},{key:"leaveJourney",value:function(){if(this.journey&&(this.journeyService.updateJourneySteps(this.steps,this.journey.journeyID),this.updateStatuses=!1,this.saveLastStep)){this.saveLastStep=!1;var e=this.stepToSave||0===this.stepToSave?this.stepToSave:this.currentStep;this.saveProgress([this.journeyService.removeContent(this.steps[e])]),this.journey.lastModifiedStepIndex=e,this.journeyService.setCurrentJourney(this.journey,!0),this.stepToSave=void 0}}},{key:"updateStep",value:function(e,t){this.steps[t].value=e,this.journeyService.updateJourneySteps(this.steps,this.journey.journeyID,!1)}},{key:"ionViewWillLeave",value:function(){this.leaveJourney()}},{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe(),this.isWeb&&this.leaveJourney()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(l.Y36(v.c),l.Y36(m.W),l.Y36(l.R0b),l.Y36(u.F0),l.Y36(y.O),l.Y36(w.f),l.Y36(x.O))},e.\u0275cmp=l.Xpm({type:e,selectors:[["journeys-steps"]],viewQuery:function(e,t){var n;(1&e&&l.Gf(Ke,5,l.SBq),2&e)&&(l.iGM(n=l.CRH())&&(t.stepEls=n))},decls:4,vars:4,consts:[[3,"steps","currentStep"],[3,"config","swiper","slideChange","slideChangeTransitionEnd"],[4,"ngFor","ngForOf"],["swiperSlide",""],[1,"steps-content"],[3,"index","step","currentStep","journeyId","continueClick","backClick","swipeEnabled","updateStep"],["journeyStep",""]],template:function(e,t){1&e&&(l._UZ(0,"app-step-progress-bar",0),l.TgZ(1,"swiper",1),l.NdJ("swiper",function(e){return t.setSwiperInstance(e)})("slideChange",function(){return t.handleSlideChange()})("slideChangeTransitionEnd",function(){return t.scrollToTop()}),l.YNc(2,tt,1,0,void 0,2),l.YNc(3,nt,1,0,"ng-template",3),l.qZA()),2&e&&(l.Q6J("steps",t.progressBarSteps)("currentStep",t.currentStep),l.xp6(1),l.Q6J("config",t.slideOpts),l.xp6(1),l.Q6J("ngForOf",t.steps))},directives:[C.b,S.nF,a.sg,S.YC,Xe],styles:["[_nghost-%COMP%]{height:100%;display:block}[_nghost-%COMP%]   .steps-content[_ngcontent-%COMP%]{height:100%;width:100%}[_nghost-%COMP%]   app-step-progress-bar[_ngcontent-%COMP%]{margin:20px auto}[_nghost-%COMP%]   swiper[_ngcontent-%COMP%]{height:calc(100% - 48px);overflow-y:scroll}[_nghost-%COMP%]   swiper[_ngcontent-%COMP%]   journeys-steps-step[_ngcontent-%COMP%]{display:block;height:100%;width:100%}[_nghost-%COMP%]   .web-steps[_ngcontent-%COMP%]{margin:0 36px}"]}),e}()}],rt=function(){var e=n(function e(){i(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=l.oAB({type:e}),e.\u0275inj=l.cJS({imports:[[u.Bz.forChild(it)],u.Bz]}),e}(),ot=o(76192),st=o(37707),at=o(62698),ct=function(){var e=n(function e(){i(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=l.oAB({type:e}),e.\u0275inj=l.cJS({imports:[[c.Pc,a.ez,rt,S.kz,ot.q,st.g,at.k]]}),e}()}}])}();