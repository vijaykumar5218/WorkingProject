"use strict";(self.webpackChunkmyvoyage=self.webpackChunkmyvoyage||[]).push([[1040],{30885:function(e,t,s){s.d(t,{l:function(){return i}});const i="272c2587-6b79-d874-e053-d22aac0a0939"},69587:function(e,t,s){s.d(t,{v:function(){return c}});var i=s(64762);const n={myvoyageAccess:"myvoyage/ws/ers/service/myvoyageenabled",myWorkplaceDashboardEnabled:"myvoyage/ws/ers/dashboard/enabled"};var a=s(57700),o=s(7935),r=s(37364);let c=(()=>{class e{constructor(e,t){this.baseService=e,this.utilityService=t,this.endpoints=n,this.endpoints=this.utilityService.appendBaseUrlToEndpoints(n)}checkMyvoyageAccess(e=!1){return(0,i.mG)(this,void 0,void 0,function*(){return(!this.accessResult||e)&&(this.accessResult=yield this.baseService.get(this.endpoints.myvoyageAccess)),this.accessResult})}checkWorkplaceAccess(e=!1){return(0,i.mG)(this,void 0,void 0,function*(){try{(!this.workplaceAccessResult||e)&&(this.workplaceAccessResult=yield this.baseService.get(this.endpoints.myWorkplaceDashboardEnabled))}catch(t){console.log(t),this.workplaceAccessResult={myWorkplaceDashboardEnabled:!1}}return this.workplaceAccessResult})}}return e.\u0275fac=function(t){return new(t||e)(a.LFG(o.bQ),a.LFG(r.O))},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},61040:function(e,t,s){s.d(t,{B:function(){return f}});var i=s(64762),n=s(51222),a=s(75319),o=s(79765),r=s(26215),c=s(80226),l=s(94402),u=s(16738),d=s(88002),h=s(57700),p=s(37364),v=s(7935),m=s(69587),y=s(47823),g=s(21728),S=s(38795);let f=(()=>{class e{constructor(e,t,s,i,l,d){this.utilityService=e,this.baseService=t,this.accessService=s,this.loadingController=i,this.authService=l,this.inAppBrowserService=d,this.endPoints=n.z,this.currSessionExp=0,this.participantData=null,this.participantSubject=null,this.subscription=new a.w,this.externalLinksData=null,this.externalLinksSubject=null,this.selectedTab$=new o.xQ,this.allAccountData=null,this.allAccountSubject=null,this.sort=new r.X(""),this.filt=new r.X([]),this.storedFilterKey=[],this.storedSortKey="",this.today=new Date,this.priorDate=u((new Date).setDate(this.today.getDate()-90)).format("YYYY/MM/DD"),this.currentDate=u(Date.now()).format("YYYY/MM/DD"),this.endPoints=this.utilityService.appendBaseUrlToEndpoints(n.z),this.environment=this.utilityService.getEnvironment(),this.participantSubject=new c.t(1),this.externalLinksSubject=new c.t(1),this.allAccountSubject=new c.t(1),this.account=JSON.parse(localStorage.getItem("currentAccount")),this.isWeb=this.utilityService.getIsWeb()}getJSON(){return(0,i.mG)(this,void 0,void 0,function*(){const e=yield this.baseService.get(this.endPoints.allAccounts+(new Date).getTime());return e.hsaAccounts=yield this.getHSAAccounts(),e})}initSession(e,t){return(0,i.mG)(this,void 0,void 0,function*(){if(!this.sessionId||(new Date).getTime()>this.currSessionExp){const s={sessionInfo:{domain:e,newSession:!1,page:"MYVOYA",clientId:t,timeoutMinutes:15,application:"MYVOYA"},allowDuplicate:!1},i=yield this.baseService.post(this.endPoints.InitSession,s);i&&(this.currSessionExp=(new Date).getTime()+84e4,this.sessionId=i.sessionId)}return this.sessionId})}getExternalLinks(e=!1){return(!this.externalLinksData||e)&&this.accessService.checkMyvoyageAccess().then(e=>(0,i.mG)(this,void 0,void 0,function*(){const t=e.clientDomain,s=e.clientId,i=yield this.initSession(t,s),n=this.endPoints.externalLinks.replace("{planID}",this.account.planId).replace("{client}",s).replace("{sessionID}",i).replace("{domain}",t);this.externalLinksData=(0,l.D)(this.baseService.get(n));const a=this.externalLinksData.subscribe(e=>{this.externalLinksSubject.next(e)});this.subscription.add(a)})),this.externalLinksSubject}getVestedBalance(){return(0,i.mG)(this,void 0,void 0,function*(){return this.baseService.get(this.endPoints.vestedBalance+this.account.clientId+"/"+this.account.planId)})}getGainLoss(){return(0,i.mG)(this,void 0,void 0,function*(){return this.baseService.get(this.endPoints.gainLoss+this.account.clientId+"/"+this.account.planId)})}getLoan(){return(0,i.mG)(this,void 0,void 0,function*(){return this.baseService.get(this.endPoints.loan+this.account.clientId+"/"+this.account.planId)})}getRateOfReturn(){return(0,i.mG)(this,void 0,void 0,function*(){return this.baseService.get(this.endPoints.rateOfReturn+this.account.clientId+"/"+this.account.planId)})}getPlanAdviceStatuses(){return(0,i.mG)(this,void 0,void 0,function*(){return this.baseService.get(this.endPoints.planAdviceStatus)})}getDividends(){return this.baseService.get(this.endPoints.dividend+this.account.clientId+"/"+this.account.planId)}getContribution(){return(0,i.mG)(this,void 0,void 0,function*(){return this.baseService.get(this.endPoints.contribution+this.account.clientId+"/"+this.account.planId)})}getYTDContribution(){return(0,i.mG)(this,void 0,void 0,function*(){return this.baseService.get(this.endPoints.ytdcontribution+this.account.clientId+"/"+this.account.planId)})}getEmployersMatch(){return(0,i.mG)(this,void 0,void 0,function*(){return this.baseService.get(this.endPoints.employersmatch+this.account.clientId+"/"+this.account.planId)})}getTransaction(){return(0,i.mG)(this,void 0,void 0,function*(){return this.account.isHSAAccount?this.getHSATransactions():this.baseService.get(this.endPoints.transaction+this.account.clientId+"/"+this.account.planId+"?tranType=ALL&startDate="+this.priorDate+"&endDate="+this.currentDate)})}getAccount(){return this.account||(this.account=JSON.parse(localStorage.getItem("currentAccount"))),this.account}setAccount(e){localStorage.setItem("currentAccount",JSON.stringify(e)),this.account=e}getParticipant(e=!1){if(!this.participantData||e){this.participantData=(0,l.D)(this.baseService.get(this.endPoints.participantData));const e=this.participantData.subscribe(e=>{this.participantSubject.next(e)});this.subscription.add(e)}return this.participantSubject}setParticipant(e){this.participantSubject.next(e)}getOffercode(){return(0,i.mG)(this,void 0,void 0,function*(){return this.offercodes||(this.offercodes=yield this.baseService.get(this.endPoints.getOfferCode)),this.offercodes})}getPredict(){return(0,i.mG)(this,void 0,void 0,function*(){if(!this.rootObjectOfferCodes){const e=yield this.baseService.get(this.endPoints.predictiveMessage);this.rootObjectOfferCodes=JSON.parse(e.OfferCodeAdviceJSON)}return this.rootObjectOfferCodes})}getCarouselData(){return(0,i.mG)(this,void 0,void 0,function*(){if(!this.rootCarouselOfferCodes){const e=yield this.baseService.get(this.endPoints.predictiveMessage);this.rootCarouselOfferCodes=JSON.parse(e.OfferCodeJSON)}return this.rootCarouselOfferCodes})}posNegSymbol(e){return e&&+e?e<0?"":"+":""}getSelectedTab$(){return this.selectedTab$}publishSelectedTab(e){this.selectedTab$.next(e)}getAllAccounts(e=!1){if(!this.allAccountData||e){this.allAccountData=(0,l.D)(this.getJSON());const e=this.allAccountData.subscribe(e=>{this.allAccountSubject.next(e)});this.subscription.add(e)}return this.allAccountSubject}getRetirementAccountData(e,t=!1){return this.getAllAccounts(t).pipe((0,d.U)(t=>t.retirementAccounts.accounts.filter(t=>t.planId===e)[0]))}encodePwebAccountLink(e,t){const s=e.replace("[exchanged_access_token]",t).split("&Target=");return s[0]+"&Target="+encodeURIComponent(s[1])}openPwebAccountLink(e){return(0,i.mG)(this,void 0,void 0,function*(){if(this.utilityService.getIsWeb()){const t=e.replace("&access_token=[exchanged_access_token]","").split("&Target=");window.open(t[0]+"&Target="+encodeURIComponent(t[1]),"_blank")}else{const t=yield this.loadingController.create({translucent:!0});yield t.present();const s=yield this.authService.getAccessToken(),i={client_id:this.environment.authTokenExchangeClient,subject_token:s,subject_token_type:"access_token",audience:this.environment.loginBaseUrl+"saml/sps/saml-idp-login/saml20",grant_type:"urn:ietf:params:oauth:grant-type:token-exchange",requested_token_type:"access_token",scope:"urn:voya:federation"},n=yield this.baseService.postUrlEncoded(this.environment.tokenBaseUrl+"oidcop/sps/oauth/oauth20/token",i,{});t.dismiss();const a=this.encodePwebAccountLink(e,n.access_token);this.inAppBrowserService.openSystemBrowser(a)}})}openInAppBrowser(e){this.inAppBrowserService.openSystemBrowser(e)}transformHSAAccount(e){return{accountTitle:e.Plan_Name,accountBalance:e.TotalBalance.toString(),accountBalanceAsOf:e.AsOfDate,sourceSystem:"",suppressTab:!1,voyaSavings:"",includedInOrangeMoney:!1,accountAllowedForMyVoya:!1,clientId:"",planId:e.Plan_ID.toString(),planType:e.Plan_Type,accountNumber:"",needOMAutomaticUpdate:!1,planName:e.Plan_Name,mpStatus:"",clientAllowed4myVoyaOrSSO:!1,useMyvoyaHomepage:!1,advisorNonMoneyTxnAllowed:!1,advisorMoneyTxnAllowed:!1,nqPenCalPlan:!1,enrollmentAllowed:!1,autoEnrollmentAllowed:!1,vruPhoneNumber:"",rmdRecurringPaymentInd:"",navigateToRSPortfolio:!1,planLink:"",openDetailInNewWindow:!1,nqPlan:!1,new:!1,eligibleForOrangeMoney:!1,iraplan:!1,xsellRestricted:!1,isVoyaAccessPlan:!1,isRestrictedRetirementPlan:!1,isVDAApplication:!1,isVendorPlan:!1,isHSAAccount:!0,hsaAccountData:e}}getHSAAccounts(){var e;return(0,i.mG)(this,void 0,void 0,function*(){const t=yield this.baseService.get(this.endPoints.allHSAAccounts);if(!t)return{dataStatus:"failed",errorCode:"",accounts:[]};const s=[];return null===(e=null==t?void 0:t.AllAccountsBalance)||void 0===e||e.forEach(e=>{s.push(this.transformHSAAccount(e))}),{dataStatus:t.Status,errorCode:"",accounts:s}})}transformHSATransaction(e){return{tradeDate:e.Transaction_Date,type:"",tranCode:e.Transaction_Code,cash:e.Transaction_Amt,clientId:"",planId:e.Plan_ID.toString(),participantId:"",unit_or_unshrs:"",br140_new_val_cash:"",br161_shr_price:"",br009_run_date:"",br011_seq_num:"",br980_ACT_NAME:e.Transaction_Description,br172_vouch_num:"",isHSATransaction:!0,hsaTransactionData:e}}getHSATransactions(){var e,t;return(0,i.mG)(this,void 0,void 0,function*(){const s=null===(e=this.account.hsaAccountData)||void 0===e?void 0:e.HAS_PARTY_ID,i=null===(t=this.account.hsaAccountData)||void 0===t?void 0:t.Plan_ID,n=this.endPoints.hsaTransactions+s+"/"+i,a=yield this.baseService.get(n),o=[];return a.AllAccountsTransactions.forEach(e=>{o.push(this.transformHSATransaction(e))}),{transactionHistories:o}})}getDisplayNameOrFirst(e){return e.displayName&&e.displayName.length>0&&e.displayName.toLocaleLowerCase()!=e.lastName.toLocaleLowerCase()+", "+e.firstName.toLocaleLowerCase()?e.displayName:e.firstName}getDisplayNameOrFirstOrLast(e){const t=e.displayName?e.displayName:"",s=e.firstName?e.firstName:"",i=e.lastName?e.lastName:"";return t.length>0&&(t.includes(",")&&t.toLocaleLowerCase()!=s.toLocaleLowerCase()+", "+i.toLocaleLowerCase()||!t.includes(",")&&t.toLocaleLowerCase()!=s.toLocaleLowerCase()+" "+i.toLocaleLowerCase())?t:s.length>0?s:i}getDisplayNameOrFirstLast(e){const t=e.displayName?e.displayName:"",s=e.firstName?e.firstName:"",i=e.lastName?e.lastName:"";return t.length>0&&t.toLocaleLowerCase()!=s.toLocaleLowerCase()+", "+i.toLocaleLowerCase()?t:s+" "+i}changeSort(e){this.sort.next(e)}currentSort(){return this.sort.asObservable()}getSectionValues(){return(0,i.mG)(this,void 0,void 0,function*(){if(!this.filterSortValues){const e=yield this.baseService.get(this.endPoints.accountsContent);this.filterSortValues=JSON.parse(e.HSA_Transaction_FilterSort_SelectionList)}return this.filterSortValues})}changeFilt(e){this.filt.next(e)}setFiltSlcted(e){this.storedFilterKey=e,localStorage.setItem("storedFilterKey",JSON.stringify(e))}getFiltSlcted(){return this.storedFilterKey||(this.storedFilterKey=JSON.parse(localStorage.getItem("storedFilterKey"))),this.storedFilterKey}currentFilter(){return this.filt.asObservable()}setSortSlcted(e){this.storedSortKey=e,localStorage.setItem("storedSortKey",JSON.stringify(e))}getSortSlcted(){return this.storedSortKey||(this.storedSortKey=JSON.parse(localStorage.getItem("storedSortKey"))),this.storedSortKey}ngOnDestroy(){this.subscription.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(h.LFG(p.O),h.LFG(v.bQ),h.LFG(m.v),h.LFG(y.HT),h.LFG(g.$),h.LFG(S.a))},e.\u0275prov=h.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},51222:function(e,t,s){s.d(t,{z:function(){return a}});var i=s(30885);const n="myvoyage/ws/ers/",a={allAccounts:n+"service/all/accounts?s=",participantData:`myvoya/ws/ers/data/customers/${i.l}/participantprofile?fromMDM=Y`,vestedBalance:n+"rsdata/balance/vested/",gainLoss:n+"rsdata/balancehistory/",loan:n+"rsdata/loans/outstanding/",rateOfReturn:n+"rsdata/prr/",planAdviceStatus:n+"rsdata/aboutme/plans/advicestatus",omEligibility:"myvoya/ws/ers/site/configurations/retirement/orangemoney/eligibility",getrrinfo:`myvoya/ws/ers/service/customers/${i.l}/orangemoney/getrrinfo`,getpension:`myvoya/ws/ers/service/customers/${i.l}/orangemoney/getpension`,getsrbenefits:`myvoya/ws/ers/service/customers/${i.l}/orangemoney/getsrbenefits/`,getssbenefits:`myvoya/ws/ers/service/customers/${i.l}/orangemoney/getssbenefits`,updateOptOut:`myvoya/ws/ers/service/customers/${i.l}/orangemoney/optout`,saveMadlib:`myvoya/ws/ers/service/customers/${i.l}/orangemoney/savemadlib`,contribution:n+"participation/history/contributions/",ytdcontribution:n+"contrib/paycontrib/",employersmatch:n+"display/message/employermatch/",dividend:n+"participation/history/dividend/",saveRetirementAgeNonFE:`myvoya/ws/ers/service/customers/${i.l}/orangemoney/validate`,saveRetirementAgeFE:`myvoya/ws/ers/service/customers/${i.l}/orangemoney/fevalidate`,saveSalaryFE:`myvoya/ws/ers/service/customers/${i.l}/orangemoney/feshowmeimpact`,saveSalaryNonFE:`myvoya/ws/ers/service/customers/${i.l}/orangemoney/saveprofile`,transaction:n+"participation/history/transactions/",externalLinks:n+"service/navlinks/{client}/{planID}?s={sessionID}&domain={domain}",omSectionLabel:n+"content/section/Accounts",InitSession:n+"emvdata/smservice/session",eventTracking:n+"service/eventTracking",predictiveMessage:n+"content/section/messages",getOfferCode:n+"rsdata/accordion",allHSAAccounts:"myvoyage/wex/accountBalances",hsaTransactions:"myvoyage/wex/accountTransactions/",accountsContent:n+"content/section/accounts",subscriberKey:n+"service/sfmcUserInfo"}}}]);