"use strict";(self.webpackChunkmyvoyage=self.webpackChunkmyvoyage||[]).push([[4569],{44569:function(e,t,n){n.r(t),n.d(t,{StepsModule:function(){return ct}});var i=n(38583),s=n(47823),o=n(93206),r=n(57700),c=n(2398),a=n(71249),l=n(87730),p=n(75319),u=n(26682),h=n(89128),d=n(78503),g=n(78899),m=n(42597),y=n(37364),f=n(46597),C=n(14081),v=n(39777);let x=(()=>{class e{constructor(e){this.journeyService=e,this.service=this.journeyService.journeyServiceMap[this.journeyService.getCurrentJourney().journeyID]}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(d.W))},e.\u0275cmp=r.Xpm({type:e,selectors:[["journeys-steps-step-header-with-logo"]],inputs:{element:"element"},decls:4,vars:2,consts:[["alt","account logo",3,"src"]],template:function(e,t){1&e&&(r.TgZ(0,"div"),r._UZ(1,"img",0),r.TgZ(2,"span"),r._uU(3),r.qZA(),r.qZA()),2&e&&(r.xp6(1),r.Q6J("src",t.element.imageId?t.service[t.element.imageId]:t.element.imageUrl,r.LSH),r.xp6(2),r.Oqu(t.element.answerId?t.service[t.element.answerId]:t.element.header))},styles:["[_nghost-%COMP%]{display:block}[_nghost-%COMP%]   div[_ngcontent-%COMP%]{display:flex;align-items:center}[_nghost-%COMP%]   div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:40px}[_nghost-%COMP%]   div[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px;color:var(--primary-colors-voya-black);font-weight:bold;padding-left:10px}"]}),e})();var w=n(96915);class b{}var S=n(1282);let M=(()=>{class e{constructor(e,t){this.journeyService=e,this.currencyPipe=t,this.subscription=new p.w,this.pieChartDataColor=new b,this.highCharts=S}ngOnInit(){const e=this.journeyService.getCurrentJourney();this.journeyService.journeyServiceMap[e.journeyID]&&this.subscription.add(this.journeyService.journeyServiceMap[e.journeyID].valueChange.subscribe(()=>{this.doPieCalculations(this.journeyService.journeyServiceMap[e.journeyID])}))}doPieCalculations(e){this.pieChartDataColor.pieChartJourneyStep=[],this.pieChartDataColor.colors=[],this.element.elements.forEach(t=>{this.pieChartDataColor.pieChartJourneyStep.push({id:t.id,label:t.label,color:t.color,value:parseFloat(e[t.id])}),this.pieChartDataColor.colors.push(t.color)}),this.pieChartDataColor.total=e.totalCost;const t=[];this.pieChartDataColor.pieChartJourneyStep.forEach(e=>{t.push({label:0===this.percentage(e.value)?"":Math.round(this.percentage(e.value))+"%",name:e.label,dataLabels:{distance:-40},y:Math.round(e.value),value:Math.round(e.value)})}),this.pushDataToPieChart(t)}pushDataToPieChart(e){this.highCharts.chart("container",{chart:{width:window.innerWidth-77,height:300},title:{text:void 0},plotOptions:{pie:{size:"80%",events:{click:function(e){e.preventDefault()}},allowPointSelect:!0,tooltip:{headerFormat:void 0,pointFormat:"<b>{point.name} : ${point.value}</b>"},dataLabels:{format:"<b>{point.label}</b>",useHTML:!0,style:{fontWeight:"bold",color:"white",textDecoration:"none",fontSize:"14px"}},startAngle:0,endAngle:0,center:["50%","50%"],colors:this.pieChartDataColor.colors}},series:[{type:"pie",data:e}]})}percentage(e){const t=e/parseFloat(this.pieChartDataColor.total)*100;return t<=5?0:t}ngOnDestroy(){this.subscription.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(d.W),r.Y36(i.H9))},e.\u0275cmp=r.Xpm({type:e,selectors:[["journey-step-charts-pie-chart"]],inputs:{element:"element"},decls:1,vars:0,consts:[["id","container"]],template:function(e,t){1&e&&r._UZ(0,"div",0)},encapsulation:2}),e})();function O(e,t){if(1&e&&r._UZ(0,"journey-step-charts-pie-chart",1),2&e){const e=r.oxw();r.Q6J("element",e.element)}}let _=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Xpm({type:e,selectors:[["journey-step-charts"]],inputs:{element:"element"},decls:1,vars:1,consts:[[3,"element",4,"ngIf"],[3,"element"]],template:function(e,t){1&e&&r.YNc(0,O,1,1,"journey-step-charts-pie-chart",0),2&e&&r.Q6J("ngIf","pie"===t.element.type)},directives:[i.O5,M],encapsulation:2}),e})();var P=n(5820);const j=["img"],k=function(e){return{width:e}},J=function(e,t,n){return{width:e,height:t,background:n}};let I=(()=>{class e{constructor(e){this.journeyService=e,this.times=0,this.animationSeen=!1}ngOnInit(){this.speed=this.element.speed?this.element.speed:50,this.widthOfSpriteSheet=this.element.widthOfEachSprite*(this.element.numberOfSpritesPerRow-1),this.currentStepSubscription=this.journeyService.getCurrentStep$().subscribe(e=>{e===this.index&&this.startAnimation()})}startAnimation(){if(!this.animationSeen){this.animationSeen=!0;let e=this.element.widthOfEachSprite,t=0;this.animationInterval=setInterval(()=>{this.times++,this.img.nativeElement.style.backgroundPosition=`-${e}px -${t}px`,e<this.widthOfSpriteSheet?e+=this.element.widthOfEachSprite:(e=0,t+=this.element.heightOfEachSprite),this.times>=this.element.totalNumberOfSprites-1&&(clearInterval(this.animationInterval),this.times=0)},this.speed)}}ngOnDestroy(){this.currentStepSubscription.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(d.W))},e.\u0275cmp=r.Xpm({type:e,selectors:[["journeys-steps-step-animation"]],viewQuery:function(e,t){if(1&e&&r.Gf(j,5),2&e){let e;r.iGM(e=r.CRH())&&(t.img=e.first)}},inputs:{element:"element",index:"index"},decls:4,vars:8,consts:[[1,"container",3,"ngStyle"],[3,"ngStyle"],["img",""],[1,"hide-px"]],template:function(e,t){1&e&&(r.TgZ(0,"div",0),r._UZ(1,"div",1,2),r._UZ(3,"div",3),r.qZA()),2&e&&(r.Q6J("ngStyle",r.VKq(2,k,t.element.widthOfEachSprite+"px")),r.xp6(1),r.Q6J("ngStyle",r.kEZ(4,J,t.element.widthOfEachSprite-1+"px",t.element.heightOfEachSprite+"px","url("+t.element.imageUrl+") 0 0")))},directives:[i.PC],styles:["div.container[_ngcontent-%COMP%]{margin:auto;display:flex;padding-bottom:20px}div.container[_ngcontent-%COMP%]   .hide-px[_ngcontent-%COMP%]{width:1px}"]}),e})(),Z=(()=>{class e{constructor(e){this.journeyService=e}openModal(){this.journeyService.openModal({element:this.element})}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(d.W))},e.\u0275cmp=r.Xpm({type:e,selectors:[["journeys-steps-step-video"]],inputs:{element:"element"},decls:1,vars:3,consts:[[3,"src","id","alt","click"]],template:function(e,t){1&e&&(r.TgZ(0,"img",0),r.NdJ("click",function(){return t.openModal()}),r.qZA()),2&e&&r.Q6J("src",t.element.imageUrl,r.LSH)("id","journeyVideo"+t.element.idSuffix)("alt",t.element.altText||"")},styles:["[_nghost-%COMP%]{display:block;margin-bottom:10px;text-align:center}[_nghost-%COMP%]   img[_ngcontent-%COMP%]{cursor:pointer}"]}),e})();var Q=n(65388),T=n(24494),N=n(88950);function Y(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"ion-button",2),r.NdJ("click",function(){return r.CHM(e),r.oxw().viewMoreClicked()}),r._uU(1),r.qZA()}if(2&e){const e=r.oxw();r.Q6J("id","journeyMxWidgetViewMore"+e.element.idSuffix),r.xp6(1),r.hij(" ",e.element.label,"\n")}}let U=(()=>{class e{constructor(e){this.router=e}viewMoreClicked(){this.router.navigateByUrl(this.element.link)}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(o.F0))},e.\u0275cmp=r.Xpm({type:e,selectors:[["journeys-steps-step-mx-widget"]],inputs:{element:"element"},decls:2,vars:4,consts:[[3,"widgetType","height","tagName"],["class","font-18","shape","round","expand","block","color","btncolor","fill","outline",3,"id","click",4,"ngIf"],["shape","round","expand","block","color","btncolor","fill","outline",1,"font-18",3,"id","click"]],template:function(e,t){1&e&&(r._UZ(0,"app-mx-widget",0),r.YNc(1,Y,2,2,"ion-button",1)),2&e&&(r.Q6J("widgetType",t.element.widgetType)("height","400px")("tagName","journeyMxWidget"+t.element.idSuffix),r.xp6(1),r.Q6J("ngIf",t.element.showWidgetButton))},directives:[N.q,i.O5,s.YG],styles:["ion-button[_ngcontent-%COMP%]{color:var(--primary-colors-voya-dark-blue);width:148px;height:40px;font-size:16px;font-weight:600;margin:0 auto 15px}"]}),e})();var q=n(56515);function B(e,t){if(1&e&&(r.ynx(0),r.TgZ(1,"journeys-expand-collapse",2),r._UZ(2,"journeys-steps-step-intro",3),r.qZA(),r.BQk()),2&e){const e=t.$implicit,n=t.index,i=r.oxw();r.xp6(1),r.Q6J("header",i.element.options[n].label)("index",e.idSuffix),r.xp6(1),r.Q6J("element",e)}}let A=(()=>{class e{constructor(){this.stepContentElements=[]}ngOnInit(){var e;null===(e=this.element.options)||void 0===e||e.forEach((e,t)=>{this.stepContentElements.push({description:e.description,descriptions:e.descriptions,webviewHeader:e.webviewHeader,webviewLinks:e.webviewLinks,webviewHeaders:e.webviewHeaders,webviewToolbars:e.webviewToolbars,videoUrl:e.videoUrl,videoUrls:e.videoUrls,idSuffix:this.element.idSuffix+t})})}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Xpm({type:e,selectors:[["journeys-steps-step-expand-collapse"]],inputs:{element:"element"},decls:2,vars:1,consts:[["inset","true","lines","full"],[4,"ngFor","ngForOf"],[3,"header","index"],[3,"element"]],template:function(e,t){1&e&&(r.TgZ(0,"ion-list",0),r.YNc(1,B,3,3,"ng-container",1),r.qZA()),2&e&&(r.xp6(1),r.Q6J("ngForOf",t.stepContentElements))},directives:[s.q_,i.sg,q.X,v.k],styles:["[_nghost-%COMP%]   ion-list[_ngcontent-%COMP%]{margin:0;padding:0;background-color:var(--ion-color-white);overflow:auto;font-size:medium;font-size:initial}"]}),e})();function E(e,t){if(1&e&&(r.TgZ(0,"span"),r._uU(1),r.qZA()),2&e){const e=r.oxw();r.xp6(1),r.Oqu(e.element.header)}}const W=function(e){return{"with-header":e}};let $=(()=>{class e{constructor(e){this.journeyService=e,this.subscription=new p.w,this.service=this.journeyService.journeyServiceMap[this.journeyService.getCurrentJourney().journeyID]}ngOnInit(){this.answer=this.element.answer,this.service&&!this.answer&&this.subscription.add(this.service.valueChange.subscribe(()=>{this.answer=this.element.answerId?this.service[this.element.answerId]:this.element.answer,this.journeyService.isValueEmpty(this.answer)&&(this.answer="-")}))}ngOnDestroy(){this.subscription.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(d.W))},e.\u0275cmp=r.Xpm({type:e,selectors:[["journeys-steps-step-row-with-image"]],inputs:{element:"element"},decls:10,vars:13,consts:[[3,"ngClass"],[1,"img-container"],[3,"src","alt"],[4,"ngIf"],[1,"desc-answer-container"],[1,"answer"]],template:function(e,t){1&e&&(r.TgZ(0,"div",0),r.TgZ(1,"div",1),r._UZ(2,"img",2),r.YNc(3,E,2,1,"span",3),r.qZA(),r.TgZ(4,"div",4),r.TgZ(5,"span"),r._uU(6),r.qZA(),r.TgZ(7,"span",5),r._uU(8),r.ALo(9,"currency"),r.qZA(),r.qZA(),r.qZA()),2&e&&(r.Q6J("ngClass",r.VKq(11,W,t.element.header)),r.xp6(2),r.Q6J("src",t.element.imageUrl,r.LSH)("alt",(null==t.element?null:t.element.altText)||""),r.xp6(1),r.Q6J("ngIf",t.element.header),r.xp6(3),r.Oqu(t.element.description),r.xp6(2),r.Oqu("dollar"===t.element.type&&"-"!==t.answer?r.gM2(9,6,t.answer,"USD","symbol","1.0-0"):t.answer))},directives:[i.mk,i.O5],pipes:[i.H9],styles:["[_nghost-%COMP%]{display:block}[_nghost-%COMP%]   div[_ngcontent-%COMP%]{display:flex}[_nghost-%COMP%]   div.desc-answer-container[_ngcontent-%COMP%]{flex-grow:0;width:100%}[_nghost-%COMP%]   div.desc-answer-container[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:18px;color:var(--primary-colors-voya-black);margin:auto 0}@media (max-width: 768px){[_nghost-%COMP%]   div.desc-answer-container[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin:unset}}[_nghost-%COMP%]   div.desc-answer-container[_ngcontent-%COMP%]   span.answer[_ngcontent-%COMP%]{font-size:24px;font-weight:600;margin-left:auto}@media (max-width: 768px){[_nghost-%COMP%]   div.desc-answer-container[_ngcontent-%COMP%]   span.answer[_ngcontent-%COMP%]{margin-left:10px}}[_nghost-%COMP%]   div.img-container[_ngcontent-%COMP%]{min-width:43px;margin-right:7px;align-items:flex-start}[_nghost-%COMP%]   div.img-container[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:18px;margin-left:10px;font-weight:600;color:var(--primary-colors-voya-black)}[_nghost-%COMP%]   .with-header[_ngcontent-%COMP%]{flex-direction:column}"]}),e})(),D=(()=>{class e{constructor(e){this.journeyService=e,this.service=this.journeyService.journeyServiceMap[this.journeyService.getCurrentJourney().journeyID]}openContentLinkModal(){this.element.isContentDynamicModal&&this.element.elements.forEach((e,t)=>{this.element.elements[t]=this.service.fetchDynamicCardContent(e)}),this.journeyService.openContentLinkModal(this.element)}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(d.W))},e.\u0275cmp=r.Xpm({type:e,selectors:[["journeys-steps-step-contentLink"]],inputs:{element:"element"},decls:2,vars:2,consts:[[3,"id","click"]],template:function(e,t){1&e&&(r.TgZ(0,"p",0),r.NdJ("click",function(){return t.openContentLinkModal()}),r._uU(1),r.qZA()),2&e&&(r.Q6J("id","contentLink"+t.element.idSuffix),r.xp6(1),r.hij(" ",t.element.header,"\n"))},styles:["[_nghost-%COMP%]{display:block}[_nghost-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;color:var(--primary-colors-voya-dark-blue);margin:4px 0 0;text-decoration:underline}"]}),e})();var F=n(64762),L=n(27994);let V=(()=>{class e{constructor(e){this.journeyService=e}openModal(){return(0,F.mG)(this,void 0,void 0,function*(){this.journeyService.openModal({element:Object.assign(Object.assign({},this.element),{id:"genericModal"})},!1)})}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(d.W))},e.\u0275cmp=r.Xpm({type:e,selectors:[["journeys-steps-step-add-child-button"]],inputs:{element:"element"},decls:1,vars:2,consts:[[3,"element","id","click"]],template:function(e,t){1&e&&(r.TgZ(0,"journeys-icon-text-button",0),r.NdJ("click",function(){return t.openModal()}),r.qZA()),2&e&&r.Q6J("element",t.element)("id","addChild"+t.element.idSuffix)},directives:[L.T],encapsulation:2}),e})();var H=n(51772),z=n(71638),K=n(40654),X=n(88786),G=n(61040);const R=function(e){return{"padding-bottom":e}},ee=function(e,t){return{"margin-top":e,"margin-bottom":t}};let te=(()=>{class e{constructor(e,t,n,i,s,o){this.journeyService=e,this.utilityService=t,this.accountInfoService=n,this.settingsService=i,this.router=s,this.accountService=o,this.moreContentSubscription=new p.w}ngOnInit(){return(0,F.mG)(this,void 0,void 0,function*(){this.isWeb=this.utilityService.getIsWeb(),this.settingsDisplayFlags=yield this.settingsService.getSettingsDisplayFlags()})}openWebView(){return(0,F.mG)(this,void 0,void 0,function*(){"videoUrl"in this.element?this.isWeb||this.journeyService.openModal({element:this.element}):this.settingsDisplayFlags.displayContactLink&&!("externalLink"in this.element)?this.isWeb?this.router.navigateByUrl("/journeys/contact-a-coach"):(yield this.fetchScreenContent(),this.journeyService.openModal({element:{id:"contactACoach"},screenMessage:this.screenMessage,settingsDisplayFlags:this.settingsDisplayFlags})):"externalLink"in this.element?window.open(this.element.externalLink,"_blank"):this.isWeb?window.open(this.element.link,"_blank"):this.accountService.openPwebAccountLink(decodeURIComponent(this.element.link))})}fetchScreenContent(){return new Promise(e=>{this.moreContentSubscription.add(this.accountInfoService.getScreenMessage().subscribe(t=>{this.screenMessage=t,this.settingsDisplayFlags.suppressAppointment&&(this.screenMessage.TimetapURL=this.settingsDisplayFlags.pwebStatementUrl),e()}))})}ngOnDestroy(){this.moreContentSubscription.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(d.W),r.Y36(y.O),r.Y36(K.o),r.Y36(X.g),r.Y36(o.F0),r.Y36(G.B))},e.\u0275cmp=r.Xpm({type:e,selectors:[["journeys-steps-step-help-card"]],inputs:{element:"element"},decls:14,vars:13,consts:[[3,"ngClass"],[3,"id","click"],[1,"helpImg-col",3,"ngStyle"],[3,"src","alt"],[1,"header-txt",3,"ngStyle"],[1,"helpHeader-col"],[1,"header"],[1,"helpDesc-col"],[1,"description"]],template:function(e,t){1&e&&(r.TgZ(0,"div",0),r.TgZ(1,"ion-card",1),r.NdJ("click",function(){return t.openWebView()}),r.TgZ(2,"ion-row"),r.TgZ(3,"ion-col",2),r._UZ(4,"img",3),r.qZA(),r.TgZ(5,"ion-col",4),r.TgZ(6,"ion-row"),r.TgZ(7,"ion-col",5),r.TgZ(8,"ion-text",6),r._uU(9),r.qZA(),r.qZA(),r.qZA(),r.TgZ(10,"ion-row"),r.TgZ(11,"ion-col",7),r.TgZ(12,"ion-text",8),r._uU(13),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA()),2&e&&(r.Q6J("ngClass",t.isWeb?"helpcard-web":"helpcard-mobile"),r.xp6(1),r.Q6J("id","helpCard"+t.element.idSuffix),r.xp6(2),r.Q6J("ngStyle",r.VKq(8,R,t.element.paddingBottom)),r.xp6(1),r.Q6J("src",t.element.imageUrl,r.LSH)("alt",t.element.altText||""),r.xp6(1),r.Q6J("ngStyle",r.WLB(10,ee,t.element.marginTop,t.element.marginBottom)),r.xp6(4),r.Oqu(t.element.header),r.xp6(4),r.Oqu(t.element.description))},directives:[i.mk,s.PM,s.Nd,s.wI,i.PC,s.yW],styles:["[_nghost-%COMP%]{display:block}[_nghost-%COMP%]   ion-card[_ngcontent-%COMP%]{cursor:pointer;box-shadow:var(--card-box-shadow);border-radius:var(--card-border-radius);margin:0;color:var(--primary-colors-voya-black)}[_nghost-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-col.header-txt[_ngcontent-%COMP%]{margin:auto}[_nghost-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-col.header-txt[_ngcontent-%COMP%]   ion-col.helpHeader-col[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{font-weight:bold;font-size:18px}[_nghost-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-col.header-txt[_ngcontent-%COMP%]   ion-col.helpDesc-col[_ngcontent-%COMP%]{margin:auto}[_nghost-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-col.header-txt[_ngcontent-%COMP%]   ion-col.helpDesc-col[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{font-size:16px}[_nghost-%COMP%]   .helpcard-web[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]{padding:15px 20px}[_nghost-%COMP%]   .helpcard-web[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   .helpImg-col[_ngcontent-%COMP%]{display:flex;margin:auto}@media screen and (max-width: 500px){[_nghost-%COMP%]   .helpcard-web[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   .helpImg-col[_ngcontent-%COMP%]{max-width:116px}}@media screen and (min-width: 500px){[_nghost-%COMP%]   .helpcard-web[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   .helpImg-col[_ngcontent-%COMP%]{max-width:138px}}[_nghost-%COMP%]   .helpcard-web[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   .helpImg-col[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:98px;height:98px}[_nghost-%COMP%]   .helpcard-web[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-col.header-txt[_ngcontent-%COMP%]   ion-col.helpHeader-col[_ngcontent-%COMP%]{margin-bottom:12px}[_nghost-%COMP%]   .helpcard-web[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]:hover{box-shadow:0 0 8px #000c;cursor:pointer}[_nghost-%COMP%]   .helpcard-mobile[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]{padding:5px 20px}[_nghost-%COMP%]   .helpcard-mobile[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   .helpImg-col[_ngcontent-%COMP%]{margin:auto}@media screen and (max-width: 500px){[_nghost-%COMP%]   .helpcard-mobile[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   .helpImg-col[_ngcontent-%COMP%]{max-width:98px;max-height:98px}}@media screen and (min-width: 500px){[_nghost-%COMP%]   .helpcard-mobile[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   .helpImg-col[_ngcontent-%COMP%]{max-width:128px}}[_nghost-%COMP%]   .helpcard-mobile[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   .helpImg-col[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:86px;height:85px}"]}),e})();function ne(e,t){if(1&e&&r._UZ(0,"journeys-steps-step-intro",15),2&e){const e=r.oxw(2).$implicit;r.Q6J("element",e)}}function ie(e,t){if(1&e&&r._UZ(0,"journeys-steps-step-header-with-logo",15),2&e){const e=r.oxw(2).$implicit;r.Q6J("element",e)}}function se(e,t){if(1&e&&r._UZ(0,"journeys-steps-step-image-with-value",16),2&e){const e=r.oxw(2).$implicit,t=r.oxw(3);r.Q6J("imageUrl",e.imageUrl)("value",t.imageValue)}}function oe(e,t){if(1&e&&r._UZ(0,"journey-step-charts",15),2&e){const e=r.oxw(2).$implicit;r.Q6J("element",e)}}const re=function(e){return{"margin-bottom":e}};function ce(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"journeys-steps-step-input",17),r.NdJ("valueChange",function(t){r.CHM(e);const n=r.oxw(2).$implicit;return r.oxw(3).updateStepValue(t,n.answerId)})("currentValue",function(t){return r.CHM(e),r.oxw(5).updateImageValue(t)})("isRequired",function(t){r.CHM(e);const n=r.oxw(2).$implicit;return r.oxw(3).setRequired(t,n)}),r.qZA()}if(2&e){const e=r.oxw(2).$implicit,t=r.oxw(3);r.Q6J("element",e)("values",t.step.value)("answer",t.step.answer)("ngStyle",r.VKq(4,re,e.marginBottom))}}function ae(e,t){if(1&e&&r._UZ(0,"journeys-steps-step-animation",18),2&e){const e=r.oxw(2).$implicit,t=r.oxw(3);r.Q6J("element",e)("index",t.index)}}function le(e,t){if(1&e&&r._UZ(0,"journeys-steps-step-video",15),2&e){const e=r.oxw(2).$implicit;r.Q6J("element",e)}}function pe(e,t){1&e&&r._UZ(0,"app-orange-money",19),2&e&&r.Q6J("displayHeader",!1)}const ue=function(e,t,n){return{"margin-top":e,"margin-bottom":t,"max-width":n}};function he(e,t){if(1&e&&r._UZ(0,"img",20),2&e){const e=r.oxw(2).$implicit;r.Q6J("src",e.imageUrl,r.LSH)("ngStyle",r.kEZ(3,ue,e.marginTop,e.marginBottom,e.maxWidth))("alt",(null==e?null:e.altText)||"")}}function de(e,t){if(1&e&&r._UZ(0,"app-table",15),2&e){const e=r.oxw(2).$implicit;r.Q6J("element",e)}}function ge(e,t){if(1&e&&r._UZ(0,"journeys-steps-step-mx-widget",15),2&e){const e=r.oxw(2).$implicit;r.Q6J("element",e)}}function me(e,t){if(1&e&&r._UZ(0,"journeys-steps-step-expand-collapse",15),2&e){const e=r.oxw(2).$implicit;r.Q6J("element",e)}}function ye(e,t){if(1&e&&r._UZ(0,"journeys-steps-step-row-with-image",15),2&e){const e=r.oxw(2).$implicit;r.Q6J("element",e)}}function fe(e,t){if(1&e&&r._UZ(0,"journeys-steps-step-contentLink",21),2&e){const e=r.oxw(2).$implicit;r.Q6J("element",e)("ngStyle",r.VKq(2,re,(null==e?null:e.marginBottom)||"0px"))}}function Ce(e,t){if(1&e&&r._UZ(0,"journeys-steps-step-add-child-button",15),2&e){const e=r.oxw(2).$implicit;r.Q6J("element",e)}}function ve(e,t){if(1&e&&r._UZ(0,"journeys-steps-step-intro",15),2&e){const e=r.oxw().$implicit;r.Q6J("element",e)}}function xe(e,t){if(1&e&&r._UZ(0,"journeys-steps-step-image-with-value",16),2&e){const e=r.oxw().$implicit,t=r.oxw(7);r.Q6J("imageUrl",e.imageUrl)("value",t.imageValue)}}function we(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"journeys-steps-step-input",27),r.NdJ("valueChange",function(t){r.CHM(e);const n=r.oxw().$implicit;return r.oxw(7).updateStepValue(t,n.answerId)})("currentValue",function(t){return r.CHM(e),r.oxw(8).updateImageValue(t)}),r.qZA()}if(2&e){const e=r.oxw().$implicit,t=r.oxw(7);r.Q6J("element",e)("values",t.step.value)("answer",t.step.answer)("ngStyle",r.VKq(4,re,e.marginBottom))}}function be(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"journeys-steps-step-button",28),r.NdJ("continueClick",function(t){return r.CHM(e),r.oxw(8).handleContinueClick(t)})("backClick",function(){return r.CHM(e),r.oxw(8).handleBackClick()}),r.qZA()}if(2&e){const e=r.oxw().$implicit,t=r.oxw().$implicit,n=r.oxw(6);r.Q6J("label",e.label)("link",e.link)("idSuffix",e.idSuffix)("isActiveBackBtn",0!==n.currentStep)("backBtnColor",t.backgroundColor?"var(--primary-colors-voya-white":"var(--primary-colors-voya-dark-blue)")}}function Se(e,t){if(1&e&&r._UZ(0,"journeys-steps-step-video",15),2&e){const e=r.oxw().$implicit;r.Q6J("element",e)}}function Me(e,t){if(1&e&&r._UZ(0,"img",29),2&e){const e=r.oxw().$implicit;r.Q6J("src",e.imageUrl,r.LSH)("alt",(null==e?null:e.altText)||"")}}function Oe(e,t){if(1&e&&r._UZ(0,"journeys-steps-step-mx-widget",15),2&e){const e=r.oxw().$implicit;r.Q6J("element",e)}}function _e(e,t){if(1&e&&r._UZ(0,"app-table",15),2&e){const e=r.oxw().$implicit;r.Q6J("element",e)}}function Pe(e,t){if(1&e&&r._UZ(0,"journeys-steps-step-expand-collapse",15),2&e){const e=r.oxw().$implicit;r.Q6J("element",e)}}function je(e,t){if(1&e&&r._UZ(0,"journeys-steps-step-row-with-image",15),2&e){const e=r.oxw().$implicit;r.Q6J("element",e)}}function ke(e,t){if(1&e&&r._UZ(0,"journeys-steps-step-contentLink",15),2&e){const e=r.oxw().$implicit;r.Q6J("element",e)}}function Je(e,t){if(1&e&&r._UZ(0,"journeys-steps-step-add-child-button",15),2&e){const e=r.oxw().$implicit;r.Q6J("element",e)}}function Ie(e,t){if(1&e&&(r.ynx(0),r.YNc(1,ve,1,1,"journeys-steps-step-intro",7),r.YNc(2,xe,1,2,"journeys-steps-step-image-with-value",8),r.YNc(3,we,1,6,"journeys-steps-step-input",24),r.YNc(4,be,1,5,"journeys-steps-step-button",25),r.YNc(5,Se,1,1,"journeys-steps-step-video",7),r.YNc(6,Me,1,2,"img",26),r.YNc(7,Oe,1,1,"journeys-steps-step-mx-widget",7),r.YNc(8,_e,1,1,"app-table",7),r.YNc(9,Pe,1,1,"journeys-steps-step-expand-collapse",7),r.YNc(10,je,1,1,"journeys-steps-step-row-with-image",7),r.YNc(11,ke,1,1,"journeys-steps-step-contentLink",7),r.YNc(12,Je,1,1,"journeys-steps-step-add-child-button",7),r.BQk()),2&e){const e=t.$implicit;r.xp6(1),r.Q6J("ngIf","intro"===e.id),r.xp6(1),r.Q6J("ngIf","imageWithValue"===e.id),r.xp6(1),r.Q6J("ngIf","input"===e.id),r.xp6(1),r.Q6J("ngIf","button"===e.id),r.xp6(1),r.Q6J("ngIf","video"===e.id),r.xp6(1),r.Q6J("ngIf","image"===e.id),r.xp6(1),r.Q6J("ngIf","mxWidget"===e.id),r.xp6(1),r.Q6J("ngIf","table"===e.id),r.xp6(1),r.Q6J("ngIf","expandCollapse"===e.id),r.xp6(1),r.Q6J("ngIf","rowWithImage"===e.id),r.xp6(1),r.Q6J("ngIf","contentModal"===e.id),r.xp6(1),r.Q6J("ngIf","modalButton"===e.id)}}const Ze=function(e,t){return{"background-color":e,"margin-bottom":t}};function Qe(e,t){if(1&e&&(r.TgZ(0,"ion-card",23),r.YNc(1,Ie,13,12,"ng-container",6),r.qZA()),2&e){const e=t.$implicit;r.Q6J("ngStyle",r.WLB(2,Ze,e.backgroundColor,e.marginBottom)),r.xp6(1),r.Q6J("ngForOf",e.elements)}}function Te(e,t){if(1&e&&(r.ynx(0),r.YNc(1,Qe,2,5,"ion-card",22),r.BQk()),2&e){const e=r.oxw(2).$implicit;r.xp6(1),r.Q6J("ngForOf",e.pageElements)}}function Ne(e,t){1&e&&r.GkF(0)}function Ye(e,t){if(1&e&&(r.ynx(0),r.YNc(1,Ne,1,0,"ng-container",30),r.BQk()),2&e){r.oxw(4);const e=r.MAs(4);r.xp6(1),r.Q6J("ngTemplateOutlet",e)}}const Ue=function(e){return{"padding-top":e}};function qe(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"journeys-steps-step-button",31),r.NdJ("continueClick",function(t){return r.CHM(e),r.oxw(5).handleContinueClick(t)})("backClick",function(){return r.CHM(e),r.oxw(5).handleBackClick()}),r.qZA()}if(2&e){const e=r.oxw(2).$implicit,t=r.oxw().$implicit,n=r.oxw(2);r.Q6J("label",e.label)("link",e.link)("type",e.type)("idSuffix",e.idSuffix)("noSpacing","true"===(null==e?null:e.noSpacing))("isActiveBackBtn",0!==n.currentStep&&"false"!==(null==e?null:e.noBackLink))("backBtnColor",t.backgroundColor?"var(--primary-colors-voya-white":"var(--primary-colors-voya-dark-blue)")("disabled",e.isContinueButton&&!n.continueButtonEnabled)("ngStyle",r.VKq(10,Ue,e.paddingTop))("ngClass","true"===(null==e?null:e.noSpacing)?"no-spacing":"spacing")}}function Be(e,t){if(1&e&&r._UZ(0,"journeys-line",15),2&e){const e=r.oxw(2).$implicit;r.Q6J("element",e)}}function Ae(e,t){if(1&e&&(r.ynx(0),r.YNc(1,ne,1,1,"journeys-steps-step-intro",7),r.YNc(2,ie,1,1,"journeys-steps-step-header-with-logo",7),r.YNc(3,se,1,2,"journeys-steps-step-image-with-value",8),r.YNc(4,oe,1,1,"journey-step-charts",7),r.YNc(5,ce,1,6,"journeys-steps-step-input",9),r.YNc(6,ae,1,2,"journeys-steps-step-animation",10),r.YNc(7,le,1,1,"journeys-steps-step-video",7),r.YNc(8,pe,1,1,"app-orange-money",11),r.YNc(9,he,1,7,"img",12),r.YNc(10,de,1,1,"app-table",7),r.YNc(11,ge,1,1,"journeys-steps-step-mx-widget",7),r.YNc(12,me,1,1,"journeys-steps-step-expand-collapse",7),r.YNc(13,ye,1,1,"journeys-steps-step-row-with-image",7),r.YNc(14,fe,1,4,"journeys-steps-step-contentLink",13),r.YNc(15,Ce,1,1,"journeys-steps-step-add-child-button",7),r.YNc(16,Te,2,1,"ng-container",3),r.YNc(17,Ye,2,1,"ng-container",3),r.YNc(18,qe,1,12,"journeys-steps-step-button",14),r.YNc(19,Be,1,1,"journeys-line",7),r.BQk()),2&e){const e=r.oxw(),t=e.$implicit,n=e.index,i=r.oxw().$implicit,s=r.oxw().ngIf,o=r.oxw();r.xp6(1),r.Q6J("ngIf","intro"===t.id),r.xp6(1),r.Q6J("ngIf","headerWithLogo"===t.id),r.xp6(1),r.Q6J("ngIf","imageWithValue"===t.id),r.xp6(1),r.Q6J("ngIf","chart"===t.id),r.xp6(1),r.Q6J("ngIf","input"===t.id),r.xp6(1),r.Q6J("ngIf","animation"===t.id),r.xp6(1),r.Q6J("ngIf","video"===t.id),r.xp6(1),r.Q6J("ngIf","orangeMoney"===t.id),r.xp6(1),r.Q6J("ngIf","image"===t.id),r.xp6(1),r.Q6J("ngIf","table"===t.id),r.xp6(1),r.Q6J("ngIf","mxWidget"===t.id),r.xp6(1),r.Q6J("ngIf","expandCollapse"===t.id),r.xp6(1),r.Q6J("ngIf","rowWithImage"===t.id),r.xp6(1),r.Q6J("ngIf","contentModal"===t.id),r.xp6(1),r.Q6J("ngIf","modalButton"===t.id),r.xp6(1),r.Q6J("ngIf",t.pageElements),r.xp6(1),r.Q6J("ngIf",s.helpCards&&o.isWeb&&i.elements.length===n+1),r.xp6(1),r.Q6J("ngIf","button"===t.id),r.xp6(1),r.Q6J("ngIf","line"===t.id)}}function Ee(e,t){if(1&e&&(r.ynx(0),r.YNc(1,Ae,20,19,"ng-container",3),r.BQk()),2&e){const e=t.$implicit,n=r.oxw(3);r.xp6(1),r.Q6J("ngIf",!e.flag||n.journeyServiceMap[n.journeyId]&&n.journeyServiceMap[n.journeyId][e.flag])}}const We=function(e){return{"background-color":e}},$e=function(e){return{hideStep:e}};function De(e,t){if(1&e&&(r.TgZ(0,"ion-card",5),r.YNc(1,Ee,2,1,"ng-container",6),r.qZA()),2&e){const e=t.$implicit,n=r.oxw(2);r.Q6J("ngStyle",r.VKq(3,We,e.backgroundColor))("ngClass",r.VKq(5,$e,n.currentStep!==n.index)),r.xp6(1),r.Q6J("ngForOf",e.elements)}}function Fe(e,t){1&e&&r.GkF(0)}function Le(e,t){if(1&e&&(r.ynx(0),r.YNc(1,Fe,1,0,"ng-container",30),r.BQk()),2&e){r.oxw();const e=r.MAs(4);r.xp6(1),r.Q6J("ngTemplateOutlet",e)}}function Ve(e,t){if(1&e&&r._UZ(0,"journeys-steps-step-help-card",15),2&e){const e=r.oxw().$implicit;r.Q6J("element",e)}}function He(e,t){if(1&e&&(r.ynx(0),r.YNc(1,Ve,1,1,"journeys-steps-step-help-card",7),r.ALo(2,"async"),r.BQk()),2&e){const e=t.$implicit,n=r.oxw(3);r.xp6(1),r.Q6J("ngIf",!e.flag||r.lcZ(2,1,n.journeys$).flags[e.flag])}}function ze(e,t){if(1&e&&r.YNc(0,He,3,3,"ng-container",6),2&e){const e=r.oxw().ngIf;r.Q6J("ngForOf",e.helpCards)}}function Ke(e,t){if(1&e&&(r.TgZ(0,"div",1),r.YNc(1,De,2,7,"ion-card",2),r.YNc(2,Le,2,1,"ng-container",3),r.YNc(3,ze,1,1,"ng-template",null,4,r.W1O),r.qZA()),2&e){const e=t.ngIf,n=r.oxw();r.Q6J("ngClass",n.isWeb?"web-step":"mobile-step"),r.xp6(1),r.Q6J("ngForOf",e.pageElements),r.xp6(1),r.Q6J("ngIf",e.helpCards&&!n.isWeb)}}let Xe=(()=>{class e{constructor(e,t){this.utilitySerivce=e,this.journeyService=t,this.continueClick=new r.vpe,this.backClick=new r.vpe,this.swipeEnabled=new r.vpe,this.continueButtonEnabled=!0,this.requiredAnswerIds=[],this.journeyServiceMap=this.journeyService.journeyServiceMap}ngOnInit(){this.isWeb=this.utilitySerivce.getIsWeb(),this.journeys$=this.journeyService.fetchJourneys()}handleContinueClick(e){this.continueClick.emit(e)}handleBackClick(){this.backClick.emit()}updateStepValue(e,t){this.step.value||(this.step.value={}),this.step.value[t]=e,this.checkForContinue()}checkForContinue(){let e=!0;this.requiredAnswerIds.forEach(t=>{this.journeyService.isValueEmpty(this.step.value[t])&&(e=!1)}),this.continueButtonEnabled=e,this.swipeEnabled.emit({swipeEnabled:e,index:this.index})}setRequired(e,t){e&&(this.requiredAnswerIds.push(t.answerId),this.checkForContinue())}updateImageValue(e){this.imageValue=e}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(y.O),r.Y36(d.W))},e.\u0275cmp=r.Xpm({type:e,selectors:[["journeys-steps-step"]],inputs:{step:"step",index:"index",currentStep:"currentStep",journeyId:"journeyId"},outputs:{continueClick:"continueClick",backClick:"backClick",swipeEnabled:"swipeEnabled"},decls:1,vars:1,consts:[[3,"ngClass",4,"ngIf"],[3,"ngClass"],["class","journeys-steps-step",3,"ngStyle","ngClass",4,"ngFor","ngForOf"],[4,"ngIf"],["helpCardsTemp",""],[1,"journeys-steps-step",3,"ngStyle","ngClass"],[4,"ngFor","ngForOf"],[3,"element",4,"ngIf"],[3,"imageUrl","value",4,"ngIf"],[3,"element","values","answer","ngStyle","valueChange","currentValue","isRequired",4,"ngIf"],[3,"element","index",4,"ngIf"],[3,"displayHeader",4,"ngIf"],[3,"src","ngStyle","alt",4,"ngIf"],[3,"element","ngStyle",4,"ngIf"],[3,"label","link","type","idSuffix","noSpacing","isActiveBackBtn","backBtnColor","disabled","ngStyle","ngClass","continueClick","backClick",4,"ngIf"],[3,"element"],[3,"imageUrl","value"],[3,"element","values","answer","ngStyle","valueChange","currentValue","isRequired"],[3,"element","index"],[3,"displayHeader"],[3,"src","ngStyle","alt"],[3,"element","ngStyle"],["class","internal",3,"ngStyle",4,"ngFor","ngForOf"],[1,"internal",3,"ngStyle"],[3,"element","values","answer","ngStyle","valueChange","currentValue",4,"ngIf"],[3,"label","link","idSuffix","isActiveBackBtn","backBtnColor","continueClick","backClick",4,"ngIf"],[3,"src","alt",4,"ngIf"],[3,"element","values","answer","ngStyle","valueChange","currentValue"],[3,"label","link","idSuffix","isActiveBackBtn","backBtnColor","continueClick","backClick"],[3,"src","alt"],[4,"ngTemplateOutlet"],[3,"label","link","type","idSuffix","noSpacing","isActiveBackBtn","backBtnColor","disabled","ngStyle","ngClass","continueClick","backClick"]],template:function(e,t){1&e&&r.YNc(0,Ke,5,3,"div",0),2&e&&r.Q6J("ngIf",t.step.content)},directives:[i.O5,i.mk,i.sg,s.PM,i.PC,v.k,x,w.o,_,P.a,I,Z,Q.W,T.a,U,A,$,D,V,H.r,i.tP,z.y,te],pipes:[i.Ov],styles:["[_nghost-%COMP%]   div[_ngcontent-%COMP%]{min-height:100%;flex-direction:column}[_nghost-%COMP%]   div[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]{flex-grow:1;box-shadow:var(--card-box-shadow);border-radius:var(--card-border-radius);margin:0;padding:15px 20px 20px;text-align:left;display:flex;flex-direction:column}[_nghost-%COMP%]   div[_ngcontent-%COMP%]   ion-card.internal[_ngcontent-%COMP%]{box-shadow:none;display:block;flex-grow:0}[_nghost-%COMP%]   div[_ngcontent-%COMP%]   ion-card.hideStep[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:not(journeys-steps-step-animation){display:none}[_nghost-%COMP%]   div[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   journeys-steps-step-input[_ngcontent-%COMP%]:last-of-type{margin-bottom:20px}[_nghost-%COMP%]   div[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   journeys-steps-step-row-with-image[_ngcontent-%COMP%]{margin-bottom:25px}[_nghost-%COMP%]   div[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   journeys-steps-step-row-with-image[_ngcontent-%COMP%]:last-of-type{margin-bottom:0}[_nghost-%COMP%]   div[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   journeys-steps-step-mx-widget[_ngcontent-%COMP%]{margin-bottom:10px}[_nghost-%COMP%]   div[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   journeys-steps-step-button[_ngcontent-%COMP%]{width:100%;margin-top:auto}[_nghost-%COMP%]   div[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   journeys-steps-step-button.spacing[_ngcontent-%COMP%]{padding-top:20px}[_nghost-%COMP%]   div[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   journeys-steps-step-button.no-spacing[_ngcontent-%COMP%]{margin-top:0;margin-bottom:0;padding-top:0;padding-bottom:0}[_nghost-%COMP%]   div[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   journeys-steps-step-header-with-logo[_ngcontent-%COMP%]{margin-bottom:20px}[_nghost-%COMP%]   div[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]:not(:last-of-type){margin-bottom:20px}[_nghost-%COMP%]   div[_ngcontent-%COMP%]   journeys-steps-step-help-card[_ngcontent-%COMP%]{margin-top:20px}[_nghost-%COMP%]   div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto;margin-bottom:20px;width:362px}[_nghost-%COMP%]   div.web-step[_ngcontent-%COMP%]{background:var(--ion-color-white)}@media screen and (min-width: 920px){[_nghost-%COMP%]   div.web-step[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]{margin:0 36px 100px;box-shadow:none}}@media screen and (max-width: 920px){[_nghost-%COMP%]   div.web-step[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]{box-shadow:none}}[_nghost-%COMP%]   div.mobile-step[_ngcontent-%COMP%]{margin-bottom:25px;display:flex}"]}),e})();const Ge=["journeyStep"];function Re(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",4),r.TgZ(1,"journeys-steps-step",5,6),r.NdJ("continueClick",function(t){return r.CHM(e),r.oxw(2).handleContinueClick(t)})("backClick",function(){return r.CHM(e),r.oxw(2).handleBackClick()})("swipeEnabled",function(t){return r.CHM(e),r.oxw(2).updateSwipeEnabled(t)}),r.qZA(),r.qZA()}if(2&e){const e=r.oxw(),t=e.index,n=e.$implicit,i=r.oxw();r.xp6(1),r.Q6J("index",t)("step",n)("currentStep",i.currentStep)("journeyId",i.journey.journeyID)}}function et(e,t){1&e&&r.YNc(0,Re,3,4,"ng-template",3)}function tt(e,t){1&e&&r._UZ(0,"div")}const nt=[{path:"",component:(()=>{class e{constructor(e,t,n,i,s,o,r){this.footerService=e,this.journeyService=t,this.ngZone=n,this.router=i,this.eventManager=s,this.eventTracking=o,this.utilityService=r,this.currentStep=0,this.slideOpts={},this.keyboard=l.N1,this.subscription=new p.w,this.updateStatuses=!0,this.saveLastStep=!0}ngOnInit(){this.isWeb=this.utilityService.getIsWeb(),this.slideOpts=this.isWeb?{slidesPerView:1,centeredSlides:!0,spaceBetween:50,noSwipingSelector:"ion-range"}:{slidesPerView:1.1,centeredSlides:!0,spaceBetween:10,noSwipingSelector:"ion-range"},this.subscription.add(this.eventManager.createSubscriber(u.S.leaveJourney).subscribe(()=>{this.leaveJourney()})),this.refreshJourneyStatusPublisher=this.eventManager.createPublisher(u.S.refreshJourneyStatus),this.scrollToTopPublisher=this.eventManager.createPublisher(u.S.journeyStepsScrollToTop),this.subscription.add(this.journeyService.fetchJourneys().subscribe(()=>{const e=this.journeyService.getCurrentJourney();this.journey&&this.journey!==e&&(this.journey=this.journeyService.getCurrentJourney(),this.steps=this.journey.steps)}))}ionViewWillEnter(){this.footerService.publish({type:c.v.none}),this.journeyService.publishSelectedTab("steps"),this.journey=this.journeyService.getCurrentJourney(),this.steps=this.journey.steps,this.swipeEnabledList=Array(this.steps.length).fill(!0),this.progressBarSteps=JSON.parse(JSON.stringify(Array(this.steps.length).fill({status:a.q.notStarted}))),this.steps&&this.steps.length>0&&(this.updateStepStatuses(0,void 0,!1),this.isWeb&&this.refreshJourneyStatusPublisher.publish(void 0)),this.journeyService.publishCurrentStep(this.currentStep),this.saveLastStep=!0}ionViewDidEnter(){setTimeout(()=>{this.slides.slideTo(this.journey.lastModifiedStepIndex,0);for(let e=0;e<this.journey.lastModifiedStepIndex;e++)this.progressBarSteps[e]={status:a.q.completed}},100)}setSwiperInstance(e){this.slides=e,this.swipeEnabledList&&(this.slides.allowTouchMove=this.swipeEnabledList[this.currentStep])}handleSlideChange(){this.ngZone.run(()=>{this.keyboard.hide();const e=this.slides?this.slides.activeIndex:this.slideOpts.initialSlide;if(e===this.steps.length)return this.updateStepStatuses(this.currentStep),void this.finishJourney();this.updateStepStatuses(e),this.currentStep=e,this.slides&&(this.slides.allowTouchMove=this.swipeEnabledList[this.currentStep]),this.journeyService.publishCurrentStep(this.currentStep),this.isWeb&&this.scrollToTopPublisher.publish(void 0)})}updateStepStatuses(e,t=this.currentStep,n=!0){if(this.updateStatuses){const i=[];if(n){const e=this.getUpdatedCompleteStep(t);e&&i.push(this.journeyService.removeContent(e))}this.steps[e].status||(0===e&&this.eventTracking.eventTracking({eventName:"Journey Not Completed",journeyID:this.journey.journeyID,journeyName:this.journey.journeyName}),this.steps[e].status=a.q.inProgress,i.push(this.journeyService.removeContent(this.steps[e]))),this.saveProgress(i),this.journeyService.updateJourneySteps(this.steps,this.journey.journeyID),e>0&&(this.progressBarSteps[e-1].status=a.q.completed),this.progressBarSteps[e].status=a.q.notStarted}this.updateStatuses=!0}getUpdatedCompleteStep(e){let t;return(this.steps[e].status!==a.q.completed||this.steps[e].answer!==JSON.stringify(this.steps[e].value))&&(this.steps[e].status!==a.q.completed&&e===this.steps.length-1&&this.eventTracking.eventTracking({eventName:"Journey Not Completed",journeyID:this.journey.journeyID,updateInd:"Y",journeyName:this.journey.journeyName}),this.steps[e].status=a.q.completed,this.steps[e].value&&this.steps[e].value!=={}&&(this.steps[e].answer=JSON.stringify(this.steps[e].value)),t=this.steps[e]),t}saveProgress(e){e.length>0&&this.journeyService.saveProgress(e)}handleContinueClick(e){this.currentStep<this.steps.length-1?this.slides.slideNext():(this.updateStepStatuses(this.currentStep),e.route?this.finishJourney():this.leaveJourney())}handleBackClick(){0!==this.currentStep&&this.slides.slideTo(this.currentStep-1)}finishJourney(){this.stepToSave=0,this.leaveJourney(),this.journeyService.isSummaryStepCompleted()?this.isWeb?(this.refreshJourneyStatusPublisher.publish(void 0),this.router.navigate(["/journeys/journey/"+this.journey.journeyID+"/overview"],{queryParams:{journeyType:"all"}})):this.router.navigateByUrl("/journeys/journey/"+this.journey.journeyID+"/overview"):this.router.navigateByUrl("/journeys")}scrollToTop(){this.isWeb||this.stepEls.get(this.currentStep).nativeElement.scrollIntoView({behavior:"auto",block:"center",inline:"end"})}updateSwipeEnabled(e){this.swipeEnabledList[e.index]=e.swipeEnabled,this.slides&&(this.slides.allowTouchMove=this.swipeEnabledList[this.currentStep])}leaveJourney(){if(this.journey&&(this.journeyService.updateJourneySteps(this.steps,this.journey.journeyID),this.updateStatuses=!1,this.saveLastStep)){this.saveLastStep=!1;const e=this.stepToSave||0===this.stepToSave?this.stepToSave:this.currentStep;this.saveProgress([this.journeyService.removeContent(this.steps[e])]),this.journey.lastModifiedStepIndex=e,this.journeyService.setCurrentJourney(this.journey,!0),this.stepToSave=void 0}}ionViewWillLeave(){this.leaveJourney()}ngOnDestroy(){this.subscription.unsubscribe(),this.isWeb&&this.leaveJourney()}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(h.c),r.Y36(d.W),r.Y36(r.R0b),r.Y36(o.F0),r.Y36(g.O),r.Y36(m.f),r.Y36(y.O))},e.\u0275cmp=r.Xpm({type:e,selectors:[["journeys-steps"]],viewQuery:function(e,t){if(1&e&&r.Gf(Ge,5,r.SBq),2&e){let e;r.iGM(e=r.CRH())&&(t.stepEls=e)}},decls:4,vars:4,consts:[[3,"steps","currentStep"],[3,"config","swiper","slideChange","slideChangeTransitionEnd"],[4,"ngFor","ngForOf"],["swiperSlide",""],[1,"steps-content"],[3,"index","step","currentStep","journeyId","continueClick","backClick","swipeEnabled"],["journeyStep",""]],template:function(e,t){1&e&&(r._UZ(0,"app-step-progress-bar",0),r.TgZ(1,"swiper",1),r.NdJ("swiper",function(e){return t.setSwiperInstance(e)})("slideChange",function(){return t.handleSlideChange()})("slideChangeTransitionEnd",function(){return t.scrollToTop()}),r.YNc(2,et,1,0,void 0,2),r.YNc(3,tt,1,0,"ng-template",3),r.qZA()),2&e&&(r.Q6J("steps",t.progressBarSteps)("currentStep",t.currentStep),r.xp6(1),r.Q6J("config",t.slideOpts),r.xp6(1),r.Q6J("ngForOf",t.steps))},directives:[f.b,C.nF,i.sg,C.YC,Xe],styles:["[_nghost-%COMP%]{height:100%;display:block}[_nghost-%COMP%]   .steps-content[_ngcontent-%COMP%]{height:100%;width:100%}[_nghost-%COMP%]   app-step-progress-bar[_ngcontent-%COMP%]{margin:20px auto}[_nghost-%COMP%]   swiper[_ngcontent-%COMP%]{height:calc(100% - 48px);overflow-y:scroll}[_nghost-%COMP%]   swiper[_ngcontent-%COMP%]   journeys-steps-step[_ngcontent-%COMP%]{display:block;height:100%;width:100%}[_nghost-%COMP%]   .web-steps[_ngcontent-%COMP%]{margin:0 36px}"]}),e})()}];let it=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({imports:[[o.Bz.forChild(nt)],o.Bz]}),e})();var st=n(76192),ot=n(37707),rt=n(21594);let ct=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({imports:[[s.Pc,i.ez,it,C.kz,st.q,ot.g,rt.k]]}),e})()},42597:function(e,t,n){n.d(t,{f:function(){return a}});var i=n(64762),s=n(51222),o=n(57700),r=n(7935),c=n(37364);let a=(()=>{class e{constructor(e,t){this.baseService=e,this.utilityService=t,this.endPoints=s.z,this.endPoints=this.utilityService.appendBaseUrlToEndpoints(s.z)}eventTracking(e){return(0,i.mG)(this,void 0,void 0,function*(){e.createdBy="myvoyage",e.subscriberKey=(yield this.getSubscriberKey()).subscriberKey,yield this.baseService.post(this.endPoints.eventTracking,e)})}getSubscriberKey(){return this.subscriberKeyPromise||(this.subscriberKeyPromise=this.baseService.get(this.endPoints.subscriberKey)),this.subscriberKeyPromise}}return e.\u0275fac=function(t){return new(t||e)(o.LFG(r.bQ),o.LFG(c.O))},e.\u0275prov=o.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()}}]);