"use strict";(self.webpackChunkmyvoyage=self.webpackChunkmyvoyage||[]).push([[1040],{30885:function(t,e,s){s.d(e,{l:function(){return n}});const n="272c2587-6b79-d874-e053-d22aac0a0939"},61040:function(t,e,s){s.d(e,{B:function(){return f}});var n=s(64762),i=s(51222),a=s(75319),o=s(79765),c=s(26215),r=s(80226),l=s(94402),u=s(16738),d=s(28049),h=s(88002),p=s(57700),g=s(37364),v=s(7935),y=s(69587),m=s(38795),S=s(25552),A=s(47823),b=s(21728);let f=(()=>{class t{constructor(t,e,s,n,l,d,h){this.utilityService=t,this.baseService=e,this.accessService=s,this.inAppBrowserService=n,this.mxService=l,this.loadingController=d,this.authService=h,this.endPoints=i.z,this.predictiveMessage=null,this.predictiveMessage$=null,this.currSessionExp=0,this.participantData=null,this.participantSubject=null,this.subscription=new a.w,this.externalLinksData=null,this.externalLinksSubject=null,this.selectedTab$=new o.xQ,this.allAccountData=null,this.allAccountSubject=null,this.aggregatedAccountDataSubject=null,this.accountsContent$=null,this.sort=new c.X(""),this.filterSortValues=null,this.filt=new c.X([]),this.balanceHistoryGraphData=null,this.balanceHistoryGraphSubject=null,this.storedFilterKey=[],this.storedSortKey="",this.today=new Date,this.priorDate=u((new Date).setDate(this.today.getDate()-90)).format("YYYY/MM/DD"),this.currentDate=u(Date.now()).format("YYYY/MM/DD"),this.endPoints=this.utilityService.appendBaseUrlToEndpoints(i.z),this.environment=this.utilityService.getEnvironment(),this.loginEndpoints=this.utilityService.appendBaseUrlToEndpoints(i.q,this.environment.loginBaseUrl),this.participantSubject=new r.t(1),this.balanceHistoryGraphSubject=new r.t(1),this.externalLinksSubject=new r.t(1),this.allAccountSubject=new r.t(1),this.aggregatedAccountDataSubject=new r.t(1),this.account=JSON.parse(localStorage.getItem("currentAccount")),this.isWeb=this.utilityService.getIsWeb(),this.predictiveMessage$=new r.t(1),this.accountsContent$=new r.t(1)}getJSON(t=!1){return(0,n.mG)(this,void 0,void 0,function*(){if(!this.accountInfo||t){const t=yield this.baseService.get(this.endPoints.allAccounts+(new Date).getTime());t.hsaAccounts=yield this.getHSAAccounts(),this.accountInfo=t}return this.accountInfo})}getHSAorFSA(){return(0,n.mG)(this,void 0,void 0,function*(){if(!this.hasHSAorFSA){const t={hsa:!1,fsa:!1};(yield this.getJSON()).hsaAccounts.accounts.forEach(e=>{"HSA"==e.hsaAccountData.Plan_Type?t.hsa=!0:"MedicalFlex"==e.hsaAccountData.Plan_Type&&(t.fsa=!0)}),(yield this.mxService.getMxAccountConnect().pipe((0,d.P)()).toPromise()).accounts.forEach(e=>{"Savings"===e.account_type_name&&"HEALTH"===e.account_subtype_name&&(t.hsa=!0)}),this.hasHSAorFSA=t}return this.hasHSAorFSA})}getAggregatedAccounts(t=!1){if(!this.aggregatedAcctData||t){this.aggregatedAcctData=(0,l.D)(this.baseService.get(this.endPoints.aggregatedAccounts+(new Date).getTime()));const t=this.aggregatedAcctData.subscribe(t=>{this.aggregatedAccountDataSubject.next(t)});this.subscription.add(t)}return this.aggregatedAccountDataSubject}getSessionId(){return(0,n.mG)(this,void 0,void 0,function*(){if(!this.sessionId){const{clientDomain:t,clientId:e}=yield this.accessService.checkMyvoyageAccess();this.sessionId=yield this.initSession(t,e)}return this.sessionId})}initSession(t,e){return(0,n.mG)(this,void 0,void 0,function*(){if(!this.sessionId||(new Date).getTime()>this.currSessionExp){const s={sessionInfo:{domain:t,newSession:!1,page:"MYVOYA",clientId:e,timeoutMinutes:15,application:"MYVOYA"},allowDuplicate:!1},n=yield this.baseService.post(this.endPoints.InitSession,s);n&&(this.currSessionExp=(new Date).getTime()+84e4,this.sessionId=n.sessionId)}return this.sessionId})}getExternalLinks(t=!1){return(!this.externalLinksData||t)&&this.accessService.checkMyvoyageAccess().then(t=>(0,n.mG)(this,void 0,void 0,function*(){const e=t.clientDomain,s=t.clientId,n=yield this.initSession(e,s),i=this.endPoints.externalLinks.replace("{planID}",this.account.planId).replace("{client}",s).replace("{sessionID}",n).replace("{domain}",e);this.externalLinksData=(0,l.D)(this.baseService.get(i));const a=this.externalLinksData.subscribe(t=>{this.externalLinksSubject.next(t)});this.subscription.add(a)})),this.externalLinksSubject}getVestedBalance(){return(0,n.mG)(this,void 0,void 0,function*(){return this.baseService.get(this.endPoints.vestedBalance+this.account.clientId+"/"+this.account.planId)})}getGainLoss(){return(0,n.mG)(this,void 0,void 0,function*(){return this.baseService.get(this.endPoints.gainLoss+this.account.clientId+"/"+this.account.planId)})}getLoan(){return(0,n.mG)(this,void 0,void 0,function*(){return this.baseService.get(this.endPoints.loan+this.account.clientId+"/"+this.account.planId)})}getRateOfReturn(){return(0,n.mG)(this,void 0,void 0,function*(){return this.baseService.get(this.endPoints.rateOfReturn+this.account.clientId+"/"+this.account.planId)})}getPlanAdviceStatuses(){return(0,n.mG)(this,void 0,void 0,function*(){return this.baseService.get(this.endPoints.planAdviceStatus)})}getDividends(){return this.baseService.get(this.endPoints.dividend+this.account.clientId+"/"+this.account.planId)}getContribution(){return(0,n.mG)(this,void 0,void 0,function*(){return this.baseService.get(this.endPoints.contribution+this.account.clientId+"/"+this.account.planId)})}getYTDContribution(){return(0,n.mG)(this,void 0,void 0,function*(){return this.baseService.get(this.endPoints.ytdcontribution+this.account.clientId+"/"+this.account.planId)})}getEmployersMatch(){return(0,n.mG)(this,void 0,void 0,function*(){return this.baseService.get(this.endPoints.employersmatch+this.account.clientId+"/"+this.account.planId)})}getTransaction(){return(0,n.mG)(this,void 0,void 0,function*(){return this.account.isHSAAccount?this.getHSATransactions():this.baseService.get(this.endPoints.transaction+this.account.clientId+"/"+this.account.planId+"?tranType=ALL&startDate="+this.priorDate+"&endDate="+this.currentDate)})}getAccount(){return this.account||(this.account=JSON.parse(localStorage.getItem("currentAccount"))),this.account}setAccount(t){localStorage.setItem("currentAccount",JSON.stringify(t)),this.account=t}getParticipant(t=!1){if(!this.participantData||t){this.participantData=(0,l.D)(this.baseService.get(this.endPoints.participantData));const t=this.participantData.subscribe(t=>{this.participantSubject.next(t)});this.subscription.add(t)}return this.participantSubject}setParticipant(t){this.participantSubject.next(t)}getOffercode(){return(0,n.mG)(this,void 0,void 0,function*(){return this.offercodes||(this.offercodes=yield this.baseService.get(this.endPoints.getOfferCode)),this.offercodes})}getPredict(){return(0,n.mG)(this,void 0,void 0,function*(){return new Promise(t=>{this.subscription.add(this.fetchPredictiveMessage().subscribe(e=>{t(e.OfferCodeAdviceJSON?JSON.parse(e.OfferCodeAdviceJSON):null)}))})})}getCarouselData(){return(0,n.mG)(this,void 0,void 0,function*(){return new Promise(t=>{this.subscription.add(this.fetchPredictiveMessage().subscribe(e=>{t(e.OfferCodeJSON?JSON.parse(e.OfferCodeJSON):null)}))})})}fetchBalanceHistoryGraph(){if(!this.balanceHistoryGraphData){this.balanceHistoryGraphData=(0,l.D)(this.baseService.get(this.endPoints.balancehistory));const t=this.balanceHistoryGraphData.subscribe(t=>{this.balanceHistoryGraphSubject.next(t)});this.subscription.add(t)}return this.balanceHistoryGraphSubject}fetchPredictiveMessage(t=!1){if(!this.predictiveMessage||t){this.predictiveMessage=(0,l.D)(this.baseService.get(this.endPoints.predictiveMessage));const t=this.predictiveMessage.subscribe(t=>{this.predictiveMessage$.next(t)},t=>{console.log(t),this.predictiveMessage$.next({})});this.subscription.add(t)}return this.predictiveMessage$}posNegSymbol(t){return t&&+t?t<0?"":"+":""}getSelectedTab$(){return this.selectedTab$}publishSelectedTab(t){this.selectedTab$.next(t)}getAllAccounts(t=!1){if(!this.allAccountData||t){this.allAccountData=(0,l.D)(this.getJSON());const t=this.allAccountData.subscribe(t=>{this.allAccountSubject.next(t)});this.subscription.add(t)}return this.allAccountSubject}getAccountDataBasedOnType(t,e,s=!1){return this.getAllAccounts(s).pipe((0,h.U)(s=>s[e].accounts.filter(e=>e.planId===t&&!e.isVoyaAccessPlan)[0]))}getAccountDataWithoutType(t,e=!1){return this.getAllAccounts(e).pipe((0,h.U)(e=>e.retirementAccounts.accounts.filter(e=>e.planId===t&&!e.isVoyaAccessPlan)[0]||e.stockAccounts.accounts.filter(e=>e.planId===t&&!e.isVoyaAccessPlan)[0]||e.vendorAccounts.accounts.filter(e=>e.planId===t&&!e.isVoyaAccessPlan)[0]||e.hsaAccounts.accounts.filter(e=>e.planId===t&&!e.isVoyaAccessPlan)[0]))}filterIsVoyaAccessPlanAccountData(t,e,s,n){return t[e].accounts.filter(t=>t.planId===s&&t.agreementId===n&&t.isVoyaAccessPlan)[0]}getIsVoyaAccessPlanAccountData(t,e,s=!1){return this.getAllAccounts(s).pipe((0,h.U)(s=>this.filterIsVoyaAccessPlanAccountData(s,"retirementAccounts",t,e)||this.filterIsVoyaAccessPlanAccountData(s,"stockAccounts",t,e)||this.filterIsVoyaAccessPlanAccountData(s,"vendorAccounts",t,e)||this.filterIsVoyaAccessPlanAccountData(s,"hsaAccounts",t,e)))}openPwebAccountLink(t,e){return(0,n.mG)(this,void 0,void 0,function*(){if(this.utilityService.getIsWeb())window.open(t,e||"_blank");else{const e=yield this.loadingController.create({translucent:!0});yield e.present();const s=yield this.authService.getAccessToken(),n={client_id:this.environment.authTokenExchangeClient,subject_token:s,subject_token_type:"access_token",audience:this.loginEndpoints.samlAudience,grant_type:"urn:ietf:params:oauth:grant-type:token-exchange",requested_token_type:"access_token",scope:"urn:voya:federation"},i=yield this.baseService.postUrlEncoded(this.environment.tokenBaseUrl+"oidcop/sps/oauth/oauth20/token",n,{});e.dismiss();const a=this.encodePwebAccountLink(t,i.access_token);this.inAppBrowserService.openSystemBrowser(a)}})}encodePwebAccountLink(t,e){return this.loginEndpoints.authService.replace("[exchanged_access_token]",e)+encodeURIComponent(t)}openInAppBrowser(t){this.inAppBrowserService.openSystemBrowser(t)}transformHSAAccount(t){let e=t.CashBalance;return"HSA"===t.Plan_Type&&(e=t.TotalBalance),{accountTitle:t.Plan_Name,accountBalance:e.toString(),accountBalanceAsOf:t.AsOfDate,sourceSystem:"",suppressTab:!1,voyaSavings:"",includedInOrangeMoney:!1,accountAllowedForMyVoya:!1,clientId:"",planId:t.Plan_ID.toString(),planType:t.Plan_Type,accountNumber:"",needOMAutomaticUpdate:!1,planName:t.Plan_Name,mpStatus:"",clientAllowed4myVoyaOrSSO:!1,useMyvoyaHomepage:!1,advisorNonMoneyTxnAllowed:!1,advisorMoneyTxnAllowed:!1,nqPenCalPlan:!1,enrollmentAllowed:!1,autoEnrollmentAllowed:!1,vruPhoneNumber:"",rmdRecurringPaymentInd:"",navigateToRSPortfolio:!1,planLink:"",openDetailInNewWindow:!1,nqPlan:!1,new:!1,eligibleForOrangeMoney:!1,iraplan:!1,xsellRestricted:!1,isVoyaAccessPlan:!1,isRestrictedRetirementPlan:!1,isVDAApplication:!1,isVendorPlan:!1,isHSAAccount:!0,hsaAccountData:t}}getHSAAccounts(){var t;return(0,n.mG)(this,void 0,void 0,function*(){const e=yield this.baseService.get(this.endPoints.allHSAAccounts);if(!e)return{dataStatus:"failed",errorCode:"",accounts:[]};const s=[];return null===(t=null==e?void 0:e.AllAccountsBalance)||void 0===t||t.forEach(t=>{s.push(this.transformHSAAccount(t))}),{dataStatus:e.Status,errorCode:"",accounts:s}})}transformHSATransaction(t){return{tradeDate:t.Transaction_Date,type:"",tranCode:t.Transaction_Code,cash:t.Transaction_Amt,clientId:"",planId:t.Plan_ID.toString(),participantId:"",unit_or_unshrs:"",br140_new_val_cash:"",br161_shr_price:"",br009_run_date:"",br011_seq_num:"",br980_ACT_NAME:t.Transaction_Description,br172_vouch_num:"",isHSATransaction:!0,hsaTransactionData:t}}getHSATransactions(){var t,e;return(0,n.mG)(this,void 0,void 0,function*(){const s=null===(t=this.account.hsaAccountData)||void 0===t?void 0:t.HAS_PARTY_ID,n=null===(e=this.account.hsaAccountData)||void 0===e?void 0:e.Plan_ID,i=this.endPoints.hsaTransactions+s+"/"+n,a=yield this.baseService.get(i),o=[];return a.AllAccountsTransactions.forEach(t=>{o.push(this.transformHSATransaction(t))}),{transactionHistories:o}})}getDisplayNameOrFirst(t){return t.displayName&&t.displayName.length>0&&t.displayName.toLocaleLowerCase()!=t.lastName.toLocaleLowerCase()+", "+t.firstName.toLocaleLowerCase()?t.displayName:t.firstName}getDisplayNameOrFirstOrLast(t){const e=t.displayName?t.displayName:"",s=t.firstName?t.firstName:"",n=t.lastName?t.lastName:"";return e.length>0&&(e.includes(",")&&e.toLocaleLowerCase()!=s.toLocaleLowerCase()+", "+n.toLocaleLowerCase()||!e.includes(",")&&e.toLocaleLowerCase()!=s.toLocaleLowerCase()+" "+n.toLocaleLowerCase())?e:s.length>0?s:n}getDisplayNameOrFirstLast(t){const e=t.displayName?t.displayName:"",s=t.firstName?t.firstName:"",n=t.lastName?t.lastName:"";return e.length>0&&e.toLocaleLowerCase()!=s.toLocaleLowerCase()+", "+n.toLocaleLowerCase()?e:s+" "+n}changeSort(t){this.sort.next(t)}currentSort(){return this.sort.asObservable()}getAddAcctModalContent(){return(0,n.mG)(this,void 0,void 0,function*(){return new Promise(t=>{this.subscription.add(this.fetchAccountsContent().subscribe(e=>{t(e.WorkplaceAddAccountsModalJSON?JSON.parse(e.WorkplaceAddAccountsModalJSON):null)}))})})}getSectionValues(){return(0,n.mG)(this,void 0,void 0,function*(){return new Promise(t=>{this.subscription.add(this.fetchAccountsContent().subscribe(e=>{t(e.HSA_Transaction_FilterSort_SelectionList?JSON.parse(e.HSA_Transaction_FilterSort_SelectionList):null)}))})})}fetchAccountsContent(t=!1){if(!this.accountsContent||t){this.accountsContent=(0,l.D)(this.baseService.get(this.endPoints.accountsContent));const t=this.accountsContent.subscribe(t=>{this.accountsContent$.next(t)},t=>{console.log(t),this.accountsContent$.next({})});this.subscription.add(t)}return this.accountsContent$}changeFilt(t){this.filt.next(t)}setFiltSlcted(t){this.storedFilterKey=t,localStorage.setItem("storedFilterKey",JSON.stringify(t))}getFiltSlcted(){return this.storedFilterKey||(this.storedFilterKey=JSON.parse(localStorage.getItem("storedFilterKey"))),this.storedFilterKey}currentFilter(){return this.filt.asObservable()}setSortSlcted(t){this.storedSortKey=t,localStorage.setItem("storedSortKey",JSON.stringify(t))}getSortSlcted(){return this.storedSortKey||(this.storedSortKey=JSON.parse(localStorage.getItem("storedSortKey"))),this.storedSortKey}ngOnDestroy(){this.subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(p.LFG(g.O),p.LFG(v.bQ),p.LFG(y.v),p.LFG(m.a),p.LFG(S.C),p.LFG(A.HT),p.LFG(b.$))},t.\u0275prov=p.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},51222:function(t,e,s){s.d(e,{z:function(){return a},q:function(){return o}});var n=s(30885);const i="myvoyage/ws/ers/",a={allAccounts:i+"service/all/accounts?s=",aggregatedAccounts:i+"dashboard/accounts?s=",participantData:`myvoya/ws/ers/data/customers/${n.l}/participantprofile?fromMDM=Y`,vestedBalance:i+"rsdata/balance/vested/",gainLoss:i+"rsdata/balancehistory/",loan:i+"rsdata/loans/outstanding/",rateOfReturn:i+"rsdata/prr/",planAdviceStatus:i+"rsdata/aboutme/plans/advicestatus",omEligibility:"myvoya/ws/ers/site/configurations/retirement/orangemoney/eligibility",getrrinfo:`myvoya/ws/ers/service/customers/${n.l}/orangemoney/getrrinfo`,getpension:`myvoya/ws/ers/service/customers/${n.l}/orangemoney/getpension`,getsrbenefits:`myvoya/ws/ers/service/customers/${n.l}/orangemoney/getsrbenefits/`,getssbenefits:`myvoya/ws/ers/service/customers/${n.l}/orangemoney/getssbenefits`,updateOptOut:`myvoya/ws/ers/service/customers/${n.l}/orangemoney/optout`,saveMadlib:`myvoya/ws/ers/service/customers/${n.l}/orangemoney/savemadlib`,contribution:i+"participation/history/contributions/",ytdcontribution:i+"contrib/paycontrib/",employersmatch:i+"display/message/employermatch/",dividend:i+"participation/history/dividend/",saveRetirementAgeNonFE:`myvoya/ws/ers/service/customers/${n.l}/orangemoney/validate`,saveRetirementAgeFE:`myvoya/ws/ers/service/customers/${n.l}/orangemoney/fevalidate`,saveSalaryFE:`myvoya/ws/ers/service/customers/${n.l}/orangemoney/feshowmeimpact`,saveSalaryNonFE:`myvoya/ws/ers/service/customers/${n.l}/orangemoney/saveprofile`,transaction:i+"participation/history/transactions/",externalLinks:i+"service/navlinks/{client}/{planID}?s={sessionID}&domain={domain}",InitSession:i+"emvdata/smservice/session",eventTracking:i+"service/eventTracking",predictiveMessage:i+"content/section/messages",getOfferCode:i+"rsdata/accordion",allHSAAccounts:"myvoyage/wex/accountBalances",hsaTransactions:"myvoyage/wex/accountTransactions/",accountsContent:i+"content/section/accounts",subscriberKey:i+"service/sfmcUserInfo",balancehistory:i+"service/portfolioBalanceHistory"},o={authService:"mga/sps/authsvc?PolicyId=urn:ibm:security:authentication:asf:login_access_token_querystring&access_token=[exchanged_access_token]&URL=",samlAudience:"saml/sps/saml-idp-login/saml20"}}}]);