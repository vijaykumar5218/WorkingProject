{"ast":null,"code":"import { __awaiter } from \"tslib\";\nimport { first } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@shared-lib/services/journey/journey.service\";\nexport let JourneysGuard = /*#__PURE__*/(() => {\n  class JourneysGuard {\n    constructor(journeyService) {\n      this.journeyService = journeyService;\n    }\n\n    canActivate(route) {\n      return __awaiter(this, void 0, void 0, function* () {\n        yield this.setData(parseInt(route.params.id));\n        return true;\n      });\n    }\n\n    setData(jID) {\n      return __awaiter(this, void 0, void 0, function* () {\n        const journeys = yield this.journeyService.fetchJourneys().pipe(first()).toPromise();\n        const journeyIndex = journeys.all.findIndex(journey => journey.journeyID === jID);\n\n        if (journeyIndex != -1) {\n          yield this.journeyService.setStepContent(journeys.all[journeyIndex]);\n          this.journeyService.setCurrentJourney(journeys.all[journeyIndex]);\n        }\n      });\n    }\n\n  }\n\n  JourneysGuard.ɵfac = function JourneysGuard_Factory(t) {\n    return new (t || JourneysGuard)(i0.ɵɵinject(i1.JourneyService));\n  };\n\n  JourneysGuard.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: JourneysGuard,\n    factory: JourneysGuard.ɵfac,\n    providedIn: 'root'\n  });\n  return JourneysGuard;\n})();","map":null,"metadata":{},"sourceType":"module"}