{"ast":null,"code":"import { __awaiter } from \"tslib\";\nimport pageText from '@shared-lib/services/account/models/retirement-account/info/info-tab.json';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@shared-lib/services/account/account.service\";\nimport * as i2 from \"@ionic/angular\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"../../../../components/loading-text/loading-text.component\";\nimport * as i5 from \"../../components/filter-sort/filter-sort.component\";\n\nfunction TransactionsPage_ion_row_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-row\", 4);\n    i0.ɵɵelementStart(1, \"ion-col\", 5);\n    i0.ɵɵelementStart(2, \"app-loading-text\", 6);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"isLoading\", ctx_r0.transactionHistory == undefined);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r0.pageText.noTransactions);\n  }\n}\n\nfunction TransactionsPage_ng_template_2_app_filter_sort_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"app-filter-sort\", 10);\n  }\n\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"sortList\", ctx_r4.sortListOptions)(\"filterList\", ctx_r4.filterOptions);\n  }\n}\n\nfunction TransactionsPage_ng_template_2_ion_row_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-row\");\n    i0.ɵɵelementStart(1, \"ion-col\", 11);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r5.pageText.last90Days, \" \");\n  }\n}\n\nfunction TransactionsPage_ng_template_2_ion_grid_2_ion_col_2_span_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 20);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const trans_r7 = i0.ɵɵnextContext(2).$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(trans_r7.br980_ACT_NAME);\n  }\n}\n\nfunction TransactionsPage_ng_template_2_ion_grid_2_ion_col_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-col\", 17);\n    i0.ɵɵelementStart(1, \"span\", 18);\n    i0.ɵɵelementStart(2, \"strong\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(4, TransactionsPage_ng_template_2_ion_grid_2_ion_col_2_span_4_Template, 2, 1, \"span\", 19);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const trans_r7 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate((trans_r7 == null ? null : trans_r7.hsaTransactionData == null ? null : trans_r7.hsaTransactionData.Provider_Name.length) > 0 ? trans_r7 == null ? null : trans_r7.hsaTransactionData == null ? null : trans_r7.hsaTransactionData.Provider_Name : trans_r7.br980_ACT_NAME);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", trans_r7.hsaTransactionData.Provider_Name.length > 0);\n  }\n}\n\nfunction TransactionsPage_ng_template_2_ion_grid_2_ng_template_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-col\", 17);\n    i0.ɵɵelementStart(1, \"span\", 18);\n    i0.ɵɵelementStart(2, \"strong\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const trans_r7 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(trans_r7.br980_ACT_NAME);\n  }\n}\n\nconst _c0 = function (a0, a1) {\n  return {\n    \"positive\": a0,\n    \"negative\": a1\n  };\n};\n\nfunction TransactionsPage_ng_template_2_ion_grid_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-grid\");\n    i0.ɵɵelementStart(1, \"ion-row\");\n    i0.ɵɵtemplate(2, TransactionsPage_ng_template_2_ion_grid_2_ion_col_2_Template, 5, 2, \"ion-col\", 12);\n    i0.ɵɵtemplate(3, TransactionsPage_ng_template_2_ion_grid_2_ng_template_3_Template, 4, 1, \"ng-template\", null, 2, i0.ɵɵtemplateRefExtractor);\n    i0.ɵɵelementStart(5, \"ion-col\", 13);\n    i0.ɵɵelementStart(6, \"span\", 14);\n    i0.ɵɵelementStart(7, \"app-loading-text\", 6);\n    i0.ɵɵtext(8);\n    i0.ɵɵpipe(9, \"currency\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"ion-row\");\n    i0.ɵɵelementStart(11, \"ion-col\", 15);\n    i0.ɵɵelementStart(12, \"span\");\n    i0.ɵɵtext(13);\n    i0.ɵɵpipe(14, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(15, \"hr\", 16);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const trans_r7 = ctx.$implicit;\n\n    const _r9 = i0.ɵɵreference(4);\n\n    const ctx_r6 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", trans_r7.isHSATransaction)(\"ngIfElse\", _r9);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction2(14, _c0, trans_r7.cash > 0, trans_r7.cash < 0));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"isLoading\", trans_r7.cash == null);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate2(\"\", ctx_r6.posNegSymbol(trans_r7.cash), \"\", i0.ɵɵpipeBind3(9, 7, trans_r7.cash, \"USD\", \"symbol\"), \"\");\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(14, 11, trans_r7.tradeDate, \"MMMM-d-y\"));\n  }\n}\n\nfunction TransactionsPage_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtemplate(0, TransactionsPage_ng_template_2_app_filter_sort_0_Template, 1, 2, \"app-filter-sort\", 7);\n    i0.ɵɵtemplate(1, TransactionsPage_ng_template_2_ion_row_1_Template, 3, 1, \"ion-row\", 8);\n    i0.ɵɵtemplate(2, TransactionsPage_ng_template_2_ion_grid_2_Template, 16, 17, \"ion-grid\", 9);\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.isHsa);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r2.isHsa);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.filteredTransactionHistory);\n  }\n}\n\nfunction TransactionsPage_ion_row_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r16 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"ion-row\", 21);\n    i0.ɵɵelementStart(1, \"ion-col\");\n    i0.ɵɵelementStart(2, \"ion-button\", 22);\n    i0.ɵɵlistener(\"click\", function TransactionsPage_ion_row_4_Template_ion_button_click_2_listener() {\n      i0.ɵɵrestoreView(_r16);\n      const ctx_r15 = i0.ɵɵnextContext();\n      return ctx_r15.viewMoreClicked();\n    });\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"\", ctx_r3.pageText.viewmore, \" \");\n  }\n}\n\nexport let TransactionsPage = /*#__PURE__*/(() => {\n  class TransactionsPage {\n    constructor(accountService) {\n      this.accountService = accountService;\n      this.pageText = pageText;\n      this.isHsa = false;\n      this.selectedSortValue = '';\n    }\n\n    ionViewWillEnter() {\n      return __awaiter(this, void 0, void 0, function* () {\n        this.accountService.getTransaction().then(data => {\n          this.transactionHistory = data.transactionHistories;\n          this.checkAndDisableFilters();\n          this.filteredTransactionHistory = this.transactionHistory;\n        });\n        this.accountService.getExternalLinks().subscribe(links => {\n          this.extLink = links.find(link => link.id === 'ACCT_HISTORY_LANDING');\n        });\n        this.isHsa = this.accountService.getAccount().isHSAAccount;\n        this.getSortOptions();\n        this.getSectionValue();\n        this.getFilterOptions();\n        this.accountService.setSortSlcted(this.selectedSortValue);\n      });\n    }\n\n    viewMoreClicked() {\n      const url = decodeURIComponent(this.extLink.link);\n      this.accountService.openPwebAccountLink(url);\n    }\n\n    posNegSymbol(val) {\n      return this.accountService.posNegSymbol(val);\n    }\n\n    getSectionValue() {\n      this.accountService.getSectionValues().then(data => {\n        this.filterOptions = data.filterList;\n        this.checkAndDisableFilters();\n        this.sortListOptions = data.sortList;\n      });\n    }\n\n    getSortOptions() {\n      this.subscriptionSort = this.accountService.currentSort().subscribe(data => {\n        this.sortData(data);\n      });\n    }\n\n    sortData(data) {\n      if (data == 'asc') {\n        this.filteredTransactionHistory.sort((a, b) => {\n          return new Date(a.tradeDate).getTime() - new Date(b.tradeDate).getTime();\n        });\n      }\n\n      if (data == 'dsc') {\n        this.filteredTransactionHistory.sort((a, b) => {\n          return new Date(b.tradeDate).getTime() - new Date(a.tradeDate).getTime();\n        });\n      }\n\n      if (data == 'low') {\n        this.filteredTransactionHistory.sort((a, b) => {\n          return a.cash - b.cash;\n        });\n      }\n\n      if (data == 'high') {\n        this.filteredTransactionHistory.sort((a, b) => {\n          return b.cash - a.cash;\n        });\n      }\n    }\n\n    getFilterOptions() {\n      this.subscriptionFilter = this.accountService.currentFilter().subscribe(data => {\n        this.filterData(data);\n        this.storeSelectedFilter = data;\n      });\n    }\n\n    checkAndDisableFilters() {\n      if (!this.filterData || !this.transactionHistory) {\n        return;\n      }\n\n      this.filterOptions[0].values.forEach(filterVal => {\n        let hasVal = false;\n        this.transactionHistory.forEach(el => {\n          if (filterVal.key.includes(el.tranCode)) {\n            hasVal = true;\n          }\n        });\n        filterVal.enabled = hasVal;\n      });\n    }\n\n    filterData(data) {\n      var _a, _b;\n\n      if ((_a = data[0]) === null || _a === void 0 ? void 0 : _a.values.length) {\n        const myArrayFiltered = (_b = this.transactionHistory) === null || _b === void 0 ? void 0 : _b.filter(el => {\n          var _a;\n\n          return (_a = data[0]) === null || _a === void 0 ? void 0 : _a.values.some(f => {\n            return f.key.includes(el.tranCode);\n          });\n        });\n        this.filteredTransactionHistory = myArrayFiltered;\n      } else {\n        this.filteredTransactionHistory = this.transactionHistory;\n      }\n    }\n\n  }\n\n  TransactionsPage.ɵfac = function TransactionsPage_Factory(t) {\n    return new (t || TransactionsPage)(i0.ɵɵdirectiveInject(i1.AccountService));\n  };\n\n  TransactionsPage.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: TransactionsPage,\n    selectors: [[\"app-transactions\"]],\n    decls: 5,\n    vars: 4,\n    consts: [[1, \"transaction-card\", 3, \"ngClass\"], [\"class\", \"empty-row\", 4, \"ngIf\", \"ngIfElse\"], [\"elseBlock\", \"\"], [\"class\", \"mt-10\", 4, \"ngIf\"], [1, \"empty-row\"], [\"size\", \"12\", 1, \"emptytransactions\"], [3, \"isLoading\"], [3, \"sortList\", \"filterList\", 4, \"ngIf\"], [4, \"ngIf\"], [4, \"ngFor\", \"ngForOf\"], [3, \"sortList\", \"filterList\"], [\"size\", \"12\", 1, \"ion-text-end\", \"lastdays\"], [\"class\", \"ion-text-start\", \"size\", \"8\", 4, \"ngIf\", \"ngIfElse\"], [\"size\", \"4\", 1, \"ion-text-end\"], [1, \"amount\", 3, \"ngClass\"], [1, \"ion-text-start\", \"sub-name\"], [1, \"line\"], [\"size\", \"8\", 1, \"ion-text-start\"], [1, \"name\"], [\"class\", \"name sub_name\", 4, \"ngIf\"], [1, \"name\", \"sub_name\"], [1, \"mt-10\"], [\"id\", \"showmore\", \"name\", \"show more\", \"shape\", \"round\", \"expand\", \"block\", \"color\", \"btncolor\", \"fill\", \"outline\", 1, \"font-18\", \"btnview\", 3, \"click\"]],\n    template: function TransactionsPage_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"ion-card\", 0);\n        i0.ɵɵtemplate(1, TransactionsPage_ion_row_1_Template, 4, 2, \"ion-row\", 1);\n        i0.ɵɵtemplate(2, TransactionsPage_ng_template_2_Template, 3, 3, \"ng-template\", null, 2, i0.ɵɵtemplateRefExtractor);\n        i0.ɵɵtemplate(4, TransactionsPage_ion_row_4_Template, 4, 1, \"ion-row\", 3);\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        const _r1 = i0.ɵɵreference(3);\n\n        i0.ɵɵproperty(\"ngClass\", ctx.transactionHistory == undefined || (ctx.transactionHistory == null ? null : ctx.transactionHistory.length) == 0 ? \"emptyCard\" : \"\");\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.transactionHistory == undefined || (ctx.transactionHistory == null ? null : ctx.transactionHistory.length) == 0)(\"ngIfElse\", _r1);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngIf\", ctx.extLink && !ctx.isHsa);\n      }\n    },\n    directives: [i2.IonCard, i3.NgClass, i3.NgIf, i2.IonRow, i2.IonCol, i4.LoadingTextComponent, i3.NgForOf, i5.FilterSortComponent, i2.IonGrid, i2.IonButton],\n    pipes: [i3.CurrencyPipe, i3.DatePipe],\n    styles: [\"ion-card[_ngcontent-%COMP%]{overflow-y:scroll;padding:20px}ion-card[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]{padding-top:0;padding-bottom:6px}ion-card[_ngcontent-%COMP%]   .empty-row[_ngcontent-%COMP%]{margin-bottom:28px}ion-card[_ngcontent-%COMP%]   .emptytransactions[_ngcontent-%COMP%]{height:24px;margin-bottom:12px;font-size:16px;line-height:1.25;letter-spacing:.08px;text-align:center;color:var(--ion-color-dark)}ion-card[_ngcontent-%COMP%]   .lastdays[_ngcontent-%COMP%]{padding-bottom:12px;font-size:14px;font-weight:600;line-height:1.14;letter-spacing:.01px;text-align:right;color:var(--secondary-colors-medium-gray-1)}ion-card[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-size:16px;color:var(--toggle-txt-color);font-weight:bold}ion-card[_ngcontent-%COMP%]   .sub_name[_ngcontent-%COMP%]{display:block;font-size:14px;margin-top:6px;font-weight:600}ion-card[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:400}ion-card[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]{color:var(--secondary-colors-medium-gray-1);font-size:16px;font-weight:bold}ion-card[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]{height:2px;background-color:var(--ion-background-color);margin:14px 2px 2px}ion-card[_ngcontent-%COMP%]   .sub-name[_ngcontent-%COMP%]{font-size:14px;font-weight:600;line-height:1.14;letter-spacing:.01px;text-align:left;color:var(--secondary-colors-medium-gray-1)}ion-card[_ngcontent-%COMP%]   .btnview[_ngcontent-%COMP%]{width:119px;height:36px;margin:auto;border-radius:20px;border:1px var(--primary-colors-voya-dark-blue)}ion-card[_ngcontent-%COMP%]   .positive[_ngcontent-%COMP%]{color:var(--secondary-colors-green)}ion-card[_ngcontent-%COMP%]   .negative[_ngcontent-%COMP%]{color:var(--secondary-colors-error-red)}ion-card[_ngcontent-%COMP%]   #showmore[_ngcontent-%COMP%]{margin-top:20px}\"]\n  });\n  return TransactionsPage;\n})();","map":null,"metadata":{},"sourceType":"module"}