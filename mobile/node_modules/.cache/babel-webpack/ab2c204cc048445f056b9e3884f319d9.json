{"ast":null,"code":"import { __awaiter } from \"tslib\";\nimport homeContent from '@shared-lib/constants/home/home-content.json';\nimport moment from 'moment';\nimport { Subscription } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@shared-lib/services/benefits/benefits.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@shared-lib/services/consent/consent.service\";\nimport * as i4 from \"../../../services/access/access.service\";\nimport * as i5 from \"@shared-lib/services/tpa-stream/tpastream.service\";\nimport * as i6 from \"@angular/common\";\nimport * as i7 from \"@ionic/angular\";\n\nfunction MedicalSpendingComponent_ion_card_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"ion-card\", 3);\n    i0.ɵɵelementStart(1, \"ion-row\", 4);\n    i0.ɵɵelementStart(2, \"ion-col\", 5);\n    i0.ɵɵelementStart(3, \"ion-row\");\n    i0.ɵɵelementStart(4, \"ion-text\", 6);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"ion-row\");\n    i0.ɵɵelementStart(7, \"strong\", 7);\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"ion-row\");\n    i0.ɵɵelementStart(10, \"ion-col\", 8);\n    i0.ɵɵelementStart(11, \"ion-text\", 9);\n    i0.ɵɵtext(12);\n    i0.ɵɵpipe(13, \"currency\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"ion-row\", 10);\n    i0.ɵɵelementStart(15, \"ion-col\", 8);\n    i0.ɵɵelementStart(16, \"ion-text\", 11);\n    i0.ɵɵlistener(\"click\", function MedicalSpendingComponent_ion_card_1_Template_ion_text_click_16_listener() {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return ctx_r2.viewDetails();\n    });\n    i0.ɵɵelementStart(17, \"u\");\n    i0.ɵɵelementStart(18, \"a\", 12);\n    i0.ɵɵtext(19);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(20, \"ion-col\", 13);\n    i0.ɵɵelement(21, \"img\", 14);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.content.totHealthSpend, \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate2(\"\", ctx_r0.content.asOfDate, \" \", ctx_r0.currentDate, \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(13, 5, ctx_r0.totalSpend + ctx_r0.totalPremiumSavvi), \" \");\n    i0.ɵɵadvance(7);\n    i0.ɵɵtextInterpolate(ctx_r0.content.spendDetails);\n  }\n}\n\nfunction MedicalSpendingComponent_ion_col_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-col\", 15);\n    i0.ɵɵelementStart(1, \"ion-row\");\n    i0.ɵɵelementStart(2, \"ion-col\");\n    i0.ɵɵelementStart(3, \"ion-text\", 16);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementStart(5, \"ion-text\", 4);\n    i0.ɵɵtext(6);\n    i0.ɵɵpipe(7, \"currency\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"ion-row\");\n    i0.ɵɵelementStart(9, \"ion-col\");\n    i0.ɵɵelementStart(10, \"ion-text\", 17);\n    i0.ɵɵtext(11);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.content.totHealthSpendWeb, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(7, 4, ctx_r1.totalSpend + ctx_r1.totalPremiumSavvi));\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate2(\" \", ctx_r1.content.asOfDate, \"\", ctx_r1.currentDate, \"\");\n  }\n}\n\nexport let MedicalSpendingComponent = /*#__PURE__*/(() => {\n  class MedicalSpendingComponent {\n    constructor(benefitsService, router, consentService, accessService, tpaService) {\n      this.benefitsService = benefitsService;\n      this.router = router;\n      this.consentService = consentService;\n      this.accessService = accessService;\n      this.tpaService = tpaService;\n      this.totalSpend = 0;\n      this.totalPremiumSavvi = 0;\n      this.content = homeContent;\n      this.subscription = new Subscription();\n      this.hasConsent = false;\n      this.isTPA = false;\n    }\n\n    ngOnInit() {\n      return __awaiter(this, void 0, void 0, function* () {\n        this.accessResult = yield this.accessService.checkMyvoyageAccess();\n        this.isTPA = this.accessResult.enableTPA === 'Y';\n        this.currentDate = moment(Date.now()).format('MMMM DD, YYYY');\n\n        if (this.isTPA) {\n          this.skipConsentInitTPA();\n        } else {\n          this.checkAuthorization();\n        }\n      });\n    }\n\n    skipConsentInitTPA() {\n      this.hasConsent = true;\n      this.getBenefits();\n      this.getTotalSpendTPA();\n    }\n\n    checkAuthorization() {\n      const consentSubscription = this.consentService.getMedicalConsent().subscribe(consent => {\n        this.hasConsent = consent;\n\n        if (this.hasConsent) {\n          this.displayTotalHealthSpend();\n          this.getBenefits();\n        }\n      });\n      this.subscription.add(consentSubscription);\n    }\n\n    getTotalSpendTPA() {\n      return __awaiter(this, void 0, void 0, function* () {\n        const tpaSubscription = this.tpaService.getTPAData().subscribe(tpaData => {\n          const year = moment().year();\n          const data = tpaData.groupingClaimsByYear[year.toString()];\n\n          if (data) {\n            this.totalSpend = data.outOfPocketAmountTotal;\n          } else {\n            this.totalSpend = 0;\n          }\n        });\n        this.subscription.add(tpaSubscription);\n      });\n    }\n\n    displayTotalHealthSpend() {\n      return __awaiter(this, void 0, void 0, function* () {\n        this.healthDates = {\n          startDate: moment().startOf('year').format('MM/DD/YYYY'),\n          endDate: moment().endOf('year').format('MM/DD/YYYY')\n        };\n        const healthValues = yield this.benefitsService.fetchSpending(this.healthDates);\n        this.getTotalCostBST(healthValues);\n      });\n    }\n\n    getBenefits() {\n      return __awaiter(this, void 0, void 0, function* () {\n        const benefitValues = yield this.benefitsService.getBenefits();\n        this.getTotalPremium(benefitValues);\n      });\n    }\n\n    viewDetails() {\n      this.router.navigateByUrl('coverages');\n    }\n\n    getTotalCostBST(data) {\n      var _a, _b, _c, _d;\n\n      this.totalSpend = ((_a = data === null || data === void 0 ? void 0 : data.outNetworkCost) === null || _a === void 0 ? void 0 : _a.outOfPocketCost) + ((_b = data === null || data === void 0 ? void 0 : data.inNetworkCost) === null || _b === void 0 ? void 0 : _b.outOfPocketCost) ? ((_c = data === null || data === void 0 ? void 0 : data.outNetworkCost) === null || _c === void 0 ? void 0 : _c.outOfPocketCost) + ((_d = data === null || data === void 0 ? void 0 : data.inNetworkCost) === null || _d === void 0 ? void 0 : _d.outOfPocketCost) : 0;\n    }\n\n    getTotalPremium(data) {\n      if (data && data.enrolled) {\n        if (data.enrolled.filter(val => val.type === 'medical_plan').length > 0) {\n          this.totalPremiumSavvi = data.enrolled.filter(val => val.type === 'medical_plan')[0].totalPremium ? data.enrolled.filter(val => val.type === 'medical_plan')[0].totalPremium : 0;\n        }\n      }\n    }\n\n    ngOnDestroy() {\n      this.subscription.unsubscribe();\n    }\n\n  }\n\n  MedicalSpendingComponent.ɵfac = function MedicalSpendingComponent_Factory(t) {\n    return new (t || MedicalSpendingComponent)(i0.ɵɵdirectiveInject(i1.BenefitsService), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.ConsentService), i0.ɵɵdirectiveInject(i4.AccessService), i0.ɵɵdirectiveInject(i5.TPAStreamService));\n  };\n\n  MedicalSpendingComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: MedicalSpendingComponent,\n    selectors: [[\"app-medical-spending\"]],\n    decls: 4,\n    vars: 2,\n    consts: [[\"class\", \"total-health-spend-mobile\", 4, \"ngIf\"], [1, \"total-health-spending-web\"], [\"class\", \"display-health-spend\", 4, \"ngIf\"], [1, \"total-health-spend-mobile\"], [1, \"health-spend\"], [1, \"health-spend-content\"], [1, \"ths-text\"], [1, \"ths-date\"], [1, \"ion-no-padding\"], [\"id\", \"medical-spending\", 1, \"ths-amount\"], [1, \"ths-details\"], [\"id\", \"spend-details\", 1, \"view-details\", 3, \"click\"], [\"routerLinkActive\", \"active\", 1, \"navlink\"], [1, \"health-spend-img-container\"], [\"alt\", \"\", \"src\", \"assets/icon/TotalHealthSpends.svg\", \"id\", \"spend-details-img\", 1, \"ths-img\"], [1, \"display-health-spend\"], [\"id\", \"medical-spending-web\", 1, \"total-health-spend\"], [\"id\", \"asOfDate\", 1, \"as-of-date\"]],\n    template: function MedicalSpendingComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementContainerStart(0);\n        i0.ɵɵtemplate(1, MedicalSpendingComponent_ion_card_1_Template, 22, 7, \"ion-card\", 0);\n        i0.ɵɵelementStart(2, \"ion-row\", 1);\n        i0.ɵɵtemplate(3, MedicalSpendingComponent_ion_col_3_Template, 12, 6, \"ion-col\", 2);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementContainerEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.hasConsent && ctx.totalSpend + ctx.totalPremiumSavvi > 0);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.hasConsent && ctx.totalSpend + ctx.totalPremiumSavvi > 0);\n      }\n    },\n    directives: [i6.NgIf, i7.IonRow, i7.IonCard, i7.IonCol, i7.IonText],\n    pipes: [i6.CurrencyPipe],\n    styles: [\".total-health-spend-mobile[_ngcontent-%COMP%]{background-color:var(--primary-colors-voya-dark-blue);padding:10px 0 10px 10px;margin-top:5%}@media screen and (max-width: 920px){.total-health-spend-mobile[_ngcontent-%COMP%]{display:block}}@media screen and (min-width: 920px){.total-health-spend-mobile[_ngcontent-%COMP%]{display:none}}.total-health-spend-mobile[_ngcontent-%COMP%]   .health-spend[_ngcontent-%COMP%]{height:100%}.total-health-spend-mobile[_ngcontent-%COMP%]   .health-spend[_ngcontent-%COMP%]   .health-spend-content[_ngcontent-%COMP%]{max-height:166px;padding:10px}.total-health-spend-mobile[_ngcontent-%COMP%]   .health-spend[_ngcontent-%COMP%]   .health-spend-content[_ngcontent-%COMP%]   .ths-text[_ngcontent-%COMP%]{font-size:18px;font-weight:bold;line-height:1.33;letter-spacing:.03px;color:var(--primary-colors-voya-white)}.total-health-spend-mobile[_ngcontent-%COMP%]   .health-spend[_ngcontent-%COMP%]   .health-spend-content[_ngcontent-%COMP%]   .ths-date[_ngcontent-%COMP%]{font-weight:normal;color:var(--primary-colors-voya-white)}.total-health-spend-mobile[_ngcontent-%COMP%]   .health-spend[_ngcontent-%COMP%]   .health-spend-content[_ngcontent-%COMP%]   .ths-details[_ngcontent-%COMP%]{color:var(--primary-colors-voya-white);margin-top:20px;font-size:18px}.total-health-spend-mobile[_ngcontent-%COMP%]   .health-spend[_ngcontent-%COMP%]   .health-spend-content[_ngcontent-%COMP%]   .ths-details[_ngcontent-%COMP%]   .navlink[_ngcontent-%COMP%]{color:var(--primary-colors-voya-white)}.total-health-spend-mobile[_ngcontent-%COMP%]   .health-spend[_ngcontent-%COMP%]   .health-spend-content[_ngcontent-%COMP%]   .ths-details[_ngcontent-%COMP%]   .view-details[_ngcontent-%COMP%]{cursor:pointer}.total-health-spend-mobile[_ngcontent-%COMP%]   .health-spend[_ngcontent-%COMP%]   .health-spend-content[_ngcontent-%COMP%]   .ths-amount[_ngcontent-%COMP%]{font-size:24px;font-weight:600;letter-spacing:.06px;color:var(--primary-colors-voya-white)}.total-health-spend-mobile[_ngcontent-%COMP%]   .health-spend[_ngcontent-%COMP%]   .health-spend-img-container[_ngcontent-%COMP%]{margin:auto;max-width:177px}.total-health-spend-mobile[_ngcontent-%COMP%]   .health-spend[_ngcontent-%COMP%]   .health-spend-img-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:177px;height:130px}.total-health-spending-web[_ngcontent-%COMP%]{max-width:1440px;margin:auto}@media screen and (max-width: 920px){.total-health-spending-web[_ngcontent-%COMP%]{display:none}}@media screen and (min-width: 920px){.total-health-spending-web[_ngcontent-%COMP%]{display:flex;margin-top:7px}}.total-health-spending-web[_ngcontent-%COMP%]   .total-health-spend[_ngcontent-%COMP%]{font-size:24px;color:var(--primary-colors-voya-black)}.total-health-spending-web[_ngcontent-%COMP%]   .total-health-spend[_ngcontent-%COMP%]   .health-spend[_ngcontent-%COMP%]{margin:0;font-size:32px;font-weight:normal;color:var(--secondary-colors-voya-dark-orange)}.total-health-spending-web[_ngcontent-%COMP%]   .as-of-date[_ngcontent-%COMP%]{font-size:16px;color:var(--secondary-colors-medium-gray-1)}.total-health-spending-web[_ngcontent-%COMP%]   .display-health-spend[_ngcontent-%COMP%]{margin-left:50px}\"]\n  });\n  return MedicalSpendingComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}