{"ast":null,"code":"import { __awaiter } from \"tslib\";\nimport idCard from './constants/idCard.json';\nimport { card, upload_from } from './constants/camera.enum';\nimport { Camera, CameraResultType, CameraSource } from '@capacitor/camera';\nimport { trigger, state, style, transition, animate } from '@angular/animations';\nimport { DeleteImagePage } from './delete-image/delete-image.page';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@ionic/angular\";\nimport * as i2 from \"@angular/common\";\n\nfunction MyIdCardComponent_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵelementStart(1, \"p\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"ion-button\", 4);\n    i0.ɵɵlistener(\"click\", function MyIdCardComponent_div_6_Template_ion_button_click_3_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r3 = i0.ɵɵnextContext();\n      return ctx_r3.presentActionSheet();\n    });\n    i0.ɵɵelement(4, \"ion-icon\", 5);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r0.content.desc);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.content.button, \" \");\n  }\n}\n\nfunction MyIdCardComponent_ng_template_7_img_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 17);\n  }\n\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"src\", ctx_r5.cardImageFront, i0.ɵɵsanitizeUrl);\n  }\n}\n\nfunction MyIdCardComponent_ng_template_7_img_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 18);\n  }\n\n  if (rf & 2) {\n    const ctx_r6 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"src\", ctx_r6.cardImageBack, i0.ɵɵsanitizeUrl);\n  }\n}\n\nfunction MyIdCardComponent_ng_template_7_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 6);\n    i0.ɵɵlistener(\"click\", function MyIdCardComponent_ng_template_7_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r8);\n      const ctx_r7 = i0.ɵɵnextContext();\n      return ctx_r7.toggleFlip();\n    });\n    i0.ɵɵelement(1, \"img\", 7);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 8);\n    i0.ɵɵelementStart(4, \"div\", 9);\n    i0.ɵɵelementStart(5, \"div\", 10);\n    i0.ɵɵtemplate(6, MyIdCardComponent_ng_template_7_img_6_Template, 1, 1, \"img\", 11);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"div\", 12);\n    i0.ɵɵtemplate(8, MyIdCardComponent_ng_template_7_img_8_Template, 1, 1, \"img\", 13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"div\", 14);\n    i0.ɵɵelementStart(10, \"button\", 15);\n    i0.ɵɵlistener(\"click\", function MyIdCardComponent_ng_template_7_Template_button_click_10_listener() {\n      i0.ɵɵrestoreView(_r8);\n      const ctx_r9 = i0.ɵɵnextContext();\n      return ctx_r9.updateImage();\n    });\n    i0.ɵɵtext(11);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"div\", 14);\n    i0.ɵɵelementStart(13, \"button\", 16);\n    i0.ɵɵlistener(\"click\", function MyIdCardComponent_ng_template_7_Template_button_click_13_listener() {\n      i0.ɵɵrestoreView(_r8);\n      const ctx_r10 = i0.ɵɵnextContext();\n      return ctx_r10.deleteImage();\n    });\n    i0.ɵɵtext(14);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r2.content.flipBtn, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"@flipState\", ctx_r2.flip);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.cardImageFront !== \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.cardImageBack !== \"\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r2.content.updateBtn, \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r2.content.deleteBtn, \" \");\n  }\n}\n\nexport let MyIdCardComponent = /*#__PURE__*/(() => {\n  class MyIdCardComponent {\n    constructor(loadingCtrl, actionSheetCtrl, modalController) {\n      this.loadingCtrl = loadingCtrl;\n      this.actionSheetCtrl = actionSheetCtrl;\n      this.modalController = modalController;\n      this.content = idCard;\n      this.cardImageFront = '';\n      this.cardImageBack = '';\n      this.camera = Camera;\n      this.flip = 'inactive';\n    }\n\n    openSource(type) {\n      return __awaiter(this, void 0, void 0, function* () {\n        try {\n          const image = yield this.camera.getPhoto({\n            quality: 90,\n            allowEditing: true,\n            source: type === upload_from.CAMERA ? CameraSource.Camera : CameraSource.Photos,\n            resultType: CameraResultType.DataUrl\n          });\n          return image;\n        } catch (error) {\n          this.resetImages();\n        }\n      });\n    }\n\n    resetImages() {\n      this.cardImageBack = '';\n      this.cardImageFront = '';\n    }\n\n    presentActionSheet() {\n      return __awaiter(this, void 0, void 0, function* () {\n        const actionSheet = yield this.actionSheetCtrl.create({\n          buttons: [{\n            text: idCard.actionsheet.fromPhotos,\n            handler: () => {\n              this.startLoader(card.FRONT, upload_from.PHOTOS);\n            }\n          }, {\n            text: idCard.actionsheet.fromCamera,\n            handler: () => {\n              this.startLoader(card.FRONT, upload_from.CAMERA);\n            }\n          }, {\n            text: idCard.actionsheet.cancel,\n            role: 'cancel'\n          }]\n        });\n        yield actionSheet.present();\n      });\n    }\n\n    startLoader(cardSide, type) {\n      return __awaiter(this, void 0, void 0, function* () {\n        const loaderMessage = type === upload_from.CAMERA ? idCard.loaderMessagefromCamera : idCard.loaderMessagefromPhotos;\n        const loading = yield this.loadingCtrl.create({\n          message: loaderMessage.replace('$cardSide', cardSide),\n          showBackdrop: true,\n          cssClass: 'card-overlay'\n        });\n        loading.present().then(() => {\n          setTimeout(() => __awaiter(this, void 0, void 0, function* () {\n            const image = yield this.openSource(type);\n\n            if (image) {\n              if (cardSide === card.FRONT) {\n                this.cardImageFront = image.dataUrl;\n                yield this.startLoader(card.BACK, type);\n              }\n\n              if (cardSide === card.BACK) {\n                this.cardImageBack = image.dataUrl;\n              }\n            }\n\n            loading.dismiss();\n          }), 5000);\n        });\n      });\n    }\n\n    toggleFlip() {\n      this.flip = this.flip == 'inactive' ? 'active' : 'inactive';\n    }\n\n    updateImage() {\n      this.presentActionSheet();\n    }\n\n    deleteImage() {\n      return __awaiter(this, void 0, void 0, function* () {\n        const modal = yield this.modalController.create({\n          component: DeleteImagePage,\n          cssClass: 'modal-not-fullscreen',\n          swipeToClose: false\n        });\n        modal.present();\n      });\n    }\n\n  }\n\n  MyIdCardComponent.ɵfac = function MyIdCardComponent_Factory(t) {\n    return new (t || MyIdCardComponent)(i0.ɵɵdirectiveInject(i1.LoadingController), i0.ɵɵdirectiveInject(i1.ActionSheetController), i0.ɵɵdirectiveInject(i1.ModalController));\n  };\n\n  MyIdCardComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: MyIdCardComponent,\n    selectors: [[\"app-my-id-card\"]],\n    decls: 9,\n    vars: 3,\n    consts: [[1, \"ion-text-start\", \"dependents-head\"], [\"automation-id\", \"app-my-id-card-header\"], [4, \"ngIf\", \"ngIfElse\"], [\"cardBlock\", \"\"], [\"automation-id\", \"app-my-id-card-button\", 3, \"click\"], [\"slot\", \"start\", \"name\", \"add-circle-outline\", 1, \"font\"], [\"slot\", \"start\", \"fill\", \"clear\", \"automation-id\", \"flip-btn\", 1, \"btn-primary\", 3, \"click\"], [\"src\", \"assets/icon/account-type/flip.svg\", \"alt\", \"flip-btn\", 1, \"img-flip\"], [1, \"tp-wrapper\"], [1, \"tp-box\"], [1, \"tp-box__side\", \"tp-box__front\"], [\"alt\", \"card front\", 3, \"src\", 4, \"ngIf\"], [1, \"tp-box__side\", \"tp-box__back\"], [\"alt\", \"card back\", 3, \"src\", 4, \"ngIf\"], [1, \"text-center\"], [\"slot\", \"start\", \"fill\", \"clear\", \"automation-id\", \"update-btn\", 1, \"btn-sec\", \"update\", 3, \"click\"], [\"slot\", \"start\", \"fill\", \"clear\", \"automation-id\", \"delete-btn\", 1, \"btn-sec\", \"delete\", 3, \"click\"], [\"alt\", \"card front\", 3, \"src\"], [\"alt\", \"card back\", 3, \"src\"]],\n    template: function MyIdCardComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\");\n        i0.ɵɵelementStart(1, \"ion-row\");\n        i0.ɵɵelementStart(2, \"ion-col\");\n        i0.ɵɵelementStart(3, \"div\", 0);\n        i0.ɵɵelementStart(4, \"ion-text\", 1);\n        i0.ɵɵtext(5);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(6, MyIdCardComponent_div_6_Template, 6, 2, \"div\", 2);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(7, MyIdCardComponent_ng_template_7_Template, 15, 6, \"ng-template\", null, 3, i0.ɵɵtemplateRefExtractor);\n      }\n\n      if (rf & 2) {\n        const _r1 = i0.ɵɵreference(8);\n\n        i0.ɵɵadvance(5);\n        i0.ɵɵtextInterpolate1(\" \", ctx.content.header, \" \");\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.cardImageFront === \"\" && ctx.cardImageBack === \"\")(\"ngIfElse\", _r1);\n      }\n    },\n    directives: [i1.IonRow, i1.IonCol, i1.IonText, i2.NgIf, i1.IonButton, i1.IonIcon],\n    styles: [\".dependents-head[_ngcontent-%COMP%]{flex-grow:0;font-size:18px;font-weight:700;line-height:1.33;letter-spacing:.03px;color:var(--primary-colors-voya-black);padding:0 20px;margin-top:10px}.dependents-head[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:10px;font-size:14px;font-weight:400}.dependents-head[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{display:block;margin:auto;width:160px;--border-radius: 25px;color:var(--primary-colors-voya-white);font-weight:600;--background: var(--primary-colors-voya-dark-blue)}.tp-wrapper[_ngcontent-%COMP%]{perspective:800px}.tp-wrapper[_ngcontent-%COMP%]   .tp-box[_ngcontent-%COMP%]{position:relative;width:100%;height:200px;margin:50px auto;transform-style:preserve-3d;transform:transform 1s;box-shadow:8px 4px 12px 4px #00000040;background-color:var(--primary-colors-voya-white);border-radius:15px}.tp-wrapper[_ngcontent-%COMP%]   .tp-box[_ngcontent-%COMP%]   .tp-box__side[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute;backface-visibility:hidden;-webkit-user-select:none;-moz-user-select:none;user-select:none}.tp-wrapper[_ngcontent-%COMP%]   .tp-box[_ngcontent-%COMP%]   .tp-box__front[_ngcontent-%COMP%]{transform:rotateY(0)}.tp-wrapper[_ngcontent-%COMP%]   .tp-box[_ngcontent-%COMP%]   .tp-box__back[_ngcontent-%COMP%]{transform:rotateY(-180deg)}.btn-primary[_ngcontent-%COMP%]{font-size:20px;font-weight:bold;text-align:right;float:right;color:var(--primary-colors-voya-dark-blue);margin-top:25px;background:none}.btn-primary[_ngcontent-%COMP%]   .img-flip[_ngcontent-%COMP%]{margin-right:4px}.btn-sec[_ngcontent-%COMP%]{width:100px;height:40px;font-size:16px}.btn-sec.update[_ngcontent-%COMP%]{border-radius:20px;border:2px solid var(--primary-colors-voya-dark-blue);background:var(--primary-colors-voya-white)}.btn-sec.delete[_ngcontent-%COMP%]{background:none;-webkit-text-decoration-line:underline;text-decoration-line:underline}\"],\n    data: {\n      animation: [trigger('flipState', [state('active', style({\n        transform: 'rotateY(179deg)'\n      })), state('inactive', style({\n        transform: 'rotateY(0)'\n      })), transition('active => inactive', animate('500ms ease-out')), transition('inactive => active', animate('500ms ease-in'))])]\n    }\n  });\n  return MyIdCardComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}