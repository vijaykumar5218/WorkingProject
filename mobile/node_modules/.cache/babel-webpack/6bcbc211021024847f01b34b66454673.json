{"ast":null,"code":"import { __awaiter } from \"tslib\";\nimport { LoadingController } from '@ionic/angular';\nimport { IABMessage } from '../constants/message.enum';\nimport * as iabText from '../constants/inAppBrowser.json';\nexport class DefaultIABController {\n  constructor() {\n    this.iabText = iabText;\n    this.firstLoad = true;\n    this.showLoader = true;\n    this.browserOptions = {\n      allowInlineMediaPlayback: 'yes',\n      beforeload: undefined,\n      clearcache: 'yes',\n      cleardata: 'no',\n      clearsessioncache: 'yes',\n      closebuttoncaption: '',\n      closebuttoncolor: '',\n      disallowoverscroll: 'no',\n      enableViewportScale: 'yes',\n      footer: 'no',\n      footercolor: '',\n      fullscreen: 'no',\n      hardwareback: 'yes',\n      hidden: 'yes',\n      hidenavigationbuttons: 'no',\n      hidespinner: 'no',\n      hideurlbar: 'yes',\n      keyboardDisplayRequiresUserAction: 'yes',\n      lefttoright: 'no',\n      location: 'no',\n      mediaPlaybackRequiresUserAction: 'yes',\n      navigationbuttoncolor: '',\n      presentationstyle: 'fullscreen',\n      shouldPauseOnSuspend: 'no',\n      suppressesIncrementalRendering: 'yes',\n      toolbar: 'no',\n      toolbarcolor: undefined,\n      toolbarposition: undefined,\n      toolbartranslucent: undefined,\n      transitionstyle: 'coververtical',\n      useWideViewPort: 'no',\n      usewkwebview: 'yes',\n      zoom: 'no'\n    };\n    this.loadingController = new LoadingController();\n  }\n\n  loadStartCallback() {\n    return __awaiter(this, void 0, void 0, function* () {\n      //Show loading spinner\n      if (this.firstLoad && this.showLoader) {\n        this.firstLoad = false;\n        this.loadingPromise = this.presentAlert();\n        yield this.loadingPromise;\n      }\n    });\n  }\n\n  presentAlert() {\n    return __awaiter(this, void 0, void 0, function* () {\n      const loading = yield this.loadingController.create({\n        translucent: true\n      });\n      yield loading.present();\n    });\n  }\n\n  loadStopCallback() {\n    return __awaiter(this, void 0, void 0, function* () {\n      //Dismiss the loader\n      if (this.loadingPromise) {\n        yield this.loadingPromise;\n        this.loadingController.dismiss();\n        this.loadingPromise = undefined;\n      } //Finally shows browser after the entire page has been loaded and altered\n\n\n      this.browser.show();\n    });\n  }\n\n  messageCallback(event) {\n    if (event.data.message === IABMessage.externalLink) {\n      this.cordovaInApp.open(event.data.url, '_system', null);\n    }\n\n    if (event.data.message === IABMessage.close) {\n      this.browser.close();\n    }\n  }\n\n  displayCustomHeader(headerText, absolutePosition = false, useTitle = true) {\n    if (!headerText) {\n      headerText = this.iabText.voya;\n    }\n\n    this.browser.executeScript({\n      code: `(function() {\n          if(!document.querySelector('.in_app_header')){\n            var body = document.querySelector('body');\n  \n            var title = document.getElementsByTagName('title')[0].innerHTML;\n            if(!title || ${useTitle} === false) {\n              title = '${headerText}';\n            }\n    \n            var header = document.createElement('div');\n            header.classList.add('in_app_header');\n    \n            var spacer = document.createElement('div');\n            spacer.classList.add('header_spacer');\n    \n            var button = document.createElement('div'); \n            button.setAttribute('id','in_app_close');\n            button.innerHTML = '${this.iabText.closeButton}';\n            button.classList.add('close_btn');\n            button.onclick = function() {\n              webkit.messageHandlers.cordova_iab.postMessage(JSON.stringify({message: '${IABMessage.close}'}));\n            };\n  \n            var titleDiv = document.createElement('div');\n            titleDiv.innerHTML = title;\n            titleDiv.classList.add('title');\n  \n            var button2 = document.createElement('div'); \n            button2.innerHTML = '${this.iabText.closeButton}';\n            button2.classList.add('right_btn');\n  \n            header.append(button);\n            header.append(titleDiv);\n            header.append(button2);\n            body.prepend(header);\n            body.prepend(spacer);\n          }\n        })()`\n    });\n    this.browser.insertCSS({\n      code: `.in_app_header {\n          position: ${absolutePosition ? 'absolute' : 'fixed'};\n          z-index: 999;\n          font-size: 18px;\n          top: 0;\n          left: 0;\n          display: flex;\n          justify-content: center;\n          align-items: center;\n          height: 60px;\n          color: black;\n          background: #ffffff;\n          width: 100%;\n          box-shadow: 0 3px 4px rgba(57, 63, 72, 0.3);\n          white-space: nowrap;\n          overflow: hidden;\n          font-weight: 600;\n          text-overflow: ellipsis;\n        }\n        .title {\n          flex-grow: 999;\n          text-align: center;\n          max-width: 65%;\n          text-overflow: ellipsis;\n          white-space: nowrap;\n          overflow: hidden;\n        }\n        .header_spacer {\n          position: ${absolutePosition ? 'absolute' : 'relative'};\n          top: 0;\n          left: 0;\n          height: 60px;\n          width: 100%;\n        }\n        .close_btn {\n          text-decoration: underline;\n          display:flex;\n          align-items: center;\n          height: 60px;\n          font-size: 16px;\n          color:rgb(20, 90, 123);\n          margin-right: 22px;\n          margin-left: 12px;\n          font-weight: normal;\n        }\n        .right_btn {\n          text-decoration: underline;\n          display:flex;\n          align-items: center;\n          height: 60px;\n          font-size: 16px;\n          color:rgb(20, 90, 123);\n          margin-right: 22px;\n          margin-left: 12px;\n          opacity: 0;\n        }\n        @media (min-width: 768px) {\n          nav.navbar.fixed-top {\n            top: 60px;\n          }\n          div.nav-bar.fixed-top {\n            top: 127px !important;\n          }\n        }`\n    });\n  }\n\n}","map":null,"metadata":{},"sourceType":"module"}