{"ast":null,"code":"import _asyncToGenerator from \"/Users/vijay.a/Documents/GitHub/MYVOYAGE/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { endPoints } from '../constants/endpoints';\nimport { VoyaIABController } from '@mobile/app/modules/shared/service/in-app-browser/controllers/voya-iab-controller';\nimport { version } from '../constants/version';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@shared-lib/services/base/base-factory-provider\";\nimport * as i2 from \"@shared-lib/services/utility/utility.service\";\nimport * as i3 from \"@mobile/app/modules/shared/service/in-app-browser/in-app-browser.service\";\nimport * as i4 from \"@shared-lib/services/access/access.service\";\nimport * as i5 from \"../../../shared/service/attestation/attestation.service\";\nimport * as i6 from \"../../../shared/service/alert-window/alert-window.service\";\nimport * as i7 from \"../../../shared/service/platform/platform.service\";\nexport let LandingService = /*#__PURE__*/(() => {\n  class LandingService {\n    constructor(baseService, utilityService, inAppBrowser, accessService, attestationService, alertWindowService, platformService) {\n      this.baseService = baseService;\n      this.utilityService = utilityService;\n      this.inAppBrowser = inAppBrowser;\n      this.accessService = accessService;\n      this.attestationService = attestationService;\n      this.alertWindowService = alertWindowService;\n      this.platformService = platformService;\n      this.endPoints = endPoints;\n      this.closed = true;\n      this.endPoints = this.utilityService.appendBaseUrlToEndpoints(endPoints);\n    }\n\n    navigateByUrl(link) {\n      this.baseService.navigateByUrl(link);\n    }\n\n    getAllLaunchContent(refresh = false) {\n      var _this = this;\n\n      return _asyncToGenerator(function* () {\n        if (!_this.allLaunchContentPromise || refresh) {\n          _this.allLaunchContentPromise = _this.baseService.get(_this.endPoints.landingContent, false);\n        }\n\n        return _this.allLaunchContentPromise;\n      })();\n    }\n\n    getLandingContent() {\n      var _this2 = this;\n\n      return _asyncToGenerator(function* () {\n        const result = yield _this2.getAllLaunchContent();\n        return JSON.parse(result.loginJSON);\n      })();\n    }\n\n    getNoAccessMessage() {\n      var _this3 = this;\n\n      return _asyncToGenerator(function* () {\n        const result = yield _this3.getAllLaunchContent();\n        return JSON.parse(result.LoginNoAccessMessage);\n      })();\n    }\n\n    openInBrowser(url) {\n      this.inAppBrowser.openInAppBrowser(url, new VoyaIABController());\n    }\n\n    checkMyvoyageAccess() {\n      var _this4 = this;\n\n      return _asyncToGenerator(function* () {\n        return _this4.accessService.checkMyvoyageAccess(true);\n      })();\n    }\n\n    validateApplication() {\n      return this.attestationService.attestApplication();\n    }\n\n    openVersionAlert() {\n      var _this5 = this;\n\n      return _asyncToGenerator(function* () {\n        _this5.openAlert();\n\n        if (!_this5.resumeSubscription) {\n          _this5.resumeSubscription = _this5.platformService.onResume$.subscribe(() => {\n            _this5.openAlert();\n          });\n        }\n      })();\n    }\n\n    openAlert() {\n      var _this6 = this;\n\n      return _asyncToGenerator(function* () {\n        const appVersionContent = JSON.parse((yield _this6.getAllLaunchContent(true)).AppVersionJSON);\n\n        if (version < appVersionContent.minVersion && _this6.closed) {\n          _this6.closed = false;\n\n          _this6.alertWindowService.presentAlert({\n            cssClass: 'version-alert',\n            message: appVersionContent.alertText,\n            header: ' ',\n            backdropDismiss: false,\n            buttons: [{\n              text: appVersionContent.downloadText,\n              handler: () => {\n                _this6.closed = true;\n                const appUrl = _this6.platformService.isIos() ? appVersionContent.iosAppUrl : appVersionContent.androidAppUrl;\n                window.open(appUrl);\n              }\n            }]\n          });\n        }\n      })();\n    }\n\n    ngOnDestroy() {\n      if (this.resumeSubscription) {\n        this.resumeSubscription.unsubscribe();\n      }\n    }\n\n  }\n\n  LandingService.ɵfac = function LandingService_Factory(t) {\n    return new (t || LandingService)(i0.ɵɵinject(i1.BaseService), i0.ɵɵinject(i2.SharedUtilityService), i0.ɵɵinject(i3.InAppBroserService), i0.ɵɵinject(i4.AccessService), i0.ɵɵinject(i5.AttestationService), i0.ɵɵinject(i6.AlertWindowService), i0.ɵɵinject(i7.PlatformService));\n  };\n\n  LandingService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: LandingService,\n    factory: LandingService.ɵfac,\n    providedIn: 'root'\n  });\n  return LandingService;\n})();","map":null,"metadata":{},"sourceType":"module"}