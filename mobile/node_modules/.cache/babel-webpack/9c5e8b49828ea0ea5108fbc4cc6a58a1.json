{"ast":null,"code":"import { __awaiter } from \"tslib\";\nimport idCard from './constants/idCard.json';\nimport { card, upload_from } from './constants/camera.enum';\nimport { Camera, CameraResultType, CameraSource } from '@capacitor/camera';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@ionic/angular\";\nimport * as i2 from \"@angular/common\";\n\nfunction MyIdCardComponent_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵelementStart(1, \"p\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"ion-button\", 4);\n    i0.ɵɵlistener(\"click\", function MyIdCardComponent_div_6_Template_ion_button_click_3_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r3 = i0.ɵɵnextContext();\n      return ctx_r3.presentActionSheet();\n    });\n    i0.ɵɵelement(4, \"ion-icon\", 5);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r0.content.desc);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"id\", \"app-my-id-card-button-\" + ctx_r0.elementID);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.content.button, \" \");\n  }\n}\n\nfunction MyIdCardComponent_ng_template_7_img_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 9);\n  }\n\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"src\", ctx_r5.cardImageFront, i0.ɵɵsanitizeUrl);\n  }\n}\n\nfunction MyIdCardComponent_ng_template_7_img_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 10);\n  }\n\n  if (rf & 2) {\n    const ctx_r6 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"src\", ctx_r6.cardImageBack, i0.ɵɵsanitizeUrl);\n  }\n}\n\nfunction MyIdCardComponent_ng_template_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 6);\n    i0.ɵɵtemplate(1, MyIdCardComponent_ng_template_7_img_1_Template, 1, 1, \"img\", 7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(2, \"div\", 6);\n    i0.ɵɵtemplate(3, MyIdCardComponent_ng_template_7_img_3_Template, 1, 1, \"img\", 8);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.cardImageFront !== \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.cardImageBack !== \"\");\n  }\n}\n\nexport let MyIdCardComponent = /*#__PURE__*/(() => {\n  class MyIdCardComponent {\n    constructor(loadingCtrl, actionSheetCtrl) {\n      this.loadingCtrl = loadingCtrl;\n      this.actionSheetCtrl = actionSheetCtrl;\n      this.content = idCard;\n      this.cardImageFront = '';\n      this.cardImageBack = '';\n      this.camera = Camera;\n    }\n\n    ngOnInit() {\n      this.elementID = Date.now().toString();\n    }\n\n    openSource(type) {\n      return __awaiter(this, void 0, void 0, function* () {\n        try {\n          const image = yield this.camera.getPhoto({\n            quality: 90,\n            allowEditing: true,\n            source: type === upload_from.CAMERA ? CameraSource.Camera : CameraSource.Photos,\n            resultType: CameraResultType.DataUrl\n          });\n          return image;\n        } catch (error) {\n          this.resetImages();\n        }\n      });\n    }\n\n    resetImages() {\n      this.cardImageBack = '';\n      this.cardImageFront = '';\n    }\n\n    presentActionSheet() {\n      return __awaiter(this, void 0, void 0, function* () {\n        const actionSheet = yield this.actionSheetCtrl.create({\n          buttons: [{\n            text: idCard.actionsheet.fromPhotos,\n            handler: () => {\n              this.startLoader(card.FRONT, upload_from.PHOTOS);\n            }\n          }, {\n            text: idCard.actionsheet.fromCamera,\n            handler: () => {\n              this.startLoader(card.FRONT, upload_from.CAMERA);\n            }\n          }, {\n            text: idCard.actionsheet.cancel,\n            role: 'cancel'\n          }]\n        });\n        yield actionSheet.present();\n      });\n    }\n\n    startLoader(cardSide, type) {\n      return __awaiter(this, void 0, void 0, function* () {\n        const loaderMessage = type === upload_from.CAMERA ? idCard.loaderMessagefromCamera : idCard.loaderMessagefromPhotos;\n        const loading = yield this.loadingCtrl.create({\n          message: loaderMessage.replace('$cardSide', cardSide),\n          showBackdrop: true,\n          cssClass: 'card-overlay'\n        });\n        loading.present().then(() => {\n          setTimeout(() => __awaiter(this, void 0, void 0, function* () {\n            const image = yield this.openSource(type);\n\n            if (image) {\n              if (cardSide === card.FRONT) {\n                this.cardImageFront = image.dataUrl;\n                yield this.startLoader(card.BACK, type);\n              }\n\n              if (cardSide === card.BACK) {\n                this.cardImageBack = image.dataUrl;\n              }\n            }\n\n            loading.dismiss();\n          }), 5000);\n        });\n      });\n    }\n\n  }\n\n  MyIdCardComponent.ɵfac = function MyIdCardComponent_Factory(t) {\n    return new (t || MyIdCardComponent)(i0.ɵɵdirectiveInject(i1.LoadingController), i0.ɵɵdirectiveInject(i1.ActionSheetController));\n  };\n\n  MyIdCardComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: MyIdCardComponent,\n    selectors: [[\"app-my-id-card\"]],\n    decls: 9,\n    vars: 4,\n    consts: [[1, \"ion-text-start\", \"dependents-head\"], [3, \"id\"], [4, \"ngIf\", \"ngIfElse\"], [\"cardBlock\", \"\"], [3, \"id\", \"click\"], [\"slot\", \"start\", \"name\", \"add-circle-outline\", 1, \"font\"], [1, \"frame\"], [\"alt\", \"card front\", 3, \"src\", 4, \"ngIf\"], [\"alt\", \"card back\", 3, \"src\", 4, \"ngIf\"], [\"alt\", \"card front\", 3, \"src\"], [\"alt\", \"card back\", 3, \"src\"]],\n    template: function MyIdCardComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\");\n        i0.ɵɵelementStart(1, \"ion-row\");\n        i0.ɵɵelementStart(2, \"ion-col\");\n        i0.ɵɵelementStart(3, \"div\", 0);\n        i0.ɵɵelementStart(4, \"ion-text\", 1);\n        i0.ɵɵtext(5);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(6, MyIdCardComponent_div_6_Template, 6, 3, \"div\", 2);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(7, MyIdCardComponent_ng_template_7_Template, 4, 2, \"ng-template\", null, 3, i0.ɵɵtemplateRefExtractor);\n      }\n\n      if (rf & 2) {\n        const _r1 = i0.ɵɵreference(8);\n\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"id\", \"app-my-id-card-header-\" + ctx.elementID);\n        i0.ɵɵadvance(1);\n        i0.ɵɵtextInterpolate1(\" \", ctx.content.header, \" \");\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.cardImageFront === \"\" && ctx.cardImageBack === \"\")(\"ngIfElse\", _r1);\n      }\n    },\n    directives: [i1.IonRow, i1.IonCol, i1.IonText, i2.NgIf, i1.IonButton, i1.IonIcon],\n    styles: [\".dependents-head[_ngcontent-%COMP%]{flex-grow:0;font-size:18px;font-weight:700;line-height:1.33;letter-spacing:.03px;color:var(--primary-colors-voya-black);padding:0 20px;margin-top:10px}.dependents-head[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:10px;font-size:14px;font-weight:400}.dependents-head[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{display:block;margin:auto;width:160px;--border-radius: 25px;color:var(--primary-colors-voya-white);font-weight:600;--background: var(--primary-colors-voya-dark-blue)}.frame[_ngcontent-%COMP%]{width:100%;height:200px;display:inline-block;position:relative;filter:drop-shadow(0px 0px 10px rgba(0,0,0,.25));background-color:var(--primary-colors-voya-white);border-radius:5%}.frame[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{max-width:100%;max-height:100%;width:auto;height:auto;position:absolute;top:0;bottom:0;left:0;right:0;margin:auto}\"]\n  });\n  return MyIdCardComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}