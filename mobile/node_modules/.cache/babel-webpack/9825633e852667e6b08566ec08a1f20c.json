{"ast":null,"code":"import { __awaiter } from \"tslib\";\nimport { EventEmitter } from '@angular/core';\nimport { Subscription } from 'rxjs';\nimport pageText from '../../../../services/account/models/retirement-account/info/info-tab.json';\nimport * as eventC from '@shared-lib/services/event-tracker/constants/event-tracking.json';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@shared-lib/services/mx-service/mx.service\";\nimport * as i2 from \"@ionic/angular\";\nimport * as i3 from \"@shared-lib/services/event-tracker/event-tracking.service\";\nimport * as i4 from \"@shared-lib/services/utility/utility.service\";\nimport * as i5 from \"@angular/router\";\nimport * as i6 from \"@angular/common\";\n\nfunction MXAccountListComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵelementStart(1, \"ion-card\", 1);\n    i0.ɵɵlistener(\"click\", function MXAccountListComponent_div_0_Template_ion_card_click_1_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r4);\n      const mxaccount_r1 = restoredCtx.$implicit;\n      const ctx_r3 = i0.ɵɵnextContext();\n      return ctx_r3.sendmxtitle(mxaccount_r1);\n    });\n    i0.ɵɵelementStart(2, \"ion-grid\");\n    i0.ɵɵelementStart(3, \"ion-row\");\n    i0.ɵɵelementStart(4, \"ion-col\", 2);\n    i0.ɵɵelementStart(5, \"div\", 3);\n    i0.ɵɵelement(6, \"img\", 4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"ion-col\", 5);\n    i0.ɵɵelementStart(8, \"p\", 6);\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"p\", 7);\n    i0.ɵɵtext(11);\n    i0.ɵɵpipe(12, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"p\", 8);\n    i0.ɵɵtext(14);\n    i0.ɵɵpipe(15, \"currency\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const mxaccount_r1 = ctx.$implicit;\n    const i_r2 = ctx.index;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate(\"id\", \"mxaccount-\" + i_r2);\n    i0.ɵɵproperty(\"ngStyle\", ctx_r0.manageWidthOfCard(mxaccount_r1));\n    i0.ɵɵadvance(5);\n    i0.ɵɵpropertyInterpolate(\"src\", mxaccount_r1 == null ? null : mxaccount_r1.medium_logo_url, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", mxaccount_r1.name, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate2(\" \", ctx_r0.pageText.asOf, \"\", i0.ɵɵpipeBind2(12, 7, mxaccount_r1.updated_at, \"longDate\"), \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind3(15, 10, mxaccount_r1.balance, \"USD\", \"symbol\"), \" \");\n  }\n}\n\nexport const HAS_CREATED_ZERO_EVENT = 'HAS_CREATED_ZERO_EVENT';\nexport let MXAccountListComponent = /*#__PURE__*/(() => {\n  class MXAccountListComponent {\n    constructor(mxService, toastCtrl, eventTracking, utilityService, router) {\n      this.mxService = mxService;\n      this.toastCtrl = toastCtrl;\n      this.eventTracking = eventTracking;\n      this.utilityService = utilityService;\n      this.router = router;\n      this.pageText = pageText;\n      this.eventContent = eventC.default;\n      this.hasMXUser = false;\n      this.showManageAccounts = false;\n      this.subscription = new Subscription();\n      this.mxAccountClicked = new EventEmitter();\n    }\n\n    ngOnInit() {\n      this.isWeb = this.utilityService.getIsWeb();\n      this.getMXAccountData();\n      this.fetchGuid();\n    }\n\n    getMXAccountData() {\n      const mxSubscription = this.mxService.getMxAccountConnect().subscribe(data => {\n        this.mxAccountsChanged(data);\n      });\n      this.subscription.add(mxSubscription);\n    }\n\n    mxAccountsChanged(mxAccounts) {\n      if (!mxAccounts || mxAccounts.accounts.length === 0) {\n        this.createMXZeroEvent();\n      } else {\n        this.updateMXEvent();\n      }\n\n      if (this.mxAccountData) {\n        if (this.mxAccountData.length < mxAccounts.accounts.length) {\n          this.presentToast(this.pageText.accountsLinkedToast);\n        } else if (this.mxAccountData.length > mxAccounts.accounts.length) {\n          this.presentToast(this.pageText.accountsUnLinkedToast);\n\n          if (mxAccounts.accounts.length === 0) {\n            this.createMXZeroEvent(true);\n          }\n        }\n      }\n\n      this.mxAccountData = mxAccounts === null || mxAccounts === void 0 ? void 0 : mxAccounts.accounts;\n    }\n\n    updateMXEvent() {\n      this.eventTracking.eventTracking({\n        eventName: this.eventContent.eventTrackingMx.eventName,\n        updateInd: this.eventContent.eventTrackingMx.updateInd\n      });\n    }\n\n    createMXZeroEvent(force = false) {\n      const hasEvent = localStorage.getItem(HAS_CREATED_ZERO_EVENT) === 'true';\n\n      if (!hasEvent || force) {\n        this.eventTracking.eventTracking({\n          eventName: this.eventContent.eventTrackingMx.eventName\n        });\n        localStorage.setItem(HAS_CREATED_ZERO_EVENT, 'true');\n      }\n    }\n\n    presentToast(message) {\n      return __awaiter(this, void 0, void 0, function* () {\n        const toast = yield this.toastCtrl.create({\n          message: message,\n          duration: 3000,\n          position: 'top',\n          color: 'dark',\n          cssClass: 'toast-below-nav',\n          animated: false\n        });\n        toast.present();\n      });\n    }\n\n    sendmxtitle(mxaccount) {\n      if (this.isWeb) {\n        this.router.navigateByUrl(`accounts/mxdetails-account/${mxaccount.guid}`);\n      } else {\n        this.mxService.setMxData(mxaccount);\n        this.mxAccountClicked.emit(mxaccount);\n      }\n    }\n\n    fetchGuid() {\n      const routerSubscription = this.utilityService.fetchUrlThroughNavigation(3).subscribe(data => {\n        this.guid = data === null || data === void 0 ? void 0 : data.paramId;\n      });\n      this.subscription.add(routerSubscription);\n    }\n\n    manageWidthOfCard(mxaccount) {\n      if (this.isWeb) {\n        if (this.guid === mxaccount.guid) {\n          this.mxService.setMxData(mxaccount);\n          return {\n            width: '480px'\n          };\n        } else {\n          return {\n            width: 'auto'\n          };\n        }\n      }\n\n      return null;\n    }\n\n    ngOnDestroy() {\n      this.subscription.unsubscribe();\n    }\n\n  }\n\n  MXAccountListComponent.ɵfac = function MXAccountListComponent_Factory(t) {\n    return new (t || MXAccountListComponent)(i0.ɵɵdirectiveInject(i1.MXService), i0.ɵɵdirectiveInject(i2.ToastController), i0.ɵɵdirectiveInject(i3.EventTrackingService), i0.ɵɵdirectiveInject(i4.SharedUtilityService), i0.ɵɵdirectiveInject(i5.Router));\n  };\n\n  MXAccountListComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: MXAccountListComponent,\n    selectors: [[\"app-mx-account-list\"]],\n    outputs: {\n      mxAccountClicked: \"mxAccountClicked\"\n    },\n    decls: 1,\n    vars: 1,\n    consts: [[4, \"ngFor\", \"ngForOf\"], [3, \"ngStyle\", \"id\", \"click\"], [\"size\", \"3\", 1, \"logo-column\"], [1, \"logo-container\"], [\"alt\", \"account logo\", 1, \"logo\", 3, \"src\"], [\"size\", \"9\", 1, \"desc-column\"], [1, \"titletext\"], [1, \"subtitle\"], [1, \"balance\"]],\n    template: function MXAccountListComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵtemplate(0, MXAccountListComponent_div_0_Template, 16, 14, \"div\", 0);\n      }\n\n      if (rf & 2) {\n        i0.ɵɵproperty(\"ngForOf\", ctx.mxAccountData);\n      }\n    },\n    directives: [i6.NgForOf, i2.IonCard, i6.NgStyle, i2.IonGrid, i2.IonRow, i2.IonCol],\n    pipes: [i6.DatePipe, i6.CurrencyPipe],\n    styles: [\"@media screen and (min-width: 768px){.plt-desktop[_nghost-%COMP%]   ion-card[_ngcontent-%COMP%], .plt-desktop   [_nghost-%COMP%]   ion-card[_ngcontent-%COMP%]{margin-left:0;margin-right:0}}ion-card[_ngcontent-%COMP%]{--color: var(--primary-colors-voya-black);font-size:16px;border-radius:var(--card-border-radius);box-shadow:var(--card-box-shadow);padding:20px;margin:20px;cursor:pointer}ion-card[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]{padding:0}ion-card[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]{padding:0}ion-card[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]{padding:0}ion-card[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col.logo-column[_ngcontent-%COMP%]{max-width:80px!important}ion-card[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   .logo-container[_ngcontent-%COMP%]{width:60px;height:60px;position:relative;top:50%;transform:translateY(-50%);border-radius:10px;overflow:hidden}ion-card[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   .logo-container[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{width:100%;height:100%;-o-object-fit:contain;object-fit:contain}ion-card[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   .titletext[_ngcontent-%COMP%]{min-height:16px;font-style:normal;line-height:1.14;letter-spacing:.01px;text-align:left;margin:2px 0;color:var(--primary-colors-voya-dark-blue)}ion-card[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   .titletext.disabled[_ngcontent-%COMP%]{color:var(--primary-colors-voya-black)}ion-card[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{position:static;height:16px;flex-grow:0;margin-top:4px;margin-bottom:4px;font-size:14px;font-weight:normal;font-stretch:normal;font-style:normal;line-height:1.14;letter-spacing:.04px;text-align:left;color:var(--secondary-colors-medium-gray-1)}ion-card[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   .balance[_ngcontent-%COMP%]{height:16px;flex-grow:0;font-size:16px;font-weight:bold;font-stretch:normal;font-style:normal;line-height:1;letter-spacing:.02px;text-align:left;margin:0;color:var(--toggle-txt-color)}\"]\n  });\n  return MXAccountListComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}