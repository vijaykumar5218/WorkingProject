{"ast":null,"code":"import { __awaiter } from \"tslib\";\nimport { IABMessage } from '../constants/message.enum';\nimport { DefaultIABController } from './default-iab-controller';\nexport class VoyaIABController extends DefaultIABController {\n  clearHeaderAndFooter() {\n    //Removes header\n    this.browser.executeScript({\n      code: `(function() { \n            if(document.getElementsByTagName('header').length > 0) {\n              document.getElementsByTagName('header')[0].remove();\n            }\n            })()`\n    }); //Remove Footer\n\n    this.browser.executeScript({\n      code: `(function() { \n            if(document.getElementsByTagName('footer').length > 0) {\n              document.getElementsByTagName('footer')[0].remove();\n            }\n            })()`\n    });\n  }\n\n  loadStopCallback() {\n    const _super = Object.create(null, {\n      loadStopCallback: {\n        get: () => super.loadStopCallback\n      }\n    });\n\n    return __awaiter(this, void 0, void 0, function* () {\n      _super.loadStopCallback.call(this);\n\n      this.fixLinks(); //Removes the current header and footer\n\n      setTimeout(() => {\n        this.clearHeaderAndFooter();\n      }, 250); //Display custom header\n\n      this.displayCustomHeader(this.headerText);\n    });\n  }\n\n  fixLinks() {\n    this.browser.executeScript({\n      code: `\n        (function() {\n            for(let link of document.getElementsByTagName(\"a\")) {\n              if(link.href!='javascript:void(0);') {\n                link.onclick=function(event) {\n                  event.preventDefault();\n                  event.stopPropagation();\n                  webkit.messageHandlers.cordova_iab.postMessage(JSON.stringify({message: \"${IABMessage.externalLink}\", url: link.href}));\n                };\n              }\n            }\n        })();\n        `\n    });\n  }\n\n}","map":null,"metadata":{},"sourceType":"module"}