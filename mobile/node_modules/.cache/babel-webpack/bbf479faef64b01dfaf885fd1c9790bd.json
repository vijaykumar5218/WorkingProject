{"ast":null,"code":"import _asyncToGenerator from \"/Users/vijay.a/Documents/GitHub/MYVOYAGE/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport * as accountText from '@shared-lib/services/account-info/constants/accountText.json';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@shared-lib/services/account-info/account-info.service\";\nimport * as i2 from \"@shared-lib/services/account/account.service\";\nimport * as i3 from \"@shared-lib/services/notification-setting/notification-setting.service\";\nimport * as i4 from \"@shared-lib/services/utility/utility.service\";\nimport * as i5 from \"@shared-lib/services/access/access.service\";\nimport * as i6 from \"@angular/common\";\nimport * as i7 from \"@ionic/angular\";\nimport * as i8 from \"./components/account-info-menu/account-info-menu.component\";\n\nfunction AccountInfoPage_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵelement(1, \"ion-spinner\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction AccountInfoPage_ng_template_2_app_account_info_menu_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"app-account-info-menu\", 5);\n  }\n\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"label\", ctx_r3.displayText.name)(\"value\", ctx_r3.participantData == null ? null : ctx_r3.participantData.displayName);\n  }\n}\n\nfunction AccountInfoPage_ng_template_2_app_account_info_menu_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"app-account-info-menu\", 6);\n  }\n\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"label\", ctx_r4.displayText == null ? null : ctx_r4.displayText.email)(\"value\", ctx_r4.email)(\"emailError\", ctx_r4.emailError);\n  }\n}\n\nfunction AccountInfoPage_ng_template_2_app_account_info_menu_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"app-account-info-menu\", 5);\n  }\n\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"label\", ctx_r5.displayText == null ? null : ctx_r5.displayText.loginInfo)(\"value\", ctx_r5.displayText == null ? null : ctx_r5.displayText.loginInfoDesc);\n  }\n}\n\nfunction AccountInfoPage_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtemplate(0, AccountInfoPage_ng_template_2_app_account_info_menu_0_Template, 1, 2, \"app-account-info-menu\", 3);\n    i0.ɵɵtemplate(1, AccountInfoPage_ng_template_2_app_account_info_menu_1_Template, 1, 3, \"app-account-info-menu\", 4);\n    i0.ɵɵelement(2, \"app-account-info-menu\", 5);\n    i0.ɵɵtemplate(3, AccountInfoPage_ng_template_2_app_account_info_menu_3_Template, 1, 2, \"app-account-info-menu\", 3);\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.participantData == null ? null : ctx_r2.participantData.displayName);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.email);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"label\", ctx_r2.displayText == null ? null : ctx_r2.displayText.phone)(\"value\", ctx_r2.phone);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", (ctx_r2.displayText == null ? null : ctx_r2.displayText.loginInfoDesc) && !ctx_r2.isHealthOnly);\n  }\n}\n\nexport let AccountInfoPage = /*#__PURE__*/(() => {\n  class AccountInfoPage {\n    constructor(accountInfoService, accountService, settingsService, utilityService, accessService) {\n      this.accountInfoService = accountInfoService;\n      this.accountService = accountService;\n      this.settingsService = settingsService;\n      this.utilityService = utilityService;\n      this.accessService = accessService;\n      this.displayText = JSON.parse(JSON.stringify(accountText)).default;\n      this.emailError = false;\n      this.loading = true;\n      this.isHealthOnly = false;\n    }\n\n    ngOnInit() {\n      this.isWeb = this.utilityService.getIsWeb();\n      this.fetchData();\n      this.getPrefs();\n      this.accessService.checkMyvoyageAccess().then(access => {\n        this.isHealthOnly = access.isHealthOnly;\n      });\n    }\n\n    getPrefs() {\n      var _this = this;\n\n      return _asyncToGenerator(function* () {\n        _this.settingsPrefSubscription = _this.settingsService.getNotificationSettings().subscribe(settingsPrefs => {\n          _this.email = settingsPrefs.primaryEmail?.email;\n          _this.phone = _this.accountInfoService.formatPhoneNumber(settingsPrefs.mobilePhone?.phoneNumber);\n          _this.emailError = settingsPrefs.primaryEmail?.lastFailedInd === 'Y';\n          _this.loading = false;\n        });\n      })();\n    }\n\n    fetchData() {\n      this.participantDataSubscription = this.accountService.getParticipant().subscribe(data => {\n        this.participantData = data;\n      });\n    }\n\n    ngOnDestroy() {\n      this.settingsPrefSubscription.unsubscribe();\n      this.participantDataSubscription.unsubscribe();\n    }\n\n  }\n\n  AccountInfoPage.ɵfac = function AccountInfoPage_Factory(t) {\n    return new (t || AccountInfoPage)(i0.ɵɵdirectiveInject(i1.AccountInfoService), i0.ɵɵdirectiveInject(i2.AccountService), i0.ɵɵdirectiveInject(i3.NotificationsSettingService), i0.ɵɵdirectiveInject(i4.SharedUtilityService), i0.ɵɵdirectiveInject(i5.AccessService));\n  };\n\n  AccountInfoPage.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: AccountInfoPage,\n    selectors: [[\"app-account-info\"]],\n    decls: 4,\n    vars: 3,\n    consts: [[3, \"ngClass\"], [4, \"ngIf\", \"ngIfElse\"], [\"elseBlock\", \"\"], [3, \"label\", \"value\", 4, \"ngIf\"], [3, \"label\", \"value\", \"emailError\", 4, \"ngIf\"], [3, \"label\", \"value\"], [3, \"label\", \"value\", \"emailError\"]],\n    template: function AccountInfoPage_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵtemplate(1, AccountInfoPage_div_1_Template, 2, 0, \"div\", 1);\n        i0.ɵɵtemplate(2, AccountInfoPage_ng_template_2_Template, 4, 5, \"ng-template\", null, 2, i0.ɵɵtemplateRefExtractor);\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        const _r1 = i0.ɵɵreference(3);\n\n        i0.ɵɵproperty(\"ngClass\", ctx.isWeb ? \"web-account-container\" : \"mobile-account-container\");\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.loading)(\"ngIfElse\", _r1);\n      }\n    },\n    directives: [i6.NgClass, i6.NgIf, i7.IonSpinner, i8.AccountInfoMenuComponent],\n    styles: [\"[_nghost-%COMP%]{background-color:var(--primary-colors-voya-white)}[_nghost-%COMP%]   .mobile-account-container[_ngcontent-%COMP%]{width:100%;padding:0 0 20px}[_nghost-%COMP%]   ion-spinner[_ngcontent-%COMP%]{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%)}[_nghost-%COMP%]   .web-account-container[_ngcontent-%COMP%]{margin:0 20px}\"]\n  });\n  return AccountInfoPage;\n})();","map":null,"metadata":{},"sourceType":"module"}