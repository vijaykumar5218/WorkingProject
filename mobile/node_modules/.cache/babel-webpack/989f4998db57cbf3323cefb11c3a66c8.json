{"ast":null,"code":"import { __awaiter } from \"tslib\";\nimport { EventEmitter } from '@angular/core';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@ionic/angular\";\nimport * as i2 from \"@shared-lib/services/journey/journey.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\n\nfunction TypeaheadComponent_ng_container_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"ion-header\");\n    i0.ɵɵelementStart(2, \"ion-toolbar\");\n    i0.ɵɵelementStart(3, \"ion-buttons\", 5);\n    i0.ɵɵelementStart(4, \"button\", 6);\n    i0.ɵɵlistener(\"click\", function TypeaheadComponent_ng_container_0_Template_button_click_4_listener() {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r4 = i0.ɵɵnextContext();\n      return ctx_r4.closeDialog();\n    });\n    i0.ɵɵtext(5, \" Close \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"ion-title\", 7);\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(8, \"hr\", 8);\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(7);\n    i0.ɵɵtextInterpolate(ctx_r0.element == null ? null : ctx_r0.element.label);\n  }\n}\n\nfunction TypeaheadComponent_ion_row_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"ion-row\");\n    i0.ɵɵelementStart(1, \"ion-searchbar\", 9, 10);\n    i0.ɵɵlistener(\"ionInput\", function TypeaheadComponent_ion_row_3_Template_ion_searchbar_ionInput_1_listener() {\n      i0.ɵɵrestoreView(_r8);\n\n      const _r6 = i0.ɵɵreference(2);\n\n      const ctx_r7 = i0.ɵɵnextContext();\n      return ctx_r7.onSearchInput(_r6.value);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"automation-id\", \"journeySearchbar\" + (ctx_r1.element == null ? null : ctx_r1.element.idSuffix))(\"value\", ctx_r1.searchValue);\n  }\n}\n\nfunction TypeaheadComponent_ion_list_5_ion_item_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-item\");\n    i0.ɵɵelement(1, \"ion-radio\", 13);\n    i0.ɵɵtext(2);\n    i0.ɵɵelement(3, \"hr\", 8);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const item_r10 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"value\", item_r10);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", item_r10.name, \" \");\n  }\n}\n\nfunction TypeaheadComponent_ion_list_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r12 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"ion-list\");\n    i0.ɵɵelementStart(1, \"ion-radio-group\", 11);\n    i0.ɵɵlistener(\"ngModelChange\", function TypeaheadComponent_ion_list_5_Template_ion_radio_group_ngModelChange_1_listener($event) {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r11 = i0.ɵɵnextContext();\n      return ctx_r11.selectedValue = $event;\n    })(\"ionChange\", function TypeaheadComponent_ion_list_5_Template_ion_radio_group_ionChange_1_listener() {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r13 = i0.ɵɵnextContext();\n      return ctx_r13.onItemSelected();\n    });\n    i0.ɵɵtemplate(2, TypeaheadComponent_ion_list_5_ion_item_2_Template, 4, 2, \"ion-item\", 12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngModel\", ctx_r2.selectedValue);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.filteredItems);\n  }\n}\n\nfunction TypeaheadComponent_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 14);\n    i0.ɵɵelement(1, \"ion-spinner\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nexport let TypeaheadComponent = /*#__PURE__*/(() => {\n  class TypeaheadComponent {\n    constructor(modalController, journeyService) {\n      this.modalController = modalController;\n      this.journeyService = journeyService;\n      this.filteredItems = [];\n      this.currentPage = 1;\n      this.totalPages = 1;\n      this.itemSelected = new EventEmitter();\n      this.loading = false;\n    }\n\n    ngOnInit() {\n      this.loading = true;\n      this.filterList(false);\n    }\n\n    ngOnChanges(changes) {\n      if (changes.searchValue) {\n        this.filterList(false);\n      }\n    }\n\n    onSearchInput(value) {\n      this.searchValue = value;\n      this.filterList(false);\n    }\n\n    filterList(scroll) {\n      return __awaiter(this, void 0, void 0, function* () {\n        if (!scroll) {\n          this.loading = true;\n          this.currentPage = 1;\n          this.totalPages = 1;\n          this.filteredItems = [];\n        }\n\n        if (this.currentPage <= this.totalPages) {\n          let searchUrl = 'page=' + this.currentPage;\n\n          if (this.searchValue) {\n            searchUrl = searchUrl + '&name=' + this.searchValue;\n          }\n\n          const result = yield this.journeyService.getFilteredList(searchUrl);\n\n          if (searchUrl.includes('name=') && searchUrl.split('name=')[1] === this.searchValue || !searchUrl.includes('name=') && !this.searchValue) {\n            this.totalPages = result.totalPages;\n            this.filteredItems = result.page === 1 ? result.options : [...this.filteredItems, ...result.options];\n          }\n\n          this.currentPage += 1;\n          this.loading = false;\n        }\n      });\n    }\n\n    onItemSelected() {\n      if (this.isWeb) {\n        this.itemSelected.emit(this.selectedValue);\n      } else {\n        this.modalController.dismiss(this.selectedValue);\n      }\n    }\n\n    closeDialog() {\n      this.modalController.dismiss();\n    }\n\n    onIonInfinite(event) {\n      this.filterList(true);\n      event.target.complete();\n    }\n\n  }\n\n  TypeaheadComponent.ɵfac = function TypeaheadComponent_Factory(t) {\n    return new (t || TypeaheadComponent)(i0.ɵɵdirectiveInject(i1.ModalController), i0.ɵɵdirectiveInject(i2.JourneyService));\n  };\n\n  TypeaheadComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: TypeaheadComponent,\n    selectors: [[\"journeys-steps-step-input-typeahead\"]],\n    inputs: {\n      element: \"element\",\n      searchValue: \"searchValue\",\n      isWeb: \"isWeb\"\n    },\n    outputs: {\n      itemSelected: \"itemSelected\"\n    },\n    features: [i0.ɵɵNgOnChangesFeature],\n    decls: 9,\n    vars: 4,\n    consts: [[4, \"ngIf\"], [1, \"p-0\", \"search-list\"], [1, \"list-wrap\"], [\"position\", \"bottom\", \"threshold\", \"50px\", 3, \"ionInfinite\"], [\"class\", \"journey-loader\", 4, \"ngIf\"], [\"slot\", \"start\"], [\"ion-button\", \"\", 1, \"close_btn\", 3, \"click\"], [1, \"title\"], [1, \"m-0\"], [\"placeholder\", \"Search\", 1, \"journeySearchbarTypeahead\", 3, \"automation-id\", \"value\", \"ionInput\"], [\"journeySearchbarTypeahead\", \"\"], [3, \"ngModel\", \"ngModelChange\", \"ionChange\"], [4, \"ngFor\", \"ngForOf\"], [\"slot\", \"start\", \"mode\", \"ios\", \"color\", \"btndarkblue\", 3, \"value\"], [1, \"journey-loader\"]],\n    template: function TypeaheadComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵtemplate(0, TypeaheadComponent_ng_container_0_Template, 9, 1, \"ng-container\", 0);\n        i0.ɵɵelementStart(1, \"ion-content\");\n        i0.ɵɵelementStart(2, \"ion-grid\", 1);\n        i0.ɵɵtemplate(3, TypeaheadComponent_ion_row_3_Template, 3, 2, \"ion-row\", 0);\n        i0.ɵɵelementStart(4, \"ion-row\", 2);\n        i0.ɵɵtemplate(5, TypeaheadComponent_ion_list_5_Template, 3, 2, \"ion-list\", 0);\n        i0.ɵɵelementStart(6, \"ion-infinite-scroll\", 3);\n        i0.ɵɵlistener(\"ionInfinite\", function TypeaheadComponent_Template_ion_infinite_scroll_ionInfinite_6_listener($event) {\n          return ctx.onIonInfinite($event);\n        });\n        i0.ɵɵelement(7, \"ion-infinite-scroll-content\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(8, TypeaheadComponent_div_8_Template, 2, 0, \"div\", 4);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵproperty(\"ngIf\", !ctx.isWeb);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngIf\", !ctx.isWeb);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", !ctx.loading);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngIf\", ctx.loading);\n      }\n    },\n    directives: [i3.NgIf, i1.IonContent, i1.IonGrid, i1.IonRow, i1.IonInfiniteScroll, i1.IonInfiniteScrollContent, i1.IonHeader, i1.IonToolbar, i1.IonButtons, i1.IonTitle, i1.IonSearchbar, i1.TextValueAccessor, i1.IonList, i1.IonRadioGroup, i1.SelectValueAccessor, i4.NgControlStatus, i4.NgModel, i3.NgForOf, i1.IonItem, i1.IonRadio, i1.RadioValueAccessor, i1.IonSpinner],\n    styles: [\"[_nghost-%COMP%]{display:contents;height:200px}[_nghost-%COMP%]   ion-content[_ngcontent-%COMP%]{background-color:var(--ion-color-white);--background: var(--ion-color-white)}[_nghost-%COMP%]   ion-searchbar[_ngcontent-%COMP%]{padding:0!important;border:1px solid var(--secondary-colors-medium-gray-2);border-radius:4px;--placeholder-color: var(--secondary-colors-voya-gray);--placeholder-opacity: 1;--padding-start: 16px;--padding-end: 25px;height:56px}[_nghost-%COMP%]   ion-searchbar[_ngcontent-%COMP%]::part(icon){color:var(--primary-colors-voya-black);opacity:1}[_nghost-%COMP%]   ion-searchbar[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 2px var(--primary-colors-voya-black)}[_nghost-%COMP%]   .close_btn[_ngcontent-%COMP%]{background-color:var(--ion-color-white);text-decoration:underline;display:flex;align-items:left;font-size:16px;color:var(--primary-colors-voya-dark-blue)!important;margin-right:22px;margin-left:12px;font-weight:normal}[_nghost-%COMP%]   .title[_ngcontent-%COMP%]{flex-grow:999;text-align:center;max-width:100%;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}[_nghost-%COMP%]   .search-list[_ngcontent-%COMP%]{background-color:var(--ion-color-white)!important}[_nghost-%COMP%]   .search-list[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]{padding:16px 16px 0}[_nghost-%COMP%]   .search-list[_ngcontent-%COMP%]   .list-wrap[_ngcontent-%COMP%]{width:100%;max-height:200px;padding:10px 20px}[_nghost-%COMP%]   .search-list[_ngcontent-%COMP%]   .list-wrap[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]{--ion-background-color: var(--ion-color-white) !important;margin:0;width:100%}[_nghost-%COMP%]   .search-list[_ngcontent-%COMP%]   .list-wrap[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{height:45px;font-size:16px!important;color:var(--color-dimgrey);color:var(--ion-card-color, var(--ion-item-color, var(--ion-color-step-550, var(--color-dimgrey))));--color: var( --ion-card-color, var(--ion-item-color, var(--ion-color-step-550, var(--color-dimgrey))) );--padding-start: 5px;width:100%;border-bottom:1px solid var(--secondary-colors-medium-gray-2)}[_nghost-%COMP%]   .search-list[_ngcontent-%COMP%]   .list-wrap[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-radio[_ngcontent-%COMP%]{--border-radius: 16px;--inner-border-radius: 16px;--color: var( --ion-card-color, var( --ion-item-color, var(--ion-color-step-550, var(--color-dimgrey)) ) );--color-checked: var(--primary-colors-voya-dark-blue);margin:4px 18px 0 5px!important}[_nghost-%COMP%]   .search-list[_ngcontent-%COMP%]   .list-wrap[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-radio.ios[_ngcontent-%COMP%]::part(container){width:20px;height:20px;border:2px solid var(--color-dimgrey);border:2px solid var(--ion-card-color, var(--ion-item-color, var(--ion-color-step-550, var(--color-dimgrey))));border-radius:16px}[_nghost-%COMP%]   .search-list[_ngcontent-%COMP%]   .list-wrap[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   .radio-checked.ios[_ngcontent-%COMP%]::part(container){border-color:var(--primary-colors-voya-dark-blue)}[_nghost-%COMP%]   .search-list[_ngcontent-%COMP%]   .list-wrap[_ngcontent-%COMP%]   ion-item.item-radio-checked[_ngcontent-%COMP%]{color:var(--primary-colors-voya-dark-blue)}[_nghost-%COMP%]   .search-list[_ngcontent-%COMP%]   .list-wrap[_ngcontent-%COMP%]   ion-item.item-radio-checked[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{color:var(--primary-colors-voya-dark-blue)}.journey-loader[_ngcontent-%COMP%]{text-align:center;height:100%;width:100%}\"]\n  });\n  return TypeaheadComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}