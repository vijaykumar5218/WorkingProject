{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@shared-lib/services/journey/journey.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@ionic/angular\";\n\nfunction TableSummaryComponent_ion_grid_0_ion_row_1_ion_col_1_ion_text_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-text\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const col_r7 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(col_r7.description);\n  }\n}\n\nfunction TableSummaryComponent_ion_grid_0_ion_row_1_ion_col_1_ion_text_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-text\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const col_r7 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(col_r7.header);\n  }\n}\n\nfunction TableSummaryComponent_ion_grid_0_ion_row_1_ion_col_1_ion_text_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-text\", 7);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const col_r7 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(col_r7.answer);\n  }\n}\n\nfunction TableSummaryComponent_ion_grid_0_ion_row_1_ion_col_1_ion_text_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-text\", 8);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const col_r7 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(col_r7.totalLabel);\n  }\n}\n\nconst _c0 = function (a0) {\n  return {\n    \"first-col\": a0\n  };\n};\n\nfunction TableSummaryComponent_ion_grid_0_ion_row_1_ion_col_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-col\", 3);\n    i0.ɵɵtemplate(1, TableSummaryComponent_ion_grid_0_ion_row_1_ion_col_1_ion_text_1_Template, 2, 1, \"ion-text\", 4);\n    i0.ɵɵtemplate(2, TableSummaryComponent_ion_grid_0_ion_row_1_ion_col_1_ion_text_2_Template, 2, 1, \"ion-text\", 4);\n    i0.ɵɵtemplate(3, TableSummaryComponent_ion_grid_0_ion_row_1_ion_col_1_ion_text_3_Template, 2, 1, \"ion-text\", 5);\n    i0.ɵɵtemplate(4, TableSummaryComponent_ion_grid_0_ion_row_1_ion_col_1_ion_text_4_Template, 2, 1, \"ion-text\", 6);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const col_r7 = ctx.$implicit;\n    const firstCol_r8 = ctx.first;\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(5, _c0, firstCol_r8));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", col_r7.description);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", col_r7.header);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", col_r7.id === \"input\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", col_r7.totalLabel);\n  }\n}\n\nconst _c1 = function (a0) {\n  return {\n    \"first-row\": a0\n  };\n};\n\nfunction TableSummaryComponent_ion_grid_0_ion_row_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-row\", 3);\n    i0.ɵɵtemplate(1, TableSummaryComponent_ion_grid_0_ion_row_1_ion_col_1_Template, 5, 7, \"ion-col\", 2);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const row_r4 = ctx.$implicit;\n    const firstRow_r5 = ctx.first;\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(2, _c1, firstRow_r5));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", row_r4.columns);\n  }\n}\n\nfunction TableSummaryComponent_ion_grid_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-grid\");\n    i0.ɵɵtemplate(1, TableSummaryComponent_ion_grid_0_ion_row_1_Template, 2, 4, \"ion-row\", 2);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.config.rows);\n  }\n}\n\nfunction TableSummaryComponent_ng_template_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-text\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r2.element.emptyTableText);\n  }\n}\n\nexport let TableSummaryComponent = /*#__PURE__*/(() => {\n  class TableSummaryComponent {\n    constructor(journeyService) {\n      this.journeyService = journeyService;\n    }\n\n    ngOnInit() {\n      const originalElement = this.journeyService.findElementByProp(this.content, 'answerId', this.element.answerId);\n      this.processTableConfig(originalElement);\n    }\n\n    processTableConfig(originalElement) {\n      const tableAnswer = this.journeyService.safeParse(this.element.answer);\n      this.config = {\n        rows: []\n      };\n      let noInputRows = 0;\n      let columnTotals = Array(originalElement.config.rows[0].columns.length).fill({\n        id: 'input',\n        answer: '-'\n      });\n      columnTotals = JSON.parse(JSON.stringify(columnTotals));\n      originalElement.config.rows.forEach(row => {\n        const noInput = row.columns.every(col => col.id !== 'input');\n\n        if (noInput) {\n          noInputRows++;\n          this.config.rows.push(row);\n          return;\n        }\n\n        this.processColumnAnswers(row, tableAnswer, columnTotals);\n      });\n\n      if (this.config.rows.length <= noInputRows) {\n        this.config.rows = [];\n      } else if (this.element.showTotal) {\n        columnTotals[0] = {\n          totalLabel: this.element.totalLabel\n        };\n        this.config.rows.push({\n          columns: columnTotals\n        });\n      }\n    }\n\n    processColumnAnswers(row, tableAnswer, columnTotals) {\n      let rowHasAnswer = false;\n      row.columns.forEach((col, index) => {\n        const cellAnswer = tableAnswer === null || tableAnswer === void 0 ? void 0 : tableAnswer.find(cellValue => cellValue.answerId === col.answerId);\n        col.answer = this.journeyService.isValueEmpty(cellAnswer === null || cellAnswer === void 0 ? void 0 : cellAnswer.value) ? '-' : cellAnswer === null || cellAnswer === void 0 ? void 0 : cellAnswer.value;\n        rowHasAnswer = rowHasAnswer || !!(cellAnswer === null || cellAnswer === void 0 ? void 0 : cellAnswer.value);\n\n        if (cellAnswer === null || cellAnswer === void 0 ? void 0 : cellAnswer.value) {\n          this.updateTotal(col, columnTotals, index);\n        }\n      });\n\n      if (rowHasAnswer) {\n        this.config.rows.push(row);\n      }\n    }\n\n    updateTotal(col, columnTotals, index) {\n      try {\n        const answer = parseFloat(col.answer.toString());\n\n        if (!isNaN(answer)) {\n          if (columnTotals[index].answer === '-') {\n            columnTotals[index].answer = '0';\n          }\n\n          columnTotals[index].answer = (parseFloat(columnTotals[index].answer) + answer).toString();\n        }\n      } catch (e) {\n        console.log(e);\n      }\n    }\n\n  }\n\n  TableSummaryComponent.ɵfac = function TableSummaryComponent_Factory(t) {\n    return new (t || TableSummaryComponent)(i0.ɵɵdirectiveInject(i1.JourneyService));\n  };\n\n  TableSummaryComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: TableSummaryComponent,\n    selectors: [[\"journeys-overview-summary-step-table\"]],\n    inputs: {\n      element: \"element\",\n      content: \"content\"\n    },\n    decls: 3,\n    vars: 2,\n    consts: [[4, \"ngIf\", \"ngIfElse\"], [\"emptyTableText\", \"\"], [3, \"ngClass\", 4, \"ngFor\", \"ngForOf\"], [3, \"ngClass\"], [4, \"ngIf\"], [\"class\", \"answer\", 4, \"ngIf\"], [\"class\", \"total-label\", 4, \"ngIf\"], [1, \"answer\"], [1, \"total-label\"]],\n    template: function TableSummaryComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵtemplate(0, TableSummaryComponent_ion_grid_0_Template, 2, 1, \"ion-grid\", 0);\n        i0.ɵɵtemplate(1, TableSummaryComponent_ng_template_1_Template, 2, 1, \"ng-template\", null, 1, i0.ɵɵtemplateRefExtractor);\n      }\n\n      if (rf & 2) {\n        const _r1 = i0.ɵɵreference(2);\n\n        i0.ɵɵproperty(\"ngIf\", ctx.config.rows.length > 0)(\"ngIfElse\", _r1);\n      }\n    },\n    directives: [i2.NgIf, i3.IonGrid, i2.NgForOf, i3.IonRow, i2.NgClass, i3.IonCol, i3.IonText],\n    styles: [\"ion-grid[_ngcontent-%COMP%]{--ion-grid-padding: 0px}ion-grid[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]{margin-bottom:5px}ion-grid[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]{text-align:right}ion-grid[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col.first-col[_ngcontent-%COMP%]{text-align:left}ion-grid[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   ion-text.answer[_ngcontent-%COMP%], ion-grid[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   ion-text.total-label[_ngcontent-%COMP%]{font-weight:bold}ion-text[_ngcontent-%COMP%]{color:var(--primary-colors-voya-black);font-size:16px}\"]\n  });\n  return TableSummaryComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}