{"ast":null,"code":"import * as pageText from '@shared-lib/services/account/models/retirement-account/info/info-tab.json';\nimport { HeaderType } from '@shared-lib/constants/headerType.enum';\nimport { FooterType } from '@shared-lib/modules/footer/constants/footerType.enum';\nimport { NetWorthComponent } from '@shared-lib/components/net-worth/net-worth.component';\nimport { BudgetWidgetComponent } from '@shared-lib/modules/accounts/components/budget-widget/budget-widget.component';\nimport { SpendingWidgetComponent } from '@shared-lib/modules/accounts/components/spending-widget/spending-widget.component';\nimport { ACCOUNT_LIFECYCLE_EVENTS } from '../account.page';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@shared-lib/services/header-type/header-type.service\";\nimport * as i2 from \"@shared-lib/modules/footer/services/footer-type/footer-type.service\";\nimport * as i3 from \"@shared-lib/services/account/account.service\";\nimport * as i4 from \"@shared-lib/services/mx-service/mx.service\";\nimport * as i5 from \"@angular/router\";\nimport * as i6 from \"@shared-lib/modules/event-manager/event-manager/event-manager.service\";\nimport * as i7 from \"@shared-lib/services/access/access.service\";\nimport * as i8 from \"@angular/common\";\nimport * as i9 from \"../../../../../../../shared-lib/components/net-worth/net-worth.component\";\nimport * as i10 from \"../../../../../../../shared-lib/components/mx-error/mxerror.component\";\nimport * as i11 from \"../../../../../../../shared-lib/modules/accounts/components/account-summary/account-summary.component\";\nimport * as i12 from \"../../../../../../../shared-lib/modules/accounts/components/mx-account-list/mx-account-list.component\";\nimport * as i13 from \"@ionic/angular\";\nimport * as i14 from \"../../../../../../../shared-lib/modules/accounts/components/spending-widget/spending-widget.component\";\nimport * as i15 from \"../../../../../../../shared-lib/modules/accounts/components/budget-widget/budget-widget.component\";\n\nfunction SummaryComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"div\", 3);\n  }\n}\n\nfunction SummaryComponent_app_mxerror_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"app-mxerror\");\n  }\n}\n\nfunction SummaryComponent_ng_container_4_ion_text_10_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"ion-text\", 13);\n    i0.ɵɵlistener(\"click\", function SummaryComponent_ng_container_4_ion_text_10_Template_ion_text_click_0_listener() {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r5 = i0.ɵɵnextContext(2);\n      return ctx_r5.handleManageAccountClick();\n    });\n    i0.ɵɵelementStart(1, \"a\", 14);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r3.pageText.manageAccounts);\n  }\n}\n\nfunction SummaryComponent_ng_container_4_ion_card_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-card\");\n    i0.ɵɵelement(1, \"app-spending-widget\", 15);\n    i0.ɵɵelement(2, \"app-budget-widget\", 16);\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction SummaryComponent_ng_container_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"app-account-summary\", 4);\n    i0.ɵɵlistener(\"clickedAccountInfo\", function SummaryComponent_ng_container_4_Template_app_account_summary_clickedAccountInfo_1_listener($event) {\n      i0.ɵɵrestoreView(_r8);\n      const ctx_r7 = i0.ɵɵnextContext();\n      return ctx_r7.sendtitle($event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(2, \"app-mx-account-list\", 5);\n    i0.ɵɵlistener(\"mxAccountClicked\", function SummaryComponent_ng_container_4_Template_app_mx_account_list_mxAccountClicked_2_listener() {\n      i0.ɵɵrestoreView(_r8);\n      const ctx_r9 = i0.ɵɵnextContext();\n      return ctx_r9.routeToMXAccount();\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"ion-row\", 6);\n    i0.ɵɵelementStart(4, \"ion-col\", 7);\n    i0.ɵɵelementStart(5, \"ion-button\", 8);\n    i0.ɵɵlistener(\"click\", function SummaryComponent_ng_container_4_Template_ion_button_click_5_listener() {\n      i0.ɵɵrestoreView(_r8);\n      const ctx_r10 = i0.ɵɵnextContext();\n      return ctx_r10.handleAddAccountClick();\n    });\n    i0.ɵɵtext(6);\n    i0.ɵɵelement(7, \"ion-icon\", 9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"ion-row\", 10);\n    i0.ɵɵelementStart(9, \"ion-col\", 11);\n    i0.ɵɵtemplate(10, SummaryComponent_ng_container_4_ion_text_10_Template, 3, 1, \"ion-text\", 12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(11, SummaryComponent_ng_container_4_ion_card_11_Template, 3, 0, \"ion-card\", 1);\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"accounts\", ctx_r2.accounts);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\"\", ctx_r2.pageText.addAccount, \" \");\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.showManageAccounts);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r2.isHealthOnly || ctx_r2.hasMXUser);\n  }\n}\n\nexport let SummaryComponent = /*#__PURE__*/(() => {\n  class SummaryComponent {\n    constructor(headerType, footerType, accountService, mxService, router, eventManagerService, accessService) {\n      this.headerType = headerType;\n      this.footerType = footerType;\n      this.accountService = accountService;\n      this.mxService = mxService;\n      this.router = router;\n      this.eventManagerService = eventManagerService;\n      this.accessService = accessService;\n      this.pageText = JSON.parse(JSON.stringify(pageText)).default;\n      this.hasMXUser = false;\n      this.showManageAccounts = false;\n      this.actionOption = {\n        headername: 'Accounts',\n        btnright: true,\n        buttonRight: {\n          name: '',\n          link: 'notification'\n        }\n      };\n      this.firstLoad = true;\n      this.isHealthOnly = false;\n    }\n\n    ngOnInit() {\n      this.subscription = this.mxService.getMxAccountConnect().subscribe(data => {\n        this.showManageAccounts = data.accounts.length > 0;\n      });\n      this.mxUserSubscription = this.mxService.getIsMxUserByMyvoyageAccess().subscribe(hasMXUser => {\n        this.hasMXUser = hasMXUser;\n      });\n      this.accessService.checkMyvoyageAccess().then(accessRes => {\n        this.isHealthOnly = accessRes.isHealthOnly;\n      });\n    }\n\n    ionViewWillEnter() {\n      this.headerType.publish({\n        type: HeaderType.navbar,\n        actionOption: this.actionOption\n      });\n      this.footerType.publish({\n        type: FooterType.tabsnav,\n        selectedTab: 'account'\n      });\n      this.accountService.publishSelectedTab('summary');\n      this.getAccountSummary();\n\n      if (!this.firstLoad) {\n        this.netWorthWidget.widget.refreshWidget();\n        this.spendingWidget.widget.refreshWidget();\n        this.budgethWidget.widget.refreshWidget();\n      }\n    }\n\n    ionViewDidEnter() {\n      if (this.firstLoad) {\n        this.eventsSubscription = this.eventManagerService.createSubscriber(ACCOUNT_LIFECYCLE_EVENTS).subscribe(this.ionViewWillEnter.bind(this));\n      }\n\n      this.firstLoad = false;\n    }\n\n    getAccountSummary() {\n      this.accountService.getJSON().then(data => {\n        this.accounts = data;\n      });\n    }\n\n    sendtitle(account) {\n      if (account.isVoyaAccessPlan || account.sourceSystem == 'NQPenCalPlan') {\n        return;\n      }\n\n      this.accountService.setAccount(account);\n      this.router.navigateByUrl('/account/retirement-account');\n    }\n\n    routeToMXAccount() {\n      this.router.navigateByUrl('/account/mxdetails-account');\n    }\n\n    handleManageAccountClick() {\n      this.router.navigateByUrl('/account/manage-accounts');\n    }\n\n    handleAddAccountClick() {\n      this.router.navigateByUrl('/account/add-accounts');\n    }\n\n    ngOnDestroy() {\n      this.subscription.unsubscribe();\n      this.mxUserSubscription.unsubscribe();\n\n      if (this.eventsSubscription) {\n        this.eventsSubscription.unsubscribe();\n      }\n    }\n\n  }\n\n  SummaryComponent.ɵfac = function SummaryComponent_Factory(t) {\n    return new (t || SummaryComponent)(i0.ɵɵdirectiveInject(i1.HeaderTypeService), i0.ɵɵdirectiveInject(i2.FooterTypeService), i0.ɵɵdirectiveInject(i3.AccountService), i0.ɵɵdirectiveInject(i4.MXService), i0.ɵɵdirectiveInject(i5.Router), i0.ɵɵdirectiveInject(i6.EventManagerService), i0.ɵɵdirectiveInject(i7.AccessService));\n  };\n\n  SummaryComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: SummaryComponent,\n    selectors: [[\"app-summary\"]],\n    viewQuery: function SummaryComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(NetWorthComponent, 5);\n        i0.ɵɵviewQuery(SpendingWidgetComponent, 5);\n        i0.ɵɵviewQuery(BudgetWidgetComponent, 5);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.netWorthWidget = _t.first);\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.spendingWidget = _t.first);\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.budgethWidget = _t.first);\n      }\n    },\n    decls: 5,\n    vars: 4,\n    consts: [[\"id\", \"background-container\", 4, \"ngIf\"], [4, \"ngIf\"], [\"tagName\", \"mx-net-worth-accounts\", 3, \"usePlaceholder\"], [\"id\", \"background-container\"], [\"id\", \"account-info\", 3, \"accounts\", \"clickedAccountInfo\"], [3, \"mxAccountClicked\"], [1, \"mt-10\"], [1, \"margins\"], [\"size\", \"small\", \"id\", \"addaccount\", \"name\", \"Add Account\", \"shape\", \"round\", \"expand\", \"block\", \"color\", \"btncolor\", 1, \"font-18\", \"btnview\", 3, \"click\"], [\"slot\", \"start\", \"name\", \"add-circle-outline\", 1, \"font\"], [1, \"manage-accounts-row\"], [1, \"ion-text-center\", \"managetext\"], [\"id\", \"manage-accounts\", 3, \"click\", 4, \"ngIf\"], [\"id\", \"manage-accounts\", 3, \"click\"], [1, \"linkcolor\", \"underline\"], [\"tagName\", \"mx-spending-widget-accounts\"], [\"tagName\", \"mx-budget-widget-accounts\"]],\n    template: function SummaryComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\");\n        i0.ɵɵtemplate(1, SummaryComponent_div_1_Template, 1, 0, \"div\", 0);\n        i0.ɵɵtemplate(2, SummaryComponent_app_mxerror_2_Template, 1, 0, \"app-mxerror\", 1);\n        i0.ɵɵelement(3, \"app-net-worth\", 2);\n        i0.ɵɵtemplate(4, SummaryComponent_ng_container_4_Template, 12, 4, \"ng-container\", 1);\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", !ctx.isHealthOnly || ctx.hasMXUser);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.hasMXUser);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"usePlaceholder\", true);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", !ctx.isHealthOnly || ctx.hasMXUser);\n      }\n    },\n    directives: [i8.NgIf, i9.NetWorthComponent, i10.MXErrorComponent, i11.AccountSummaryComponent, i12.MXAccountListComponent, i13.IonRow, i13.IonCol, i13.IonButton, i13.IonIcon, i13.IonText, i13.IonCard, i14.SpendingWidgetComponent, i15.BudgetWidgetComponent],\n    styles: [\"#background-container[_ngcontent-%COMP%]{background:linear-gradient(var(--primary-colors-voya-dark-blue),var(--white));height:280px;margin-bottom:74px;position:absolute;width:100%;top:0}#background-container[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]{padding:0}ion-card[_ngcontent-%COMP%]{--color: var(--primary-colors-voya-black);font-size:16px;border-radius:var(--card-border-radius);box-shadow:var(--card-box-shadow);padding:20px;margin:20px}ion-row[_ngcontent-%COMP%]{padding:0}ion-row.manage-accounts-row[_ngcontent-%COMP%]{margin-bottom:30px}ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]{padding:0}ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   .managetext[_ngcontent-%COMP%]{width:111px;height:24px;margin:0 auto}ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   .btnview[_ngcontent-%COMP%]{width:186px;height:40px;margin:22px auto;border-radius:20px}ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:20px}\"]\n  });\n  return SummaryComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}