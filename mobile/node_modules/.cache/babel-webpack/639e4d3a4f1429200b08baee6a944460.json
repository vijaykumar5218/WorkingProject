{"ast":null,"code":"define(['./EmployerMatch'], function (EmployerMatch) {\n  //  Constructor\n  var ConsecutiveTierEmployerMatch = function (nTierCount) {\n    //  Private Var Declarations ------------------------------------\n    var _em = null; //  Privileged Method Declarations ------------------------------------\n\n    this.getEmployerMatchObj = function () {\n      return _em;\n    };\n\n    this.getTierCount = function () {\n      return _em != null ? _em.getTierCount() : 0;\n    };\n\n    this.setTier = function (nTierNumber, dRange, dMatchRate) {\n      return _setTier(nTierNumber - 1, dRange, dMatchRate);\n    };\n\n    this.setFirstTier = function (dRange, dMatchRate) {\n      return _setTier(0, dRange, dMatchRate);\n    };\n\n    this.setSecondTier = function (dRange, dMatchRate) {\n      return _setTier(1, dRange, dMatchRate);\n    };\n\n    this.setThirdTier = function (dRange, dMatchRate) {\n      return _setTier(2, dRange, dMatchRate);\n    };\n\n    this.setLastTier = function (dRange, dMatchRate) {\n      if (_em.getTierCount() > 0) return _setTier(_em.getTierCount() - 1, dRange, dMatchRate);\n      return false;\n    };\n\n    this.setTierMatchRate = function (nTierNumber, dMatchRate) {\n      return _setTierMatchRate(nTierNumber - 1, dMatchRate);\n    };\n\n    this.setTierMatchRange = function (nTierNumber, dRange) {\n      return _setTierRange(nTierNumber - 1, dRange);\n    };\n\n    this.getTierMatchRate = function (nTierNumber) {\n      return _getTierMatchRate(nTierNumber - 1);\n    };\n\n    this.getTierMatchRange = function (nTierNumber) {\n      return _getTierMatchRange(nTierNumber - 1);\n    };\n\n    this.getEmployerMatchingContrib = function (dContrib, dSalary) {\n      return _em.getEmployerMatchingContrib(dContrib, dSalary);\n    };\n\n    this.getEmployerMatchingContribPerTier = function (dContrib, dSalary, nIndex) {\n      return _em.getEmployerMatchingContribPerTier(dContrib, dSalary, nIndex);\n    }; //  Private Method Declarations ------------------------------------\n\n\n    (function init() {\n      _em = new EmployerMatch();\n\n      for (var n = 0; n < nTierCount; n++) _em.addMatchTier(0.0, 0.0, 0.0);\n    })();\n\n    function _setTierRange(nIndex, dRange) {\n      var bReturn = false;\n\n      var dFloor = _em.getMatchTierFloorFactor(nIndex);\n\n      if (dFloor + dRange != _em.getMatchTierCeilingFactor(nIndex)) {\n        bReturn = _em.setMatchTierCeilingFactor(nIndex, Math.min(dFloor + dRange, 1.0)); // adjust remaining ranges\n\n        for (var n = nIndex + 1; n < _em.getTierCount(); n++) {\n          if (dFloor + dRange < 1.0) {\n            // new floor factor\n            dFloor = dFloor + dRange; // new range\n\n            var mtcf = _em.getMatchTierCeilingFactor(n);\n\n            var mtff = _em.getMatchTierFloorFactor(n);\n\n            dRange = mtcf - mtff;\n\n            _em.setMatchTierFloorFactor(n, dFloor);\n\n            _em.setMatchTierCeilingFactor(n, Math.min(dFloor + dRange, 1.0));\n          } else {\n            _em.setMatchTierFloorFactor(n, 0.0);\n\n            _em.setMatchTierCeilingFactor(n, 0.0);\n          }\n        }\n      }\n\n      return bReturn;\n    }\n\n    function _setTierMatchRate(nIndex, dMatchRate) {\n      return _em.setMatchTierMatchRate(nIndex, dMatchRate);\n    }\n\n    function _getTierMatchRate(nIndex) {\n      return _em.getMatchTierMatchRate(nIndex);\n    }\n\n    function _getTierMatchRange(nIndex) {\n      return _em.getMatchTierCeilingFactor(nIndex) - _em.getMatchTierFloorFactor(nIndex);\n    }\n\n    function _setTier(nIndex, dRange, dMatchRate) {\n      _setTierRange(nIndex, dRange);\n\n      return _setTierMatchRate(nIndex, dMatchRate);\n    }\n  };\n\n  return ConsecutiveTierEmployerMatch;\n});","map":null,"metadata":{},"sourceType":"script"}