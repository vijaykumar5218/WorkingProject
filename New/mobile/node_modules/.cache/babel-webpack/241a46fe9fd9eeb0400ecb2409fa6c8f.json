{"ast":null,"code":"import _asyncToGenerator from \"/Users/vijay.a/Documents/GitHub/MYVOYAGE/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@shared-lib/services/benefits/benefits.service\";\nimport * as i2 from \"@shared-lib/services/utility/utility.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"../bstsmart-card/bstsmart-card.component\";\n\nfunction BSTSmartCardListComponent_ng_container_0_app_bstsmart_card_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"app-bstsmart-card\", 2);\n  }\n\n  if (rf & 2) {\n    const card_r1 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵproperty(\"content\", card_r1);\n  }\n}\n\nfunction BSTSmartCardListComponent_ng_container_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, BSTSmartCardListComponent_ng_container_0_app_bstsmart_card_1_Template, 1, 1, \"app-bstsmart-card\", 1);\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const card_r1 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", card_r1.show);\n  }\n}\n\nexport let BSTSmartCardListComponent = /*#__PURE__*/(() => {\n  class BSTSmartCardListComponent {\n    constructor(benefitService, utilityService) {\n      this.benefitService = benefitService;\n      this.utilityService = utilityService;\n      this.isWeb = false;\n    }\n\n    ngOnInit() {\n      var _this = this;\n\n      return _asyncToGenerator(function* () {\n        _this.isWeb = _this.utilityService.getIsWeb();\n        const smartCardData = yield _this.benefitService.fetchBstSmartCards();\n        const content = yield _this.benefitService.getNoBenefitContents();\n        const smartCardContent = JSON.parse(content.Insights_BSTsmartcard_Nudge);\n\n        _this.setUpCardContent(smartCardContent, smartCardData);\n      })();\n    }\n\n    setUpCardContent(smartCardContent, smartCardData) {\n      smartCardContent.forEach(scContent => {\n        scContent.show = smartCardData[scContent.name];\n\n        if (scContent.name == 'sc2') {\n          scContent.body = this.replaceDrugListInString(scContent.body, smartCardData.smartcardDetail);\n          scContent.modalContent.topBody = this.replaceDrugListInString(scContent.modalContent.topBody, smartCardData.smartcardDetail);\n        }\n      });\n      this.cards = smartCardContent;\n    }\n\n    replaceDrugListInString(string, scData) {\n      if (!scData) {\n        return string;\n      }\n\n      const match = string.match('<druglist>(.*?)</druglist>');\n      const rowData = match[1];\n      const drugRows = [];\n      scData.forEach(dat => {\n        let row = rowData.split('').join('');\n        row = row.replace('{alternativeNdcName}', dat.alternativeNdcName);\n        row = row.replace('{currentNdcName}', dat.currentNdcName);\n        drugRows.push(row);\n      });\n      return string.replace(/<druglist>.*?<\\/druglist>/, drugRows.join('<br><br>'));\n    }\n\n  }\n\n  BSTSmartCardListComponent.ɵfac = function BSTSmartCardListComponent_Factory(t) {\n    return new (t || BSTSmartCardListComponent)(i0.ɵɵdirectiveInject(i1.BenefitsService), i0.ɵɵdirectiveInject(i2.SharedUtilityService));\n  };\n\n  BSTSmartCardListComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: BSTSmartCardListComponent,\n    selectors: [[\"app-bstsmart-card-list\"]],\n    decls: 1,\n    vars: 1,\n    consts: [[4, \"ngFor\", \"ngForOf\"], [3, \"content\", 4, \"ngIf\"], [3, \"content\"]],\n    template: function BSTSmartCardListComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵtemplate(0, BSTSmartCardListComponent_ng_container_0_Template, 2, 1, \"ng-container\", 0);\n      }\n\n      if (rf & 2) {\n        i0.ɵɵproperty(\"ngForOf\", ctx.cards);\n      }\n    },\n    directives: [i3.NgForOf, i3.NgIf, i4.BSTSmartCardComponent],\n    encapsulation: 2\n  });\n  return BSTSmartCardListComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}