{"ast":null,"code":"import { __awaiter } from \"tslib\";\nimport * as commonContent from '@shared-lib/services/notification-setting/constants/common-content.json';\nimport { Subscription } from 'rxjs';\nimport { FooterType } from '@shared-lib/modules/footer/constants/footerType.enum';\nimport { HeaderType } from '../../../../constants/headerType.enum';\nimport * as eventC from '@shared-lib/services/event-tracker/constants/event-tracking.json';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../../../services/header-footer-type/headerFooterType.service\";\nimport * as i2 from \"@shared-lib/services/notification-setting/notification-setting.service\";\nimport * as i3 from \"@ionic/angular\";\nimport * as i4 from \"@angular/router\";\nimport * as i5 from \"@shared-lib/services/utility/utility.service\";\nimport * as i6 from \"@shared-lib/services/platform/platform.service\";\nimport * as i7 from \"@shared-lib/services/journey/journey.service\";\nimport * as i8 from \"@shared-lib/services/event-tracker/event-tracking.service\";\nimport * as i9 from \"@angular/common\";\nimport * as i10 from \"@angular/forms\";\nimport * as i11 from \"./components/notification-events/notification-events.component\";\n\nfunction NotificationSettingsPage_p_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 11);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.settingsContent.NotificationSettingsDescription, \" \");\n  }\n}\n\nfunction NotificationSettingsPage_ion_col_13_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"ion-col\", 12);\n    i0.ɵɵelementStart(1, \"ion-button\", 13);\n    i0.ɵɵlistener(\"click\", function NotificationSettingsPage_ion_col_13_Template_ion_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r3 = i0.ɵɵnextContext();\n      return ctx_r3.undoSettings();\n    });\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.content.cancelLabel, \"\");\n  }\n}\n\nfunction NotificationSettingsPage_div_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"div\", 14);\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"innerHtml\", ctx_r2.settingsContent.NotificationSettingsFooterTxt, i0.ɵɵsanitizeHtml);\n  }\n}\n\nexport let NotificationSettingsPage = /*#__PURE__*/(() => {\n  class NotificationSettingsPage {\n    constructor(headerFooterType, settingService, loadingController, router, utilityService, platformService, journeyService, eventTrackingService) {\n      this.headerFooterType = headerFooterType;\n      this.settingService = settingService;\n      this.loadingController = loadingController;\n      this.router = router;\n      this.utilityService = utilityService;\n      this.platformService = platformService;\n      this.journeyService = journeyService;\n      this.eventTrackingService = eventTrackingService;\n      this.content = commonContent.default;\n      this.actionOption = {\n        headername: this.content.headername,\n        btnleft: true,\n        btnright: true,\n        buttonLeft: {\n          name: '',\n          link: 'settings'\n        },\n        buttonRight: {\n          name: '',\n          link: 'notification'\n        }\n      };\n      this.subscription = new Subscription();\n      this.savePath = '/settings';\n      this.eventContent = eventC;\n      this.isWeb = this.utilityService.getIsWeb();\n      this.platformService.isDesktop().subscribe(data => {\n        this.isDesktop = data;\n      });\n    }\n\n    ngOnInit() {\n      this.initData();\n    }\n\n    ionViewWillEnter() {\n      return __awaiter(this, void 0, void 0, function* () {\n        const backLink = this.journeyService.getJourneyBackButton();\n\n        if (backLink) {\n          this.actionOption.buttonLeft.link = backLink;\n          this.savePath = backLink;\n        } else {\n          this.actionOption.buttonLeft.link = 'settings';\n          this.savePath = '/settings';\n        }\n\n        this.headerFooterType.publishType({\n          type: HeaderType.navbar,\n          actionOption: this.actionOption\n        }, {\n          type: FooterType.tabsnav,\n          selectedTab: 'settings'\n        });\n        this.journeyService.setJourneyBackButton(undefined);\n      });\n    }\n\n    initData() {\n      return __awaiter(this, void 0, void 0, function* () {\n        this.settingsContent = yield this.settingService.getSettingsContent();\n        this.settingService.setPrefsSettings();\n      });\n    }\n\n    saveSettings() {\n      return __awaiter(this, void 0, void 0, function* () {\n        const loading = yield this.loadingController.create({\n          translucent: true\n        });\n        yield loading.present();\n        yield this.settingService.saveNotificationPrefs();\n        this.trackNotificationPreferenceUpdate();\n        this.settingService.getNotificationSettings(true);\n        const rootPath = this.isWeb && !this.isDesktop ? 'more' : this.savePath;\n        this.router.navigateByUrl(rootPath);\n        loading.dismiss();\n      });\n    }\n\n    undoSettings() {\n      this.settingService.prefSettingsInitialized = false;\n      this.settingService.setPrefsSettings();\n      this.router.navigateByUrl(this.savePath);\n    }\n\n    ngOnDestroy() {\n      this.subscription.unsubscribe();\n    }\n\n    trackNotificationPreferenceUpdate() {\n      this.eventTrackingService.eventTracking({\n        eventName: this.eventContent.eventTrackingPreference.eventName\n      });\n    }\n\n  }\n\n  NotificationSettingsPage.ɵfac = function NotificationSettingsPage_Factory(t) {\n    return new (t || NotificationSettingsPage)(i0.ɵɵdirectiveInject(i1.HeaderFooterTypeService), i0.ɵɵdirectiveInject(i2.NotificationsSettingService), i0.ɵɵdirectiveInject(i3.LoadingController), i0.ɵɵdirectiveInject(i4.Router), i0.ɵɵdirectiveInject(i5.SharedUtilityService), i0.ɵɵdirectiveInject(i6.PlatformService), i0.ɵɵdirectiveInject(i7.JourneyService), i0.ɵɵdirectiveInject(i8.EventTrackingService));\n  };\n\n  NotificationSettingsPage.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: NotificationSettingsPage,\n    selectors: [[\"app-notification-settings\"]],\n    decls: 20,\n    vars: 15,\n    consts: [[\"id\", \"notification-settings\", 3, \"ngClass\"], [1, \"ion-no-padding\", \"ion-no-margin\"], [1, \"ion-no-padding\", \"font-18\", \"font-w-600\"], [\"class\", \"settings-header\", 4, \"ngIf\"], [\"name\", \"HPNotificationSettingsForm\", \"id\", \"HPNotificationSettingsForm\"], [3, \"title\", \"subTitle\", \"basePropName\"], [1, \"button-row\"], [\"class\", \"cancel-button\", 4, \"ngIf\"], [1, \"continue-button\"], [\"id\", \"save-button\", \"shape\", \"round\", \"expand\", \"block\", \"fill\", \"outline\", 1, \"save-button\", 3, \"ngClass\", \"click\"], [\"class\", \"settings-footer\", 3, \"innerHtml\", 4, \"ngIf\"], [1, \"settings-header\"], [1, \"cancel-button\"], [\"id\", \"cancel-button\", \"shape\", \"round\", \"expand\", \"block\", \"fill\", \"outline\", 1, \"cancel-button\", 3, \"click\"], [1, \"settings-footer\", 3, \"innerHtml\"]],\n    template: function NotificationSettingsPage_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelementStart(1, \"ion-grid\", 1);\n        i0.ɵɵelementStart(2, \"ion-row\");\n        i0.ɵɵelementStart(3, \"ion-col\");\n        i0.ɵɵelement(4, \"label\", 2);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(5, \"ion-row\");\n        i0.ɵɵelementStart(6, \"ion-col\");\n        i0.ɵɵtemplate(7, NotificationSettingsPage_p_7_Template, 2, 1, \"p\", 3);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(8, \"form\", 4);\n        i0.ɵɵelement(9, \"app-notification-events\", 5);\n        i0.ɵɵelement(10, \"app-notification-events\", 5);\n        i0.ɵɵelement(11, \"app-notification-events\", 5);\n        i0.ɵɵelementStart(12, \"ion-row\", 6);\n        i0.ɵɵtemplate(13, NotificationSettingsPage_ion_col_13_Template, 3, 1, \"ion-col\", 7);\n        i0.ɵɵelementStart(14, \"ion-col\", 8);\n        i0.ɵɵelementStart(15, \"ion-button\", 9);\n        i0.ɵɵlistener(\"click\", function NotificationSettingsPage_Template_ion_button_click_15_listener() {\n          return ctx.saveSettings();\n        });\n        i0.ɵɵtext(16);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(17, \"ion-row\");\n        i0.ɵɵelementStart(18, \"ion-col\");\n        i0.ɵɵtemplate(19, NotificationSettingsPage_div_19_Template, 1, 1, \"div\", 10);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵproperty(\"ngClass\", ctx.isWeb ? \"web-notification-settings\" : \"mobile-notification-settings\");\n        i0.ɵɵadvance(7);\n        i0.ɵɵproperty(\"ngIf\", ctx.settingsContent);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"title\", ctx.content.highPriority)(\"subTitle\", ctx.settingsContent == null ? null : ctx.settingsContent.HighPriorityEventsDescription)(\"basePropName\", \"HPPref\");\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"title\", ctx.content.accountActivity)(\"subTitle\", ctx.settingsContent == null ? null : ctx.settingsContent.AccountActivitiesDescription)(\"basePropName\", \"AAPref\");\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"title\", ctx.content.insights)(\"subTitle\", ctx.settingsContent == null ? null : ctx.settingsContent.InsightsRecommendationsDescription)(\"basePropName\", \"INPref\");\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", !ctx.isWeb);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngClass\", ctx.isWeb ? \"save-button-middle\" : \"\");\n        i0.ɵɵadvance(1);\n        i0.ɵɵtextInterpolate(ctx.content.saveLabel);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngIf\", ctx.settingsContent);\n      }\n    },\n    directives: [i9.NgClass, i3.IonGrid, i3.IonRow, i3.IonCol, i9.NgIf, i10.ɵNgNoValidate, i10.NgControlStatusGroup, i10.NgForm, i11.NotificationEventsComponent, i3.IonButton],\n    styles: [\"[_nghost-%COMP%]{font-size:16px;background-color:var(--ion-color-white);padding:0}@media screen and (max-width: 920px){[_nghost-%COMP%]   .web-notification-settings[_ngcontent-%COMP%]{margin:90px 20px 110px}}@media screen and (min-width: 920px){[_nghost-%COMP%]   .web-notification-settings[_ngcontent-%COMP%]{margin:0 20px}}[_nghost-%COMP%]   .mobile-notification-settings[_ngcontent-%COMP%]{margin-left:20px;margin-right:20px}[_nghost-%COMP%]   .settings-header[_ngcontent-%COMP%]{margin-bottom:25px}[_nghost-%COMP%]   ion-row.button-row[_ngcontent-%COMP%]{margin:25px auto}[_nghost-%COMP%]   ion-row.button-row[_ngcontent-%COMP%]   ion-col.cancel-button[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{margin-right:10px}[_nghost-%COMP%]   ion-row.button-row[_ngcontent-%COMP%]   ion-col.continue-button[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{margin-left:10px}[_nghost-%COMP%]   ion-row.button-row[_ngcontent-%COMP%]   ion-col.continue-button[_ngcontent-%COMP%]   .save-button-middle[_ngcontent-%COMP%]{margin:auto}[_nghost-%COMP%]   ion-row.button-row[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{margin:auto;width:130px;height:40px}[_nghost-%COMP%]   ion-row.button-row[_ngcontent-%COMP%]   ion-button.cancel-button[_ngcontent-%COMP%]{--background: var(--ion-color-white);--color: var(--primary-colors-voya-dark-blue);--border-color: var(--primary-colors-voya-dark-blue);--background-activated: var(--primary-colors-voya-dark-blue)}[_nghost-%COMP%]   ion-row.button-row[_ngcontent-%COMP%]   ion-button.save-button[_ngcontent-%COMP%]{--background-activated: var(--ion-color-white);--color-activated: var(--primary-colors-voya-dark-blue);--border-color: var(--secondary-colors-medium-gray-3);--background: var(--primary-colors-voya-dark-blue);--color: var(--ion-color-white)}\"]\n  });\n  return NotificationSettingsPage;\n})();","map":null,"metadata":{},"sourceType":"module"}