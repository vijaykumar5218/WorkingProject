{"ast":null,"code":"import { __awaiter } from \"tslib\";\nimport homeContent from '@shared-lib/constants/home/home-content.json';\nimport moment from 'moment';\nimport { Subscription } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@shared-lib/services/benefits/benefits.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@shared-lib/services/consent/consent.service\";\nimport * as i4 from \"../../../services/access/access.service\";\nimport * as i5 from \"@shared-lib/services/tpa-stream/tpastream.service\";\nimport * as i6 from \"@angular/common\";\nimport * as i7 from \"@ionic/angular\";\nimport * as i8 from \"./components/workplace-medical-spending/workplace-medical-spending.component\";\n\nfunction MedicalSpendingComponent_ng_container_0_ion_card_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"ion-card\", 5);\n    i0.ɵɵelementStart(1, \"ion-row\", 6);\n    i0.ɵɵelementStart(2, \"ion-col\", 7);\n    i0.ɵɵelementStart(3, \"ion-row\");\n    i0.ɵɵelementStart(4, \"ion-text\", 8);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"ion-row\");\n    i0.ɵɵelementStart(7, \"strong\", 9);\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"ion-row\");\n    i0.ɵɵelementStart(10, \"ion-col\", 10);\n    i0.ɵɵelementStart(11, \"ion-text\", 11);\n    i0.ɵɵtext(12);\n    i0.ɵɵpipe(13, \"currency\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"ion-row\", 12);\n    i0.ɵɵelementStart(15, \"ion-col\", 10);\n    i0.ɵɵelementStart(16, \"ion-text\", 13);\n    i0.ɵɵlistener(\"click\", function MedicalSpendingComponent_ng_container_0_ion_card_1_Template_ion_text_click_16_listener() {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r5 = i0.ɵɵnextContext(2);\n      return ctx_r5.viewDetails();\n    });\n    i0.ɵɵelementStart(17, \"u\");\n    i0.ɵɵelementStart(18, \"a\", 14);\n    i0.ɵɵtext(19);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(20, \"ion-col\", 15);\n    i0.ɵɵelement(21, \"img\", 16);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r3.content.totHealthSpend, \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate2(\"\", ctx_r3.content.asOfDate, \" \", ctx_r3.currentDate, \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(13, 5, ctx_r3.totalSpend + ctx_r3.totalPremiumSavvi), \" \");\n    i0.ɵɵadvance(7);\n    i0.ɵɵtextInterpolate(ctx_r3.content.spendDetails);\n  }\n}\n\nfunction MedicalSpendingComponent_ng_container_0_ion_col_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"ion-col\", 17);\n    i0.ɵɵelementStart(1, \"ion-row\");\n    i0.ɵɵelementStart(2, \"ion-col\");\n    i0.ɵɵelementStart(3, \"ion-text\", 18);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementStart(5, \"ion-text\", 6);\n    i0.ɵɵtext(6);\n    i0.ɵɵpipe(7, \"currency\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"ion-row\");\n    i0.ɵɵelementStart(9, \"ion-text\", 19);\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"ion-text\", 20);\n    i0.ɵɵlistener(\"click\", function MedicalSpendingComponent_ng_container_0_ion_col_3_Template_ion_text_click_11_listener() {\n      i0.ɵɵrestoreView(_r8);\n      const ctx_r7 = i0.ɵɵnextContext(2);\n      return ctx_r7.viewDetails();\n    })(\"keydown.enter\", function MedicalSpendingComponent_ng_container_0_ion_col_3_Template_ion_text_keydown_enter_11_listener() {\n      i0.ɵɵrestoreView(_r8);\n      const ctx_r9 = i0.ɵɵnextContext(2);\n      return ctx_r9.viewDetails();\n    });\n    i0.ɵɵelementStart(12, \"u\");\n    i0.ɵɵelementStart(13, \"a\", 21);\n    i0.ɵɵtext(14);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r4.content.totHealthSpendWeb, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(7, 5, ctx_r4.totalSpend + ctx_r4.totalPremiumSavvi));\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate2(\" \", ctx_r4.content.asOfDate, \"\", ctx_r4.currentDate, \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r4.content.spendDetails);\n  }\n}\n\nfunction MedicalSpendingComponent_ng_container_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, MedicalSpendingComponent_ng_container_0_ion_card_1_Template, 22, 7, \"ion-card\", 2);\n    i0.ɵɵelementStart(2, \"ion-row\", 3);\n    i0.ɵɵtemplate(3, MedicalSpendingComponent_ng_container_0_ion_col_3_Template, 15, 7, \"ion-col\", 4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.hasConsent && ctx_r0.totalSpend + ctx_r0.totalPremiumSavvi > 0);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.hasConsent && ctx_r0.totalSpend + ctx_r0.totalPremiumSavvi > 0);\n  }\n}\n\nfunction MedicalSpendingComponent_ng_template_1_workplace_medical_spending_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"workplace-medical-spending\", 23);\n  }\n\n  if (rf & 2) {\n    const ctx_r10 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"totalSpend\", ctx_r10.totalSpend)(\"totalPremiumSavvi\", ctx_r10.totalPremiumSavvi)(\"hasConsent\", ctx_r10.hasConsent)(\"isTPA\", ctx_r10.isTPA)(\"isTPAWaiting\", ctx_r10.isTPAWaiting)(\"forMobilePlansPage\", ctx_r10.forMobilePlansPage);\n  }\n}\n\nfunction MedicalSpendingComponent_ng_template_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtemplate(0, MedicalSpendingComponent_ng_template_1_workplace_medical_spending_0_Template, 1, 6, \"workplace-medical-spending\", 22);\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.isMyvoyageEnabled);\n  }\n}\n\nexport let MedicalSpendingComponent = /*#__PURE__*/(() => {\n  class MedicalSpendingComponent {\n    constructor(benefitsService, router, consentService, accessService, tpaService) {\n      this.benefitsService = benefitsService;\n      this.router = router;\n      this.consentService = consentService;\n      this.accessService = accessService;\n      this.tpaService = tpaService;\n      this.totalSpend = 0;\n      this.totalPremiumSavvi = 0;\n      this.content = homeContent;\n      this.subscription = new Subscription();\n      this.hasConsent = false;\n      this.isTPA = false;\n      this.isTPAWaiting = false;\n      this.forMobilePlansPage = false;\n    }\n\n    ngOnInit() {\n      return __awaiter(this, void 0, void 0, function* () {\n        const accessResult = yield this.accessService.checkMyvoyageAccess();\n        this.isMyvoyageEnabled = accessResult.enableMyVoyage === 'Y';\n        this.isTPA = accessResult.enableTPA === 'Y';\n        this.currentDate = moment(Date.now()).format('MMMM DD, YYYY');\n\n        if (this.isTPA) {\n          this.skipConsentInitTPA();\n        } else {\n          this.checkAuthorization();\n        }\n      });\n    }\n\n    skipConsentInitTPA() {\n      this.getBenefits();\n      this.getTotalSpendTPA();\n    }\n\n    checkAuthorization() {\n      this.subscription.add(this.consentService.getMedicalConsent().subscribe(consent => {\n        this.hasConsent = consent;\n\n        if (this.hasConsent) {\n          this.getSpending();\n          this.getBenefits();\n        }\n      }));\n    }\n\n    getTotalSpendTPA() {\n      this.subscription.add(this.tpaService.getTPAData().subscribe(tpaData => {\n        this.hasConsent = tpaData.carriers.length > 0;\n        this.isTPAWaiting = this.hasConsent && tpaData.claims.length < 1;\n        const year = moment().year();\n        const data = tpaData.groupingClaimsByYear[year.toString()];\n\n        if (data) {\n          this.totalSpend = data.outOfPocketAmountTotal;\n        } else {\n          this.totalSpend = 0;\n        }\n      }));\n    }\n\n    getSpending() {\n      return __awaiter(this, void 0, void 0, function* () {\n        const healthDates = {\n          startDate: moment().startOf('year').format('MM/DD/YYYY'),\n          endDate: moment().endOf('year').format('MM/DD/YYYY')\n        };\n        const healthValues = yield this.benefitsService.fetchSpending(healthDates);\n        this.totalSpend = this.benefitsService.getTotalCostBST(healthValues);\n      });\n    }\n\n    getBenefits() {\n      return __awaiter(this, void 0, void 0, function* () {\n        const benefitValues = yield this.benefitsService.getBenefits();\n        this.totalPremiumSavvi = this.benefitsService.getTotalPremium(benefitValues);\n      });\n    }\n\n    viewDetails() {\n      this.router.navigateByUrl('coverages');\n    }\n\n    ngOnDestroy() {\n      this.subscription.unsubscribe();\n    }\n\n  }\n\n  MedicalSpendingComponent.ɵfac = function MedicalSpendingComponent_Factory(t) {\n    return new (t || MedicalSpendingComponent)(i0.ɵɵdirectiveInject(i1.BenefitsService), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.ConsentService), i0.ɵɵdirectiveInject(i4.AccessService), i0.ɵɵdirectiveInject(i5.TPAStreamService));\n  };\n\n  MedicalSpendingComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: MedicalSpendingComponent,\n    selectors: [[\"app-medical-spending\"]],\n    inputs: {\n      isWorkplaceDashboard: \"isWorkplaceDashboard\",\n      forMobilePlansPage: \"forMobilePlansPage\"\n    },\n    decls: 3,\n    vars: 2,\n    consts: [[4, \"ngIf\", \"ngIfElse\"], [\"workplaceDashboardTemp\", \"\"], [\"class\", \"total-health-spend-mobile\", 4, \"ngIf\"], [1, \"total-health-spending-web\"], [\"class\", \"display-health-spend\", 4, \"ngIf\"], [1, \"total-health-spend-mobile\"], [1, \"health-spend\"], [1, \"health-spend-content\"], [1, \"ths-text\"], [1, \"ths-date\"], [1, \"ion-no-padding\"], [\"id\", \"medical-spending\", 1, \"ths-amount\"], [1, \"ths-details\"], [\"id\", \"spend-details-text\", 1, \"view-details\", 3, \"click\"], [\"routerLinkActive\", \"active\", 1, \"navlink\"], [1, \"health-spend-img-container\"], [\"alt\", \"\", \"src\", \"assets/icon/TotalHealthSpends.svg\", \"id\", \"spend-details-img\", 1, \"ths-img\"], [1, \"display-health-spend\"], [\"id\", \"medical-spending-web\", 1, \"total-health-spend\"], [\"id\", \"asOfDate\", 1, \"as-of-date\"], [\"id\", \"spend-details-web\", 1, \"view-details\", 3, \"click\", \"keydown.enter\"], [\"routerLinkActive\", \"active\", \"tabindex\", \"0\", 1, \"navlink\"], [3, \"totalSpend\", \"totalPremiumSavvi\", \"hasConsent\", \"isTPA\", \"isTPAWaiting\", \"forMobilePlansPage\", 4, \"ngIf\"], [3, \"totalSpend\", \"totalPremiumSavvi\", \"hasConsent\", \"isTPA\", \"isTPAWaiting\", \"forMobilePlansPage\"]],\n    template: function MedicalSpendingComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵtemplate(0, MedicalSpendingComponent_ng_container_0_Template, 4, 2, \"ng-container\", 0);\n        i0.ɵɵtemplate(1, MedicalSpendingComponent_ng_template_1_Template, 1, 1, \"ng-template\", null, 1, i0.ɵɵtemplateRefExtractor);\n      }\n\n      if (rf & 2) {\n        const _r1 = i0.ɵɵreference(2);\n\n        i0.ɵɵproperty(\"ngIf\", !ctx.isWorkplaceDashboard && !ctx.forMobilePlansPage)(\"ngIfElse\", _r1);\n      }\n    },\n    directives: [i6.NgIf, i7.IonRow, i7.IonCard, i7.IonCol, i7.IonText, i8.WorkplaceMedicalSpendingComponent],\n    pipes: [i6.CurrencyPipe],\n    styles: [\".total-health-spend-mobile[_ngcontent-%COMP%]{background-color:var(--primary-colors-voya-dark-blue);padding:10px 0 10px 10px;margin-top:5%}@media screen and (max-width: 920px){.total-health-spend-mobile[_ngcontent-%COMP%]{display:block}}@media screen and (min-width: 920px){.total-health-spend-mobile[_ngcontent-%COMP%]{display:none}}.total-health-spend-mobile[_ngcontent-%COMP%]   .health-spend[_ngcontent-%COMP%]{height:100%}.total-health-spend-mobile[_ngcontent-%COMP%]   .health-spend[_ngcontent-%COMP%]   .health-spend-content[_ngcontent-%COMP%]{max-height:166px;padding:10px}.total-health-spend-mobile[_ngcontent-%COMP%]   .health-spend[_ngcontent-%COMP%]   .health-spend-content[_ngcontent-%COMP%]   .ths-text[_ngcontent-%COMP%]{font-size:18px;font-weight:bold;line-height:1.33;letter-spacing:.03px;color:var(--primary-colors-voya-white)}.total-health-spend-mobile[_ngcontent-%COMP%]   .health-spend[_ngcontent-%COMP%]   .health-spend-content[_ngcontent-%COMP%]   .ths-date[_ngcontent-%COMP%]{font-weight:normal;color:var(--primary-colors-voya-white)}.total-health-spend-mobile[_ngcontent-%COMP%]   .health-spend[_ngcontent-%COMP%]   .health-spend-content[_ngcontent-%COMP%]   .ths-details[_ngcontent-%COMP%]{color:var(--primary-colors-voya-white);margin-top:20px;font-size:18px}.total-health-spend-mobile[_ngcontent-%COMP%]   .health-spend[_ngcontent-%COMP%]   .health-spend-content[_ngcontent-%COMP%]   .ths-details[_ngcontent-%COMP%]   .navlink[_ngcontent-%COMP%]{color:var(--primary-colors-voya-white)}.total-health-spend-mobile[_ngcontent-%COMP%]   .health-spend[_ngcontent-%COMP%]   .health-spend-content[_ngcontent-%COMP%]   .ths-details[_ngcontent-%COMP%]   .view-details[_ngcontent-%COMP%]{cursor:pointer}.total-health-spend-mobile[_ngcontent-%COMP%]   .health-spend[_ngcontent-%COMP%]   .health-spend-content[_ngcontent-%COMP%]   .ths-amount[_ngcontent-%COMP%]{font-size:24px;font-weight:600;letter-spacing:.06px;color:var(--primary-colors-voya-white)}.total-health-spend-mobile[_ngcontent-%COMP%]   .health-spend[_ngcontent-%COMP%]   .health-spend-img-container[_ngcontent-%COMP%]{margin:auto;max-width:177px}.total-health-spend-mobile[_ngcontent-%COMP%]   .health-spend[_ngcontent-%COMP%]   .health-spend-img-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:177px;height:130px}.total-health-spending-web[_ngcontent-%COMP%]{max-width:1440px;margin:auto}@media screen and (max-width: 920px){.total-health-spending-web[_ngcontent-%COMP%]{display:none}}@media screen and (min-width: 920px){.total-health-spending-web[_ngcontent-%COMP%]{display:flex;margin-top:7px}}.total-health-spending-web[_ngcontent-%COMP%]   .total-health-spend[_ngcontent-%COMP%]{font-size:24px;color:var(--primary-colors-voya-black)}.total-health-spending-web[_ngcontent-%COMP%]   .total-health-spend[_ngcontent-%COMP%]   .health-spend[_ngcontent-%COMP%]{margin:0;font-size:32px;font-weight:normal;color:var(--secondary-colors-voya-dark-orange)}.total-health-spending-web[_ngcontent-%COMP%]   .as-of-date[_ngcontent-%COMP%]{margin-left:8px;font-size:16px;color:var(--secondary-colors-medium-gray-1)}.total-health-spending-web[_ngcontent-%COMP%]   .display-health-spend[_ngcontent-%COMP%]{margin-left:50px}.total-health-spending-web[_ngcontent-%COMP%]   .navlink[_ngcontent-%COMP%]{cursor:pointer;margin-left:12px;font-weight:400;font-size:16px;line-height:20px;letter-spacing:.005em;-webkit-text-decoration-line:underline;text-decoration-line:underline;color:var(--primary-colors-voya-dark-blue);-webkit-text-decoration-color:var(--primary-colors-voya-dark-blue);text-decoration-color:var(--primary-colors-voya-dark-blue)}\"]\n  });\n  return MedicalSpendingComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}