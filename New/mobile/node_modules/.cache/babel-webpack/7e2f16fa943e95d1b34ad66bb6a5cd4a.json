{"ast":null,"code":"import { from, ReplaySubject, Subscription } from 'rxjs';\nimport { endPoints } from './constants/endpoints';\nimport navbarContent from '@web/app/modules/shared/components/header/constants/content.json';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@shared-lib/services/base/base-factory-provider\";\nimport * as i2 from \"@shared-lib/services/utility/utility.service\";\nimport * as i3 from \"../logout/logout.service\";\nexport let DesktopFooterService = /*#__PURE__*/(() => {\n  class DesktopFooterService {\n    constructor(baseService, utilityService, logoutService) {\n      this.baseService = baseService;\n      this.utilityService = utilityService;\n      this.logoutService = logoutService;\n      this.endPoints = endPoints;\n      this.navbarContent = navbarContent;\n      this.subscription = new Subscription();\n      this.sectionNavigatioData = null;\n      this.sectionNavigatioSubject = null;\n      this.endPoints = this.utilityService.appendBaseUrlToEndpoints(endPoints);\n      this.sectionNavigatioSubject = new ReplaySubject(1);\n    }\n\n    getSectionNavigation(refresh = false) {\n      if (!this.sectionNavigatioData || refresh) {\n        this.sectionNavigatioData = from(this.baseService.get(this.endPoints.sectionNavigation));\n        const allAccountSubscription = this.sectionNavigatioData.subscribe(data => {\n          const footerJSON = JSON.parse(data.FooterJSON);\n          footerJSON.FooterJSON.config.iconLinks.forEach((iconLink, index) => {\n            if (iconLink.iconName === 'profile') {\n              this.logoutService.setPostLogoutRedirect();\n              this.navbarContent.dropdownItems.forEach(dropdownItem => {\n                if (dropdownItem.id === 'logout_dropdown_navbar_item') {\n                  footerJSON.FooterJSON.config.iconLinks[index].linkURL = dropdownItem.link;\n                }\n              });\n            }\n          });\n          const workplaceHeader = data.workplaceHeader ? JSON.parse(data.workplaceHeader) : {};\n          this.sectionNavigatioSubject.next(Object.assign(Object.assign({}, footerJSON), {\n            workplaceHeader: workplaceHeader\n          }));\n        });\n        this.subscription.add(allAccountSubscription);\n      }\n\n      return this.sectionNavigatioSubject;\n    }\n\n    ngOnDestroy() {\n      this.subscription.unsubscribe();\n    }\n\n  }\n\n  DesktopFooterService.ɵfac = function DesktopFooterService_Factory(t) {\n    return new (t || DesktopFooterService)(i0.ɵɵinject(i1.BaseService), i0.ɵɵinject(i2.SharedUtilityService), i0.ɵɵinject(i3.WebLogoutService));\n  };\n\n  DesktopFooterService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: DesktopFooterService,\n    factory: DesktopFooterService.ɵfac,\n    providedIn: 'root'\n  });\n  return DesktopFooterService;\n})();","map":null,"metadata":{},"sourceType":"module"}