{"ast":null,"code":"import { __awaiter } from \"tslib\";\nimport { EventEmitter } from '@angular/core';\nimport pageText from '../../constants/madlib.json';\nimport { OMStatus } from '@shared-lib/services/account/models/orange-money.model';\nimport { MadlibModalComponent } from '../madlib-modal/madlib-modal.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/orange-money.service\";\nimport * as i2 from \"@ionic/angular\";\nimport * as i3 from \"@angular/common\";\n\nfunction MadLibComponent_ion_button_7_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r2 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"ion-button\", 3);\n    i0.ɵɵlistener(\"click\", function MadLibComponent_ion_button_7_Template_ion_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r2);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return ctx_r1.openMadlibModal();\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.pageText.showHow, \" \");\n  }\n}\n\nexport let MadLibComponent = /*#__PURE__*/(() => {\n  class MadLibComponent {\n    constructor(orangeMoneyService, modalController) {\n      this.orangeMoneyService = orangeMoneyService;\n      this.modalController = modalController;\n      this.pageText = pageText;\n      this.madlibClose = new EventEmitter();\n    }\n\n    ngOnInit() {\n      this.fetchData();\n    }\n\n    fetchData() {\n      this.orangeDataSubscription = this.orangeMoneyService.getOrangeData().subscribe(omData => {\n        const status = this.orangeMoneyService.getOrangeMoneyStatus(omData);\n\n        switch (status) {\n          case OMStatus.ORANGE_DATA:\n          case OMStatus.FE_DATA:\n            //Hide this whole component\n            this.headerText = '';\n            this.bodyText = '';\n            this.hideButton = true;\n            break;\n\n          case OMStatus.MADLIB_OM:\n            //Show orange money madlib\n            this.headerText = pageText.ontrack;\n            this.bodyText = pageText.fewSteps;\n            this.hideButton = false;\n            break;\n\n          case OMStatus.MADLIB_FE:\n          case OMStatus.SERVICE_DOWN:\n          case OMStatus.UNKNOWN:\n            //Show FE madlib\n            this.headerText = '';\n            this.bodyText = this.pageText.visitWeb;\n            this.hideButton = true;\n            break;\n        }\n      });\n    }\n\n    openMadlibModal() {\n      return __awaiter(this, void 0, void 0, function* () {\n        const modal = yield this.modalController.create({\n          component: MadlibModalComponent,\n          cssClass: 'modal-not-fullscreen',\n          swipeToClose: false\n        });\n        modal.onDidDismiss().then(() => {\n          this.madlibClose.emit();\n        });\n        return modal.present();\n      });\n    }\n\n    ngOnDestroy() {\n      this.orangeDataSubscription.unsubscribe();\n    }\n\n  }\n\n  MadLibComponent.ɵfac = function MadLibComponent_Factory(t) {\n    return new (t || MadLibComponent)(i0.ɵɵdirectiveInject(i1.OrangeMoneyService), i0.ɵɵdirectiveInject(i2.ModalController));\n  };\n\n  MadLibComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: MadLibComponent,\n    selectors: [[\"app-mad-lib\"]],\n    outputs: {\n      madlibClose: \"madlibClose\"\n    },\n    decls: 8,\n    vars: 3,\n    consts: [[1, \"madlib-card\"], [\"src\", \"assets/icon/tilted-dollarbill.png\", \"alt\", \"\"], [\"class\", \"font-18 save-button\", \"name\", \"submit\", \"shape\", \"round\", \"expand\", \"block\", \"type\", \"submit\", \"color\", \"btncolor\", \"id\", \"showmebutton\", 3, \"click\", 4, \"ngIf\"], [\"name\", \"submit\", \"shape\", \"round\", \"expand\", \"block\", \"type\", \"submit\", \"color\", \"btncolor\", \"id\", \"showmebutton\", 1, \"font-18\", \"save-button\", 3, \"click\"]],\n    template: function MadLibComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"ion-card\", 0);\n        i0.ɵɵelement(1, \"img\", 1);\n        i0.ɵɵelementStart(2, \"ion-card-contents\");\n        i0.ɵɵelementStart(3, \"p\");\n        i0.ɵɵtext(4);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(5, \"p\");\n        i0.ɵɵtext(6);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(7, MadLibComponent_ion_button_7_Template, 2, 1, \"ion-button\", 2);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(4);\n        i0.ɵɵtextInterpolate(ctx.headerText);\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate1(\" \", ctx.bodyText, \" \");\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", !ctx.hideButton);\n      }\n    },\n    directives: [i2.IonCard, i3.NgIf, i2.IonButton],\n    styles: [\".madlib-card[_ngcontent-%COMP%]{padding:0 20px 20px;margin:0}.madlib-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px}.madlib-card[_ngcontent-%COMP%]   .save-button[_ngcontent-%COMP%]{width:158px;height:40px;border-radius:20px;margin:auto}\"]\n  });\n  return MadLibComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}