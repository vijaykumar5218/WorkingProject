{"ast":null,"code":"import { Subscription } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@shared-lib/services/journey/journey.service\";\nimport * as i2 from \"@shared-lib/services/journey/journeyUtilityService/journey-utility.service\";\nimport * as i3 from \"@angular/platform-browser\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@ionic/angular\";\nimport * as i6 from \"./desc/desc.component\";\n\nconst _c0 = function (a0, a1, a2) {\n  return {\n    color: a0,\n    \"font-size\": a1,\n    \"font-weight\": a2\n  };\n};\n\nfunction IntroComponent_ion_text_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"ion-text\", 4);\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"ngStyle\", i0.ɵɵpureFunction3(2, _c0, ctx_r0.element.textColor, ctx_r0.element.headerFontSize, ctx_r0.element.bold === false ? \"normal\" : undefined))(\"innerHTML\", ctx_r0.headerValueSafe || ctx_r0.element.header, i0.ɵɵsanitizeHtml);\n  }\n}\n\nfunction IntroComponent_journeys_steps_step_intro_desc_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"journeys-steps-step-intro-desc\", 5);\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"descStrings\", ctx_r1.descStrings)(\"element\", ctx_r1.element);\n  }\n}\n\nconst _c1 = function (a0) {\n  return {\n    \"margin-bottom\": a0\n  };\n};\n\nfunction IntroComponent_ng_container_3_ul_1_li_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\", 7);\n    i0.ɵɵelement(1, \"journeys-steps-step-intro-desc\", 5);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const listDescString_r6 = ctx.$implicit;\n    const ctx_r5 = i0.ɵɵnextContext(3);\n    i0.ɵɵproperty(\"ngStyle\", i0.ɵɵpureFunction1(3, _c1, ctx_r5.element.listMargin));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"descStrings\", listDescString_r6)(\"element\", ctx_r5.element);\n  }\n}\n\nconst _c2 = function (a0, a1) {\n  return {\n    color: a0,\n    \"font-size\": a1\n  };\n};\n\nfunction IntroComponent_ng_container_3_ul_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ul\", 7);\n    i0.ɵɵtemplate(1, IntroComponent_ng_container_3_ul_1_li_1_Template, 2, 5, \"li\", 8);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"ngStyle\", i0.ɵɵpureFunction2(2, _c2, ctx_r3.element.textColor, ctx_r3.element.descFontSize));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r3.listDescStrings);\n  }\n}\n\nfunction IntroComponent_ng_container_3_ol_2_li_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\", 7);\n    i0.ɵɵelement(1, \"journeys-steps-step-intro-desc\", 5);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const listDescString_r8 = ctx.$implicit;\n    const ctx_r7 = i0.ɵɵnextContext(3);\n    i0.ɵɵproperty(\"ngStyle\", i0.ɵɵpureFunction1(3, _c1, ctx_r7.element.listMargin));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"descStrings\", listDescString_r8)(\"element\", ctx_r7.element);\n  }\n}\n\nfunction IntroComponent_ng_container_3_ol_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ol\", 7);\n    i0.ɵɵtemplate(1, IntroComponent_ng_container_3_ol_2_li_1_Template, 2, 5, \"li\", 8);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"ngStyle\", i0.ɵɵpureFunction2(2, _c2, ctx_r4.element.textColor, ctx_r4.element.descFontSize));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r4.listDescStrings);\n  }\n}\n\nfunction IntroComponent_ng_container_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, IntroComponent_ng_container_3_ul_1_Template, 2, 5, \"ul\", 6);\n    i0.ɵɵtemplate(2, IntroComponent_ng_container_3_ol_2_Template, 2, 5, \"ol\", 6);\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.element.listType !== \"ordered\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.element.listType === \"ordered\");\n  }\n}\n\nconst _c3 = function (a0, a1) {\n  return {\n    \"margin-bottom\": a0,\n    \"margin-top\": a1\n  };\n};\n\nexport let IntroComponent = /*#__PURE__*/(() => {\n  class IntroComponent {\n    constructor(journeyService, journeyUtilityService, sanitizer) {\n      this.journeyService = journeyService;\n      this.journeyUtilityService = journeyUtilityService;\n      this.sanitizer = sanitizer;\n      this.webviewCount = 0;\n      this.videoCount = 0;\n      this.appLinkCount = 0;\n      this.subscription = new Subscription();\n    }\n\n    ngOnInit() {\n      var _a;\n\n      this.checkAndSetDescStrings();\n\n      if ((_a = this.element) === null || _a === void 0 ? void 0 : _a.descriptions) {\n        this.listDescStrings = [];\n        this.element.descriptions.forEach(desc => {\n          const descStrings = this.setDescStrings(desc);\n          this.listDescStrings.push(descStrings);\n        });\n      }\n\n      if (this.element.elements) {\n        const journeyId = this.journeyService.getCurrentJourney().journeyID;\n        this.subscription.add(this.journeyService.journeyServiceMap[journeyId].valueChange.subscribe(() => {\n          this.checkAndSetDescStrings();\n          this.processInnerHTMLData(journeyId);\n        }));\n      }\n    }\n\n    checkAndSetDescStrings() {\n      var _a;\n\n      if ((_a = this.element) === null || _a === void 0 ? void 0 : _a.description) {\n        this.descStrings = this.setDescStrings(this.element.description);\n      }\n    }\n\n    processInnerHTMLData(journeyId) {\n      var _a;\n\n      this.headerValueSafe = this.sanitizer.bypassSecurityTrustHtml(this.journeyUtilityService.processInnerHTMLData(this.element.header, this.element.elements, journeyId));\n      (_a = this.descStrings) === null || _a === void 0 ? void 0 : _a.forEach(description => {\n        description.textSafe = this.sanitizer.bypassSecurityTrustHtml(this.journeyUtilityService.processInnerHTMLData(description.text, this.element.elements, journeyId));\n      });\n    }\n\n    setDescStrings(str) {\n      let descStrings;\n\n      if ((str === null || str === void 0 ? void 0 : str.includes('webview{')) || (str === null || str === void 0 ? void 0 : str.includes('video{')) || (str === null || str === void 0 ? void 0 : str.includes('appLink{'))) {\n        descStrings = [];\n        const split = str.split('{');\n        const end = split[1].indexOf('}');\n        const linkText = split[1].substring(0, end);\n        const restOfText = split[1].substring(end + 1) + ['', ...split.slice(2)].join('{');\n\n        if (split[0].substring(split[0].length - 7) === 'webview') {\n          const text = split[0].substring(0, split[0].length - 7);\n          descStrings.push({\n            text: text\n          });\n          descStrings.push({\n            text: linkText,\n            link: this.element.webviewLinks[this.webviewCount],\n            header: this.element.webviewHeaders ? this.element.webviewHeaders[this.webviewCount] : '',\n            id: 'journeyWebviewLink' + this.webviewCount + this.element.idSuffix,\n            toolbar: this.getToolbar()\n          });\n          this.webviewCount++;\n        } else if (split[0].substring(split[0].length - 5) === 'video') {\n          const text = split[0].substring(0, split[0].length - 5);\n          descStrings.push({\n            text: text\n          });\n          descStrings.push({\n            text: linkText,\n            videoUrl: this.element.videoUrls[this.videoCount],\n            playerId: this.element.playerIds[this.videoCount],\n            id: 'journeyVideoLink' + this.videoCount + this.element.idSuffix\n          });\n          this.videoCount++;\n        } else {\n          const text = split[0].substring(0, split[0].length - 7);\n          descStrings.push({\n            text: text\n          });\n          descStrings.push({\n            text: linkText,\n            appLink: this.element.appLinks[this.appLinkCount],\n            id: 'journeyAppLink' + this.appLinkCount + this.element.idSuffix\n          });\n          this.appLinkCount++;\n        }\n\n        if (restOfText) {\n          const strings = this.setDescStrings(restOfText);\n          descStrings = descStrings.concat(strings);\n        }\n      } else {\n        descStrings = [{\n          text: str\n        }];\n      }\n\n      return descStrings;\n    }\n\n    getToolbar() {\n      return this.element.webviewToolbars ? this.element.webviewToolbars[this.webviewCount] : false;\n    }\n\n    ngOnDestroy() {\n      this.subscription.unsubscribe();\n    }\n\n  }\n\n  IntroComponent.ɵfac = function IntroComponent_Factory(t) {\n    return new (t || IntroComponent)(i0.ɵɵdirectiveInject(i1.JourneyService), i0.ɵɵdirectiveInject(i2.JourneyUtilityService), i0.ɵɵdirectiveInject(i3.DomSanitizer));\n  };\n\n  IntroComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: IntroComponent,\n    selectors: [[\"journeys-steps-step-intro\"]],\n    inputs: {\n      element: \"element\"\n    },\n    decls: 4,\n    vars: 8,\n    consts: [[\"class\", \"header\", 3, \"ngStyle\", \"innerHTML\", 4, \"ngIf\"], [1, \"desc\", 3, \"ngStyle\", \"ngClass\"], [3, \"descStrings\", \"element\", 4, \"ngIf\"], [4, \"ngIf\"], [1, \"header\", 3, \"ngStyle\", \"innerHTML\"], [3, \"descStrings\", \"element\"], [3, \"ngStyle\", 4, \"ngIf\"], [3, \"ngStyle\"], [3, \"ngStyle\", 4, \"ngFor\", \"ngForOf\"]],\n    template: function IntroComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵtemplate(0, IntroComponent_ion_text_0_Template, 1, 6, \"ion-text\", 0);\n        i0.ɵɵelementStart(1, \"div\", 1);\n        i0.ɵɵtemplate(2, IntroComponent_journeys_steps_step_intro_desc_2_Template, 1, 2, \"journeys-steps-step-intro-desc\", 2);\n        i0.ɵɵtemplate(3, IntroComponent_ng_container_3_Template, 3, 2, \"ng-container\", 3);\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵproperty(\"ngIf\", ctx.element.header);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngStyle\", i0.ɵɵpureFunction2(5, _c3, ctx.element.marginBottom, ctx.element.marginTop))(\"ngClass\", ctx.element.type === \"note\" ? \"note\" : \"\");\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", (ctx.descStrings == null ? null : ctx.descStrings.length) > 0);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", (ctx.listDescStrings == null ? null : ctx.listDescStrings.length) > 0);\n      }\n    },\n    directives: [i4.NgIf, i4.NgStyle, i4.NgClass, i5.IonText, i6.DescComponent, i4.NgForOf],\n    styles: [\"ion-text[_ngcontent-%COMP%], ion-label[_ngcontent-%COMP%]{color:var(--primary-colors-voya-black);font-size:16px;display:block}.header[_ngcontent-%COMP%]{font-weight:bold;margin-bottom:15px}.desc[_ngcontent-%COMP%]{margin-bottom:40px}.desc[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin-left:20px;color:var(--primary-colors-voya-black)}.desc[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]{color:var(--primary-colors-voya-black);font-size:16px;padding-left:25px}li[_ngcontent-%COMP%]{margin-bottom:25px}li[_ngcontent-%COMP%]:last-of-type{margin-bottom:0!important}.note[_ngcontent-%COMP%]{background-color:var(--white);border-radius:10px;padding:8px 13px}\"]\n  });\n  return IntroComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}