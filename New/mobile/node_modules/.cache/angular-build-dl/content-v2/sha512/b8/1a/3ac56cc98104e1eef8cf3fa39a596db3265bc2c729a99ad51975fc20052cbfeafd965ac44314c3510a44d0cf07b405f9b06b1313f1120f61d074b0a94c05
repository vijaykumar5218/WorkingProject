{"version":3,"mappings":"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","names":["AlertWindowService","alertController","router","msg","link","create","cssClass","header","pageText","systemUnavailable","subHeader","message","youMustUse","buttons","backdropDismiss","undefined","alert","present","onDidDismiss","then","navigateByUrl","opts","_ionic_angular__WEBPACK_IMPORTED_MODULE_2__","_angular_router__WEBPACK_IMPORTED_MODULE_3__","providedIn","AlertComponent","modalController","JSON","parse","stringify","yes","no","saved","dismiss","save","error","saving","saveFunction","result","closeDialog","_ionic_angular__WEBPACK_IMPORTED_MODULE_4__","_angular_core__WEBPACK_IMPORTED_MODULE_5__","selector","template","routes","path","component","_no_access_page__WEBPACK_IMPORTED_MODULE_0__","NoAccessPageRoutingModule","imports","exports","NoAccessPageModule","_angular_common__WEBPACK_IMPORTED_MODULE_4__","_angular_forms__WEBPACK_IMPORTED_MODULE_5__","_ionic_angular__WEBPACK_IMPORTED_MODULE_6__","_no_access_routing_module__WEBPACK_IMPORTED_MODULE_0__","declarations","_no_access_page__WEBPACK_IMPORTED_MODULE_1__","NoAccessPage","landingService","baseService","authService","loadingController","utilityService","webLogoutService","accessService","_constants_no_access_content_json__WEBPACK_IMPORTED_MODULE_3__","isWeb","getIsWeb","setTerminatedUser","constructLogoutURL","checkMyvoyageAccess","maintenanceMessage","enableMaintenanceWindow","isMaintenance","getNoAccessMessage","messages","action","translucent","loader","logoutAndRevoke","_mobile_app_modules_features_landing_service_landing_service__WEBPACK_IMPORTED_MODULE_2__","_shared_lib_services_base_base_factory_provider__WEBPACK_IMPORTED_MODULE_5__","_mobile_app_modules_shared_service_authentication_authentication_service__WEBPACK_IMPORTED_MODULE_4__","_ionic_angular__WEBPACK_IMPORTED_MODULE_10__","_shared_lib_services_utility_utility_service__WEBPACK_IMPORTED_MODULE_6__","_web_app_modules_shared_services_logout_logout_service__WEBPACK_IMPORTED_MODULE_7__","_shared_lib_services_access_access_service__WEBPACK_IMPORTED_MODULE_8__","endPoints","myVoyaLogout","genesysLogout","WebLogoutService","_constants_endpoints__WEBPACK_IMPORTED_MODULE_3__","terminatedUserSubject","rxjs__WEBPACK_IMPORTED_MODULE_5__","appendBaseUrlToEndpoints","url","localStorage","setItem","getItem","linkURL","getEnvironment","logoutUrl","myVoyageDomain","window","location","href","split","slice","ssoDomain","logoutPage","logoutURL","setLogoutURL","_shared_lib_components_alert_alert_component__WEBPACK_IMPORTED_MODULE_0__","swipeToClose","componentProps","titleMessage","content","signOutQuestion","yesButtonTxt","button","noButtonTxt","close","Promise","res","modal","sessionStorage","removeItem","get","getLogoutURL","clear","open","getLocalStorageKeys","forEach","localStorageKey","startsWith","console","log","_localStorage","Object","keys","genesysActive","isGenesysActive","toString","data","next","asObservable","_ionic_angular__WEBPACK_IMPORTED_MODULE_7__","_shared_lib_services_base_base_factory_provider__WEBPACK_IMPORTED_MODULE_2__","_shared_lib_services_utility_utility_service__WEBPACK_IMPORTED_MODULE_4__","__webpack_exports__"],"sources":["webpack:///mobile/src/app/modules/shared/service/alert-window/alert-window.service.ts","webpack:///shared-lib/components/alert/alert.component.ts","webpack:///shared-lib/components/no-access/no-access-routing.module.ts","webpack:///shared-lib/components/no-access/no-access.module.ts","webpack:///shared-lib/components/no-access/no-access.page.ts","webpack:///web/src/app/modules/shared/services/logout/constants/endpoints.ts","webpack:///web/src/app/modules/shared/services/logout/logout.service.ts","webpack:///shared-lib/components/alert/alert.component.html","webpack:///shared-lib/components/no-access/no-access.page.html"],"sourcesContent":["import {Injectable} from '@angular/core';\nimport {Router} from '@angular/router';\nimport {AlertController} from '@ionic/angular';\nimport {AlertWindow} from '../../../../../../src/app/data/schema/AlterWindow';\nimport * as text from './constants/alertText.json';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class AlertWindowService {\n  pageText: Record<string, string> = text;\n\n  constructor(\n    public alertController: AlertController,\n    private router: Router\n  ) {}\n\n  async presentAlert(msg?: AlertWindow) {\n    const link = msg.link || '';\n    const alert = await this.alertController.create({\n      cssClass: msg.cssClass || 'alert-window',\n      header: msg.header || this.pageText.systemUnavailable,\n      subHeader: msg.subHeader || '',\n      message: msg.message || this.pageText.youMustUse,\n      buttons: msg.buttons || ['OK'],\n      backdropDismiss:\n        msg?.backdropDismiss !== undefined ? msg.backdropDismiss : true,\n    });\n\n    await alert.present();\n    if (link !== '') {\n      await alert.onDidDismiss().then(() => {\n        this.router.navigateByUrl('' + link);\n      });\n    } else {\n      await alert.onDidDismiss();\n    }\n  }\n\n  async createAndPresent(opts: any) {\n    const alert = await this.alertController.create(opts);\n    return alert.present();\n  }\n}\n","import {ModalController} from '@ionic/angular';\nimport {Component, Input} from '@angular/core';\nimport * as pageText from './constants/pageText.json';\n\ninterface SaveFunction {\n  (): Promise<boolean>;\n}\n\n@Component({\n  selector: 'app-alert',\n  templateUrl: './alert.component.html',\n  styleUrls: ['./alert.component.scss'],\n})\nexport class AlertComponent {\n  pageText = JSON.parse(JSON.stringify(pageText)).default;\n\n  @Input() public titleMessage: string;\n  @Input() public message: string;\n  @Input() public imageUrl: string = null;\n  @Input() public yesButtonTxt = this.pageText.buttons.yes;\n  @Input() public noButtonTxt = this.pageText.buttons.no;\n\n  public saveFunction: SaveFunction;\n  saving: boolean;\n  error: boolean;\n\n  constructor(private modalController: ModalController) {}\n\n  closeDialog(saved = false) {\n    this.modalController.dismiss({\n      saved: saved,\n    });\n  }\n\n  async closeDialogClicked(save: boolean) {\n    this.error = false;\n    if (save) {\n      this.saving = true;\n      if (this.saveFunction) {\n        const result = await this.saveFunction();\n        this.saving = false;\n        if (result) {\n          this.closeDialog(true);\n        } else {\n          this.error = true;\n        }\n      } else {\n        this.closeDialog();\n      }\n    } else {\n      this.closeDialog();\n    }\n  }\n}\n","import {NgModule} from '@angular/core';\nimport {Routes, RouterModule} from '@angular/router';\n\nimport {NoAccessPage} from './no-access.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: NoAccessPage,\n  },\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class NoAccessPageRoutingModule {}\n","import {NgModule} from '@angular/core';\nimport {CommonModule} from '@angular/common';\nimport {FormsModule} from '@angular/forms';\n\nimport {IonicModule} from '@ionic/angular';\n\nimport {NoAccessPageRoutingModule} from './no-access-routing.module';\n\nimport {NoAccessPage} from './no-access.page';\n\n@NgModule({\n  imports: [CommonModule, FormsModule, IonicModule, NoAccessPageRoutingModule],\n  declarations: [NoAccessPage],\n})\nexport class NoAccessPageModule {}\n","import {Component, OnInit} from '@angular/core';\nimport {LandingService} from '@mobile/app/modules/features/landing/service/landing.service';\nimport * as PageText from './constants/no-access-content.json';\nimport {AuthenticationService} from '@mobile/app/modules/shared/service/authentication/authentication.service';\nimport {LoadingController} from '@ionic/angular';\nimport {BaseService} from '@shared-lib/services/base/base-factory-provider';\nimport {NoAccessMessage} from '@mobile/app/modules/features/landing/models/landing.model';\nimport {SharedUtilityService} from '@shared-lib/services/utility/utility.service';\nimport {WebLogoutService} from '@web/app/modules/shared/services/logout/logout.service';\nimport {AccessService} from '@shared-lib/services/access/access.service';\n@Component({\n  selector: 'app-no-access',\n  templateUrl: './no-access.page.html',\n  styleUrls: ['./no-access.page.scss'],\n})\nexport class NoAccessPage implements OnInit {\n  pageText: Record<string, string> = (PageText as any).default;\n  messages: NoAccessMessage;\n  isWeb: boolean;\n  isMaintenance: boolean;\n  maintenanceMessage: string;\n\n  constructor(\n    private landingService: LandingService,\n    private baseService: BaseService,\n    private authService: AuthenticationService,\n    private loadingController: LoadingController,\n    private utilityService: SharedUtilityService,\n    private webLogoutService: WebLogoutService,\n    private accessService: AccessService\n  ) {}\n\n  async ngOnInit() {\n    this.isWeb = this.utilityService.getIsWeb();\n    if (this.isWeb) {\n      this.webLogoutService.setTerminatedUser(true);\n      this.webLogoutService.constructLogoutURL();\n      const {\n        maintenanceMessage,\n        enableMaintenanceWindow,\n      } = await this.accessService.checkMyvoyageAccess();\n      this.isMaintenance = enableMaintenanceWindow === 'Y';\n      this.maintenanceMessage = maintenanceMessage;\n    }\n    if (!this.isMaintenance) {\n      this.messages = await this.landingService.getNoAccessMessage();\n    }\n  }\n\n  async closeClicked() {\n    if (this.isWeb) {\n      this.webLogoutService.action();\n    } else {\n      const loader = await this.loadingController.create({\n        translucent: true,\n      });\n      loader.present();\n      await this.authService.logoutAndRevoke();\n      this.baseService.navigateByUrl('landing');\n      loader.dismiss();\n    }\n  }\n}\n","export const endPoints = {\n  myVoyaLogout: 'myvoya/public/logout',\n  genesysLogout: 'myvoyage/ws/ers/service/endSession?s=',\n};\n","import {Injectable} from '@angular/core';\nimport {AlertComponent} from '@shared-lib/components/alert/alert.component';\nimport {ModalController} from '@ionic/angular';\nimport * as settingsOption from '@shared-lib/components/settings/constants/settingsOption.json';\nimport {BehaviorSubject, Observable} from 'rxjs';\nimport {BaseService} from '@shared-lib/services/base/base-factory-provider';\nimport {endPoints} from './constants/endpoints';\nimport {SharedUtilityService} from '@shared-lib/services/utility/utility.service';\n@Injectable({\n  providedIn: 'root',\n})\nexport class WebLogoutService {\n  content = settingsOption;\n  private terminatedUserSubject: BehaviorSubject<boolean>;\n  endPoints = endPoints;\n  isGenesysActive: boolean;\n\n  constructor(\n    private modalController: ModalController,\n    private baseService: BaseService,\n    private utilityService: SharedUtilityService\n  ) {\n    this.terminatedUserSubject = new BehaviorSubject(false);\n    this.endPoints = this.utilityService.appendBaseUrlToEndpoints(endPoints);\n  }\n\n  setLogoutURL(url) {\n    localStorage.setItem('logout-url', url);\n  }\n\n  getLogoutURL(): string {\n    return localStorage.getItem('logout-url');\n  }\n\n  constructLogoutURL(): string {\n    const linkURL = this.utilityService.getEnvironment().logoutUrl;\n    const myVoyageDomain = window.location.href\n      .split('myvoyageui')[0]\n      .slice(0, -1);\n    const ssoDomain = `https://${linkURL.split('/')[2]}`;\n    const logoutPage = `${ssoDomain}/voyassoui/public/logout.html%3FappId=myVoyage%26loginURL=${myVoyageDomain}`;\n    const logoutURL = `${linkURL}&post_logout_redirect_uri=${logoutPage}`;\n    this.setLogoutURL(logoutURL);\n    return logoutURL;\n  }\n\n  async openModal() {\n    const modal = await this.modalController.create({\n      component: AlertComponent,\n      cssClass: 'modal-not-fullscreen',\n      swipeToClose: false,\n      componentProps: {\n        titleMessage: this.content.signOutQuestion,\n        yesButtonTxt: this.content.button,\n        noButtonTxt: this.content.close,\n        saveFunction: async (): Promise<boolean> => {\n          return new Promise(res => {\n            res(true);\n            this.action();\n          });\n        },\n      },\n    });\n    return modal.present();\n  }\n\n  action() {\n    sessionStorage.removeItem('genesysActive');\n    this.baseService.get(this.endPoints.myVoyaLogout);\n    this.baseService.get(\n      this.endPoints.genesysLogout + localStorage.getItem('sessionId')\n    );\n    const url = this.getLogoutURL();\n    localStorage.clear();\n    sessionStorage.removeItem('iframeloaded');\n    window.open(url, '_self');\n  }\n\n  genesysRemoveLocalStorage() {\n    this.getLocalStorageKeys().forEach(localStorageKey => {\n      if (\n        localStorageKey.startsWith('deploymentId') ||\n        localStorageKey.startsWith('_act') ||\n        localStorageKey.startsWith('_gc')\n      ) {\n        console.log('Removing ' + localStorageKey);\n        localStorage.removeItem(localStorageKey);\n      }\n    });\n  }\n\n  getLocalStorageKeys(_localStorage = localStorage): string[] {\n    return Object.keys(_localStorage);\n  }\n\n  setGenesysIsActive(genesysActive: boolean) {\n    this.isGenesysActive = genesysActive;\n    sessionStorage.setItem('genesysActive', genesysActive.toString());\n  }\n\n  getGenesysIsActive(): boolean {\n    const genesysActive = sessionStorage.getItem('genesysActive');\n    return genesysActive && genesysActive !== 'undefined'\n      ? JSON.parse(genesysActive)\n      : this.isGenesysActive;\n  }\n\n  setTerminatedUser(data: boolean) {\n    this.terminatedUserSubject.next(data);\n  }\n\n  getTerminatedUser(): Observable<boolean> {\n    return this.terminatedUserSubject.asObservable();\n  }\n}\n","export default \"<ion-card class=\\\"alert-dialog\\\">\\n  <ion-card-header>\\n    <ion-card-title>\\n      <span\\n        class=\\\"x-button\\\"\\n        tabindex=\\\"0\\\"\\n        (click)=\\\"closeDialogClicked(false)\\\"\\n        (keyup.enter)=\\\"closeDialogClicked(false)\\\"\\n        id=\\\"close-btn\\\"\\n        ><img src=\\\"assets/icon/exit.svg\\\" alt=\\\"Close dialog\\\"/></span\\n    ></ion-card-title>\\n  </ion-card-header>\\n  <ion-card-content>\\n    <img\\n      [hidden]=\\\"!imageUrl\\\"\\n      class=\\\"image-center\\\"\\n      [src]=\\\"imageUrl\\\"\\n      alt=\\\"warning\\\"\\n    />\\n    <div [hidden]=\\\"imageUrl\\\" class=\\\"spacer\\\"></div>\\n    <p class=\\\"title-message\\\">{{ titleMessage }}</p>\\n    <p class=\\\"message\\\">{{ message }}</p>\\n    <div class=\\\"error\\\" [hidden]=\\\"!error\\\">\\n      An error occurred while saving. Please try again.\\n    </div>\\n    <div>\\n      <ion-button\\n        (click)=\\\"closeDialogClicked(true)\\\"\\n        (keyup.enter)=\\\"closeDialogClicked(true)\\\"\\n        class=\\\"font-18 save-button\\\"\\n        name=\\\"submit\\\"\\n        shape=\\\"round\\\"\\n        expand=\\\"block\\\"\\n        type=\\\"submit\\\"\\n        color=\\\"btncolor\\\"\\n        [attr.disabled]=\\\"saving\\\"\\n        id=\\\"yes-btn\\\"\\n      >\\n        <ion-spinner [hidden]=\\\"!saving\\\" class=\\\"save-spinner\\\"></ion-spinner>\\n        {{ yesButtonTxt }}\\n      </ion-button>\\n      <ion-button\\n        (click)=\\\"closeDialogClicked(false)\\\"\\n        (keyup.enter)=\\\"closeDialogClicked(false)\\\"\\n        class=\\\"cancel-button\\\"\\n        [attr.disabled]=\\\"saving\\\"\\n        id=\\\"no-btn\\\"\\n      >\\n        {{ noButtonTxt }}\\n      </ion-button>\\n    </div>\\n  </ion-card-content>\\n</ion-card>\\n\";","export default \"<div [ngClass]=\\\"isWeb? 'web-no-access':'mobile-no-access'\\\">\\n  <ion-row>\\n    <ion-col>\\n      <ion-text class=\\\"x-button\\\" (click)=\\\"closeClicked()\\\" id=\\\"x-button\\\"\\n        >X</ion-text\\n      >\\n    </ion-col>\\n  </ion-row>\\n  <ion-grid>\\n    <ion-row>\\n      <ion-col>\\n        <img src=\\\"assets/icon/warning_orange.svg\\\" alt=\\\"warning\\\" />\\n      </ion-col>\\n    </ion-row>\\n    <ng-container *ngIf=\\\"!isMaintenance; else maintenanceTempRef\\\">\\n      <ion-row>\\n        <ion-col>\\n          <ion-text class=\\\"header\\\">{{messages?.message_1}}</ion-text>\\n        </ion-col>\\n      </ion-row>\\n\\n      <ion-row>\\n        <ion-col>\\n          <ion-text class=\\\"desc\\\">{{messages?.message_2}}</ion-text>\\n        </ion-col>\\n      </ion-row>\\n    </ng-container>\\n    <ng-template #maintenanceTempRef>\\n      <ion-row>\\n        <ion-col>\\n          <ion-text class=\\\"header\\\">{{maintenanceMessage}}</ion-text>\\n        </ion-col>\\n      </ion-row>\\n    </ng-template>\\n\\n    <ion-row>\\n      <ion-col>\\n        <ion-button\\n          (click)=\\\"closeClicked()\\\"\\n          id=\\\"close-btn\\\"\\n          name=\\\"submit\\\"\\n          shape=\\\"round\\\"\\n          expand=\\\"block\\\"\\n          type=\\\"submit\\\"\\n          color=\\\"btncolor\\\"\\n        >\\n          {{pageText.logout}}\\n        </ion-button>\\n      </ion-col>\\n    </ion-row>\\n  </ion-grid>\\n</div>\\n\";"]}