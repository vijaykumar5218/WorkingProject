"use strict";(self.webpackChunkmyvoyage=self.webpackChunkmyvoyage||[]).push([[2291],{72291:function(t,i,e){e.r(i),e.d(i,{EditEmailPageModule:function(){return O}});var n=e(38583),o=e(90665),r=e(92859),a=e(93206),s=e(97582),l=e(39313),c=e(94184),d=e(42070),p=e.t(d,2),u=e(57700),m=e(1747),h=e(40654),g=e(27603),f=e(37364),v=e(7930),b=e(62423);function y(t,i){if(1&t&&(u.TgZ(0,"ion-row"),u.TgZ(1,"ion-col"),u._UZ(2,"ion-icon",10),u.TgZ(3,"ion-text",11),u._uU(4),u.qZA(),u.qZA(),u.qZA()),2&t){const t=u.oxw();u.xp6(4),u.Oqu(t.displayText.errors.invalidEmail)}}const Z=[{path:"",component:(()=>{class t{constructor(t,i,e,n,o,r,a){this.headerType=t,this.router=i,this.modalController=e,this.accountInfoService=n,this.notificationService=o,this.utilityService=r,this.platformService=a,this.displayText=JSON.parse(JSON.stringify(p)).default,this.emailVailid=!0,this.actionOption={headername:this.displayText.headerName,btnleft:!0,btnright:!0,buttonLeft:{name:"",link:"settings/account-and-personal-info"},buttonRight:{name:"",link:"notification"}},this.isWeb=this.utilityService.getIsWeb(),this.platformService.isDesktop().subscribe(t=>{this.isDesktop=t})}ngOnInit(){this.headerType.publish({type:c.n.navbar,actionOption:this.actionOption}),this.fetchData()}fetchData(){this.subscription=this.notificationService.getNotificationSettings().subscribe(t=>{this.prefSettings=t,this.contactId=t.primaryEmail.partyContactId,this.email=t.primaryEmail.email})}cancel(){this.router.navigateByUrl(`/${this.isWeb&&!this.isDesktop?"more":"settings"}/account-and-personal-info`)}valueChanged(t){this.email=null==t?void 0:t.toString(),this.emailVailid=this.utilityService.validateEmail(this.email)}saveEmail(){return(0,s.mG)(this,void 0,void 0,function*(){const t=yield this.modalController.create({component:l.w,cssClass:"modal-not-fullscreen",swipeToClose:!1,componentProps:{titleMessage:this.displayText.alert.message,imageUrl:this.displayText.alert.imageUrl,saveFunction:()=>(0,s.mG)(this,void 0,void 0,function*(){return new Promise(t=>{this.accountInfoService.saveEmail(this.email,this.contactId).then(i=>{t(!!i)})})})}});return t.onDidDismiss().then(t=>{this.modalDismissed(t)}),t.present()})}modalDismissed(t){t.data.saved&&(this.prefSettings.primaryEmail.email=this.email,this.notificationService.setNotificationSettings(this.prefSettings),this.cancel())}ngOnDestroy(){this.subscription.unsubscribe()}}return t.\u0275fac=function(i){return new(i||t)(u.Y36(m.v),u.Y36(a.F0),u.Y36(r.IN),u.Y36(h.o),u.Y36(g.O),u.Y36(f.O),u.Y36(v.m))},t.\u0275cmp=u.Xpm({type:t,selectors:[["app-edit-email"]],decls:21,vars:7,consts:[[1,"ion-no-margin","p-20"],[3,"ngClass"],[1,"input-header"],["id","editEmail","name","editEmail","type","email","inputmode","email","pattern","email","autocomplete","email","clearInput","",1,"edit-email",3,"value","ionChange"],["editEmailInput",""],[4,"ngIf"],[1,"buttons"],["size","2"],["id","cancel-btn","name","submit","shape","round","expand","block","color","btncolor","fill","outline",1,"font-12",3,"click"],["id","save-btn","name","submit","shape","round","expand","block","color","btncolor","disabled","",1,"font-12",3,"click"],["src","assets/icon/warning.svg","alt","warning",1,"error-icon"],[1,"error"]],template:function(t,i){if(1&t){const t=u.EpF();u.TgZ(0,"ion-grid",0),u.TgZ(1,"div",1),u.TgZ(2,"ion-row"),u.TgZ(3,"ion-col"),u.TgZ(4,"div",2),u._uU(5),u.qZA(),u.qZA(),u.qZA(),u.TgZ(6,"ion-row"),u.TgZ(7,"ion-col"),u.TgZ(8,"ion-input",3,4),u.NdJ("ionChange",function(){u.CHM(t);const e=u.MAs(9);return i.valueChanged(e.value)}),u.qZA(),u.qZA(),u.qZA(),u.YNc(10,y,5,1,"ion-row",5),u.TgZ(11,"ion-row",6),u._UZ(12,"ion-col",7),u.TgZ(13,"ion-col"),u.TgZ(14,"ion-button",8),u.NdJ("click",function(){return i.cancel()}),u._uU(15),u.qZA(),u.qZA(),u.TgZ(16,"ion-col"),u.TgZ(17,"ion-button",9),u.NdJ("click",function(){return i.saveEmail()}),u._uU(18),u.qZA(),u.qZA(),u._UZ(19,"ion-col",7),u.qZA(),u._UZ(20,"app-legal"),u.qZA(),u.qZA()}2&t&&(u.xp6(1),u.Q6J("ngClass",i.isWeb?"web-edit-email":"mobile-edit-email"),u.xp6(4),u.Oqu(i.displayText.nameLabel),u.xp6(3),u.Q6J("value",i.email),u.xp6(2),u.Q6J("ngIf",!i.emailVailid),u.xp6(5),u.hij("",i.displayText.button.cancel," "),u.xp6(2),u.uIk("disabled",!i.emailVailid),u.xp6(1),u.hij("",i.displayText.button.save," "))},directives:[r.jY,n.mk,r.Nd,r.wI,r.pK,r.j9,n.O5,r.YG,b.N,r.gu,r.yW],styles:["[_nghost-%COMP%]{background-color:var(--ion-color-white)}[_nghost-%COMP%]   .sub-header[_ngcontent-%COMP%]{font-size:16px;font-weight:bold;line-height:1.25;letter-spacing:.08px;margin-bottom:20px}[_nghost-%COMP%]   .edit-email[_ngcontent-%COMP%]{border:1px solid var(--secondary-colors-medium-gray-2);border-radius:4px;width:auto;color:var(--primary-colors-voya-black);--padding-start: 16px;height:56px}[_nghost-%COMP%]   .buttons[_ngcontent-%COMP%]{margin-top:40px}[_nghost-%COMP%]   .error[_ngcontent-%COMP%]{color:var(--secondary-colors-error-red);margin-left:4px;vertical-align:top}[_nghost-%COMP%]   .error-icon[_ngcontent-%COMP%]{width:22px;height:22px;margin-left:4px;fill:var(--secondary-colors-error-red)}[_nghost-%COMP%]   .error-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border-color:var(--secondary-colors-error-red)!important}[_nghost-%COMP%]   .error-title[_ngcontent-%COMP%]{color:var(--secondary-colors-error-red)}[_nghost-%COMP%]   .web-edit-email[_ngcontent-%COMP%]{margin:20px}"]}),t})()}];let x=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=u.oAB({type:t}),t.\u0275inj=u.cJS({imports:[[a.Bz.forChild(Z)],a.Bz]}),t})();var C=e(91659);let O=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=u.oAB({type:t}),t.\u0275inj=u.cJS({imports:[[n.ez,o.u5,r.Pc,x,C.n]]}),t})()},91659:function(t,i,e){e.d(i,{n:function(){return s}});var n=e(38583),o=e(90665),r=e(92859),a=e(57700);let s=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=a.oAB({type:t}),t.\u0275inj=a.cJS({imports:[[n.ez,o.u5,r.Pc]]}),t})()}}]);