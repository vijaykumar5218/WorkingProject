"use strict";(self.webpackChunkmyvoyage=self.webpackChunkmyvoyage||[]).push([[1040],{30885:function(t,e,s){s.d(e,{l:function(){return i}});const i="272c2587-6b79-d874-e053-d22aac0a0939"},61040:function(t,e,s){s.d(e,{B:function(){return b}});var i=s(64762),n=s(51222),a=s(75319),o=s(79765),r=s(26215),c=s(80226),u=s(94402),l=s(16738),h=s(28049),d=s(88002),p=s(57700),g=s(37364),v=s(7935),S=s(69587),m=s(38795),y=s(25552);let b=(()=>{class t{constructor(t,e,s,i,u){this.utilityService=t,this.baseService=e,this.accessService=s,this.inAppBrowserService=i,this.mxService=u,this.endPoints=n.z,this.predictiveMessage=null,this.predictiveMessage$=null,this.currSessionExp=0,this.participantData=null,this.participantSubject=null,this.subscription=new a.w,this.externalLinksData=null,this.externalLinksSubject=null,this.selectedTab$=new o.xQ,this.allAccountData=null,this.allAccountSubject=null,this.aggregatedAccountDataSubject=null,this.accountsContent$=null,this.sort=new r.X(""),this.filterSortValues=null,this.filt=new r.X([]),this.balanceHistoryGraphData=null,this.balanceHistoryGraphSubject=null,this.storedFilterKey=[],this.storedSortKey="",this.today=new Date,this.priorDate=l((new Date).setDate(this.today.getDate()-90)).format("YYYY/MM/DD"),this.currentDate=l(Date.now()).format("YYYY/MM/DD"),this.endPoints=this.utilityService.appendBaseUrlToEndpoints(n.z),this.environment=this.utilityService.getEnvironment(),this.participantSubject=new c.t(1),this.balanceHistoryGraphSubject=new c.t(1),this.externalLinksSubject=new c.t(1),this.allAccountSubject=new c.t(1),this.aggregatedAccountDataSubject=new c.t(1),this.account=JSON.parse(localStorage.getItem("currentAccount")),this.isWeb=this.utilityService.getIsWeb(),this.predictiveMessage$=new c.t(1),this.accountsContent$=new c.t(1)}getJSON(t=!1){return(0,i.mG)(this,void 0,void 0,function*(){if(!this.accountInfo||t){const t=yield this.baseService.get(this.endPoints.allAccounts+(new Date).getTime());t.hsaAccounts=yield this.getHSAAccounts(),this.accountInfo=t}return this.accountInfo})}getHSAorFSA(){return(0,i.mG)(this,void 0,void 0,function*(){if(!this.hasHSAorFSA){const t={hsa:!1,fsa:!1};(yield this.getJSON()).hsaAccounts.accounts.forEach(e=>{"HSA"==e.hsaAccountData.Plan_Type?t.hsa=!0:"MedicalFlex"==e.hsaAccountData.Plan_Type&&(t.fsa=!0)}),(yield this.mxService.getMxAccountConnect().pipe((0,h.P)()).toPromise()).accounts.forEach(e=>{"Savings"===e.account_type_name&&"HEALTH"===e.account_subtype_name&&(t.hsa=!0)}),this.hasHSAorFSA=t}return this.hasHSAorFSA})}getAggregatedAccounts(t=!1){if(!this.aggregatedAcctData||t){this.aggregatedAcctData=(0,u.D)(this.baseService.get(this.endPoints.aggregatedAccounts+(new Date).getTime()));const t=this.aggregatedAcctData.subscribe(t=>{this.aggregatedAccountDataSubject.next(t)});this.subscription.add(t)}return this.aggregatedAccountDataSubject}initSession(t,e){return(0,i.mG)(this,void 0,void 0,function*(){if(!this.sessionId||(new Date).getTime()>this.currSessionExp){const s={sessionInfo:{domain:t,newSession:!1,page:"MYVOYA",clientId:e,timeoutMinutes:15,application:"MYVOYA"},allowDuplicate:!1},i=yield this.baseService.post(this.endPoints.InitSession,s);i&&(this.currSessionExp=(new Date).getTime()+84e4,this.sessionId=i.sessionId)}return this.sessionId})}getExternalLinks(t=!1){return(!this.externalLinksData||t)&&this.accessService.checkMyvoyageAccess().then(t=>(0,i.mG)(this,void 0,void 0,function*(){const e=t.clientDomain,s=t.clientId,i=yield this.initSession(e,s),n=this.endPoints.externalLinks.replace("{planID}",this.account.planId).replace("{client}",s).replace("{sessionID}",i).replace("{domain}",e);this.externalLinksData=(0,u.D)(this.baseService.get(n));const a=this.externalLinksData.subscribe(t=>{this.externalLinksSubject.next(t)});this.subscription.add(a)})),this.externalLinksSubject}getVestedBalance(){return(0,i.mG)(this,void 0,void 0,function*(){return this.baseService.get(this.endPoints.vestedBalance+this.account.clientId+"/"+this.account.planId)})}getGainLoss(){return(0,i.mG)(this,void 0,void 0,function*(){return this.baseService.get(this.endPoints.gainLoss+this.account.clientId+"/"+this.account.planId)})}getLoan(){return(0,i.mG)(this,void 0,void 0,function*(){return this.baseService.get(this.endPoints.loan+this.account.clientId+"/"+this.account.planId)})}getRateOfReturn(){return(0,i.mG)(this,void 0,void 0,function*(){return this.baseService.get(this.endPoints.rateOfReturn+this.account.clientId+"/"+this.account.planId)})}getPlanAdviceStatuses(){return(0,i.mG)(this,void 0,void 0,function*(){return this.baseService.get(this.endPoints.planAdviceStatus)})}getDividends(){return this.baseService.get(this.endPoints.dividend+this.account.clientId+"/"+this.account.planId)}getContribution(){return(0,i.mG)(this,void 0,void 0,function*(){return this.baseService.get(this.endPoints.contribution+this.account.clientId+"/"+this.account.planId)})}getYTDContribution(){return(0,i.mG)(this,void 0,void 0,function*(){return this.baseService.get(this.endPoints.ytdcontribution+this.account.clientId+"/"+this.account.planId)})}getEmployersMatch(){return(0,i.mG)(this,void 0,void 0,function*(){return this.baseService.get(this.endPoints.employersmatch+this.account.clientId+"/"+this.account.planId)})}getTransaction(){return(0,i.mG)(this,void 0,void 0,function*(){return this.account.isHSAAccount?this.getHSATransactions():this.baseService.get(this.endPoints.transaction+this.account.clientId+"/"+this.account.planId+"?tranType=ALL&startDate="+this.priorDate+"&endDate="+this.currentDate)})}getAccount(){return this.account||(this.account=JSON.parse(localStorage.getItem("currentAccount"))),this.account}setAccount(t){localStorage.setItem("currentAccount",JSON.stringify(t)),this.account=t}getParticipant(t=!1){if(!this.participantData||t){this.participantData=(0,u.D)(this.baseService.get(this.endPoints.participantData));const t=this.participantData.subscribe(t=>{this.participantSubject.next(t)});this.subscription.add(t)}return this.participantSubject}setParticipant(t){this.participantSubject.next(t)}getOffercode(){return(0,i.mG)(this,void 0,void 0,function*(){return this.offercodes||(this.offercodes=yield this.baseService.get(this.endPoints.getOfferCode)),this.offercodes})}getPredict(){return(0,i.mG)(this,void 0,void 0,function*(){return new Promise(t=>{this.subscription.add(this.fetchPredictiveMessage().subscribe(e=>{t(e.OfferCodeAdviceJSON?JSON.parse(e.OfferCodeAdviceJSON):null)}))})})}getCarouselData(){return(0,i.mG)(this,void 0,void 0,function*(){return new Promise(t=>{this.subscription.add(this.fetchPredictiveMessage().subscribe(e=>{t(e.OfferCodeJSON?JSON.parse(e.OfferCodeJSON):null)}))})})}fetchBalanceHistoryGraph(){if(!this.balanceHistoryGraphData){this.balanceHistoryGraphData=(0,u.D)(this.baseService.get(this.endPoints.balancehistory));const t=this.balanceHistoryGraphData.subscribe(t=>{this.balanceHistoryGraphSubject.next(t)});this.subscription.add(t)}return this.balanceHistoryGraphSubject}fetchPredictiveMessage(t=!1){if(!this.predictiveMessage||t){this.predictiveMessage=(0,u.D)(this.baseService.get(this.endPoints.predictiveMessage));const t=this.predictiveMessage.subscribe(t=>{this.predictiveMessage$.next(t)},t=>{console.log(t),this.predictiveMessage$.next({})});this.subscription.add(t)}return this.predictiveMessage$}posNegSymbol(t){return t&&+t?t<0?"":"+":""}getSelectedTab$(){return this.selectedTab$}publishSelectedTab(t){this.selectedTab$.next(t)}getAllAccounts(t=!1){if(!this.allAccountData||t){this.allAccountData=(0,u.D)(this.getJSON());const t=this.allAccountData.subscribe(t=>{this.allAccountSubject.next(t)});this.subscription.add(t)}return this.allAccountSubject}getAccountDataBasedOnType(t,e,s=!1){return this.getAllAccounts(s).pipe((0,d.U)(s=>s[e].accounts.filter(e=>e.planId===t)[0]))}getAccountDataWithoutType(t,e=!1){return this.getAllAccounts(e).pipe((0,d.U)(e=>e.retirementAccounts.accounts.filter(e=>e.planId===t)[0]||e.stockAccounts.accounts.filter(e=>e.planId===t)[0]||e.vendorAccounts.accounts.filter(e=>e.planId===t)[0]||e.hsaAccounts.accounts.filter(e=>e.planId===t)[0]))}openPwebAccountLink(t,e){this.utilityService.getIsWeb()?window.open(t,e||"_blank"):this.openInAppBrowser(t)}openInAppBrowser(t){this.inAppBrowserService.openSystemBrowser(t)}transformHSAAccount(t){let e=t.CashBalance;return"HSA"===t.Plan_Type&&(e=t.TotalBalance),{accountTitle:t.Plan_Name,accountBalance:e.toString(),accountBalanceAsOf:t.AsOfDate,sourceSystem:"",suppressTab:!1,voyaSavings:"",includedInOrangeMoney:!1,accountAllowedForMyVoya:!1,clientId:"",planId:t.Plan_ID.toString(),planType:t.Plan_Type,accountNumber:"",needOMAutomaticUpdate:!1,planName:t.Plan_Name,mpStatus:"",clientAllowed4myVoyaOrSSO:!1,useMyvoyaHomepage:!1,advisorNonMoneyTxnAllowed:!1,advisorMoneyTxnAllowed:!1,nqPenCalPlan:!1,enrollmentAllowed:!1,autoEnrollmentAllowed:!1,vruPhoneNumber:"",rmdRecurringPaymentInd:"",navigateToRSPortfolio:!1,planLink:"",openDetailInNewWindow:!1,nqPlan:!1,new:!1,eligibleForOrangeMoney:!1,iraplan:!1,xsellRestricted:!1,isVoyaAccessPlan:!1,isRestrictedRetirementPlan:!1,isVDAApplication:!1,isVendorPlan:!1,isHSAAccount:!0,hsaAccountData:t}}getHSAAccounts(){var t;return(0,i.mG)(this,void 0,void 0,function*(){const e=yield this.baseService.get(this.endPoints.allHSAAccounts);if(!e)return{dataStatus:"failed",errorCode:"",accounts:[]};const s=[];return null===(t=null==e?void 0:e.AllAccountsBalance)||void 0===t||t.forEach(t=>{s.push(this.transformHSAAccount(t))}),{dataStatus:e.Status,errorCode:"",accounts:s}})}transformHSATransaction(t){return{tradeDate:t.Transaction_Date,type:"",tranCode:t.Transaction_Code,cash:t.Transaction_Amt,clientId:"",planId:t.Plan_ID.toString(),participantId:"",unit_or_unshrs:"",br140_new_val_cash:"",br161_shr_price:"",br009_run_date:"",br011_seq_num:"",br980_ACT_NAME:t.Transaction_Description,br172_vouch_num:"",isHSATransaction:!0,hsaTransactionData:t}}getHSATransactions(){var t,e;return(0,i.mG)(this,void 0,void 0,function*(){const s=null===(t=this.account.hsaAccountData)||void 0===t?void 0:t.HAS_PARTY_ID,i=null===(e=this.account.hsaAccountData)||void 0===e?void 0:e.Plan_ID,n=this.endPoints.hsaTransactions+s+"/"+i,a=yield this.baseService.get(n),o=[];return a.AllAccountsTransactions.forEach(t=>{o.push(this.transformHSATransaction(t))}),{transactionHistories:o}})}getDisplayNameOrFirst(t){return t.displayName&&t.displayName.length>0&&t.displayName.toLocaleLowerCase()!=t.lastName.toLocaleLowerCase()+", "+t.firstName.toLocaleLowerCase()?t.displayName:t.firstName}getDisplayNameOrFirstOrLast(t){const e=t.displayName?t.displayName:"",s=t.firstName?t.firstName:"",i=t.lastName?t.lastName:"";return e.length>0&&(e.includes(",")&&e.toLocaleLowerCase()!=s.toLocaleLowerCase()+", "+i.toLocaleLowerCase()||!e.includes(",")&&e.toLocaleLowerCase()!=s.toLocaleLowerCase()+" "+i.toLocaleLowerCase())?e:s.length>0?s:i}getDisplayNameOrFirstLast(t){const e=t.displayName?t.displayName:"",s=t.firstName?t.firstName:"",i=t.lastName?t.lastName:"";return e.length>0&&e.toLocaleLowerCase()!=s.toLocaleLowerCase()+", "+i.toLocaleLowerCase()?e:s+" "+i}changeSort(t){this.sort.next(t)}currentSort(){return this.sort.asObservable()}getAddAcctModalContent(){return(0,i.mG)(this,void 0,void 0,function*(){return new Promise(t=>{this.subscription.add(this.fetchAccountsContent().subscribe(e=>{t(e.WorkplaceAddAccountsModalJSON?JSON.parse(e.WorkplaceAddAccountsModalJSON):null)}))})})}getSectionValues(){return(0,i.mG)(this,void 0,void 0,function*(){return new Promise(t=>{this.subscription.add(this.fetchAccountsContent().subscribe(e=>{t(e.HSA_Transaction_FilterSort_SelectionList?JSON.parse(e.HSA_Transaction_FilterSort_SelectionList):null)}))})})}fetchAccountsContent(t=!1){if(!this.accountsContent||t){this.accountsContent=(0,u.D)(this.baseService.get(this.endPoints.accountsContent));const t=this.accountsContent.subscribe(t=>{this.accountsContent$.next(t)},t=>{console.log(t),this.accountsContent$.next({})});this.subscription.add(t)}return this.accountsContent$}changeFilt(t){this.filt.next(t)}setFiltSlcted(t){this.storedFilterKey=t,localStorage.setItem("storedFilterKey",JSON.stringify(t))}getFiltSlcted(){return this.storedFilterKey||(this.storedFilterKey=JSON.parse(localStorage.getItem("storedFilterKey"))),this.storedFilterKey}currentFilter(){return this.filt.asObservable()}setSortSlcted(t){this.storedSortKey=t,localStorage.setItem("storedSortKey",JSON.stringify(t))}getSortSlcted(){return this.storedSortKey||(this.storedSortKey=JSON.parse(localStorage.getItem("storedSortKey"))),this.storedSortKey}ngOnDestroy(){this.subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(p.LFG(g.O),p.LFG(v.bQ),p.LFG(S.v),p.LFG(m.a),p.LFG(y.C))},t.\u0275prov=p.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},51222:function(t,e,s){s.d(e,{z:function(){return a}});var i=s(30885);const n="myvoyage/ws/ers/",a={allAccounts:n+"service/all/accounts?s=",aggregatedAccounts:n+"dashboard/accounts?s=",participantData:`myvoya/ws/ers/data/customers/${i.l}/participantprofile?fromMDM=Y`,vestedBalance:n+"rsdata/balance/vested/",gainLoss:n+"rsdata/balancehistory/",loan:n+"rsdata/loans/outstanding/",rateOfReturn:n+"rsdata/prr/",planAdviceStatus:n+"rsdata/aboutme/plans/advicestatus",omEligibility:"myvoya/ws/ers/site/configurations/retirement/orangemoney/eligibility",getrrinfo:`myvoya/ws/ers/service/customers/${i.l}/orangemoney/getrrinfo`,getpension:`myvoya/ws/ers/service/customers/${i.l}/orangemoney/getpension`,getsrbenefits:`myvoya/ws/ers/service/customers/${i.l}/orangemoney/getsrbenefits/`,getssbenefits:`myvoya/ws/ers/service/customers/${i.l}/orangemoney/getssbenefits`,updateOptOut:`myvoya/ws/ers/service/customers/${i.l}/orangemoney/optout`,saveMadlib:`myvoya/ws/ers/service/customers/${i.l}/orangemoney/savemadlib`,contribution:n+"participation/history/contributions/",ytdcontribution:n+"contrib/paycontrib/",employersmatch:n+"display/message/employermatch/",dividend:n+"participation/history/dividend/",saveRetirementAgeNonFE:`myvoya/ws/ers/service/customers/${i.l}/orangemoney/validate`,saveRetirementAgeFE:`myvoya/ws/ers/service/customers/${i.l}/orangemoney/fevalidate`,saveSalaryFE:`myvoya/ws/ers/service/customers/${i.l}/orangemoney/feshowmeimpact`,saveSalaryNonFE:`myvoya/ws/ers/service/customers/${i.l}/orangemoney/saveprofile`,transaction:n+"participation/history/transactions/",externalLinks:n+"service/navlinks/{client}/{planID}?s={sessionID}&domain={domain}",InitSession:n+"emvdata/smservice/session",eventTracking:n+"service/eventTracking",predictiveMessage:n+"content/section/messages",getOfferCode:n+"rsdata/accordion",allHSAAccounts:"myvoyage/wex/accountBalances",hsaTransactions:"myvoyage/wex/accountTransactions/",accountsContent:n+"content/section/accounts",subscriberKey:n+"service/sfmcUserInfo",balancehistory:n+"service/portfolioBalanceHistory"}}}]);