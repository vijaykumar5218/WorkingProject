{"version":3,"mappings":"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","names":["WIDGET_TIMOUT_DURATION","MXWidgetComponent","mxService","sharedUtilityService","platformService","rxjs__WEBPACK_IMPORTED_MODULE_6__","refreshWidget","isWeb","getIsWeb","platformSubscription","add","onResume$","subscribe","onResume","bind","onPause$","onPause","Date","getTime","widgetTimeout","hasError","displayWidget","widgetType","id","tagName","height","autoload","subAccount","then","res","unsubscribe","_shared_lib_services_mx_service_mx_service__WEBPACK_IMPORTED_MODULE_2__","_shared_lib_services_utility_utility_service__WEBPACK_IMPORTED_MODULE_3__","_mobile_app_modules_shared_service_platform_platform_service__WEBPACK_IMPORTED_MODULE_4__","_angular_core__WEBPACK_IMPORTED_MODULE_7__","selector","template","MXWidgetModule","imports","_angular_common__WEBPACK_IMPORTED_MODULE_3__","_ionic_angular__WEBPACK_IMPORTED_MODULE_4__","declarations","_mx_widget_component__WEBPACK_IMPORTED_MODULE_0__","exports","HeaderFooterTypeService","headerTypeService","footerTypeService","headerInfo","footerInfo","publish","_header_type_header_type_service__WEBPACK_IMPORTED_MODULE_1__","_shared_lib_modules_footer_services_footer_type_footer_type_service__WEBPACK_IMPORTED_MODULE_0__","providedIn","WidgetType","__webpack_exports__"],"sources":["webpack:///shared-lib/components/mx-widget/mx-widget.component.ts","webpack:///shared-lib/components/mx-widget/mx-widget.module.ts","webpack:///shared-lib/services/header-footer-type/headerFooterType.service.ts","webpack:///shared-lib/services/mx-service/models/widget-type.enum.ts","webpack:///shared-lib/components/mx-widget/mx-widget.component.html"],"sourcesContent":["import {Component, Input, OnDestroy, OnInit} from '@angular/core';\nimport {Subscription} from 'rxjs';\nimport {WidgetType} from '@shared-lib/services/mx-service/models/widget-type.enum';\nimport {MXService} from '@shared-lib/services/mx-service/mx.service';\nimport {SharedUtilityService} from '@shared-lib/services/utility/utility.service';\nimport {PlatformService} from '@mobile/app/modules/shared/service/platform/platform.service';\nimport * as mxContent from './constants/content.json';\n\nexport const WIDGET_TIMOUT_DURATION = 14 * 60 * 1000;\n\n@Component({\n  selector: 'app-mx-widget',\n  templateUrl: './mx-widget.component.html',\n  styleUrls: ['./mx-widget.component.scss'],\n})\nexport class MXWidgetComponent implements OnInit, OnDestroy {\n  @Input() tagName: string;\n  @Input() widgetType: WidgetType;\n  @Input() height: string;\n  @Input() subAccount = false;\n  isWeb: boolean;\n  hasError = false;\n  content = mxContent;\n\n  private widgetTimeout = 0;\n  private platformSubscription = new Subscription();\n\n  constructor(\n    private mxService: MXService,\n    private sharedUtilityService: SharedUtilityService,\n    private platformService: PlatformService\n  ) {}\n\n  ngOnInit(): void {\n    this.refreshWidget();\n    this.isWeb = this.sharedUtilityService.getIsWeb();\n    this.platformSubscription.add(\n      this.platformService.onResume$.subscribe(this.onResume.bind(this))\n    );\n    this.platformSubscription.add(\n      this.platformService.onPause$.subscribe(this.onPause.bind(this))\n    );\n  }\n\n  onResume() {\n    if (new Date().getTime() > this.widgetTimeout) {\n      this.refreshWidget();\n    }\n  }\n\n  onPause() {\n    this.widgetTimeout = new Date().getTime() + WIDGET_TIMOUT_DURATION;\n  }\n\n  refreshWidget() {\n    this.hasError = false;\n    this.mxService\n      .displayWidget(\n        this.widgetType,\n        {\n          id: this.tagName,\n          height: this.height,\n          autoload: false,\n        },\n        this.subAccount\n      )\n      .then((res: boolean) => {\n        this.hasError = !res;\n      });\n  }\n\n  ngOnDestroy(): void {\n    this.platformSubscription.unsubscribe();\n  }\n}\n","import {NgModule} from '@angular/core';\nimport {CommonModule} from '@angular/common';\nimport {IonicModule} from '@ionic/angular';\nimport {MXWidgetComponent} from './mx-widget.component';\n\n@NgModule({\n  imports: [CommonModule, IonicModule],\n  declarations: [MXWidgetComponent],\n  exports: [MXWidgetComponent],\n})\nexport class MXWidgetModule {}\n","import {Injectable} from '@angular/core';\nimport {FooterInfo} from '@shared-lib/modules/footer/models/footerInfo.model';\nimport {FooterTypeService} from '@shared-lib/modules/footer/services/footer-type/footer-type.service';\nimport {HeaderInfo} from '../../models/headerInfo.model';\nimport {HeaderTypeService} from '../header-type/header-type.service';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class HeaderFooterTypeService {\n  constructor(\n    private headerTypeService: HeaderTypeService,\n    private footerTypeService: FooterTypeService\n  ) {}\n\n  publishType(headerInfo: HeaderInfo, footerInfo: FooterInfo): void {\n    this.headerTypeService.publish(headerInfo);\n    this.footerTypeService.publish(footerInfo);\n  }\n}\n","export enum WidgetType {\n  CONNECT = 'connect_widget',\n  FINSTRONG = 'finstrong_widget',\n  FINSTRONG_MINI = 'mini_finstrong_widget',\n  MANAGE_ACCOUNT = 'connections_widget',\n  PULSE = 'pulse_widget',\n  NET_WORTH = 'net_worth_widget',\n  NET_WORTH_MINI = 'mini_net_worth_widget',\n  TRANSACTIONS = 'transactions_widget',\n  PULSE_CAROUSEL_MINI = 'mini_pulse_carousel_widget',\n  MINI_SPENDING_WIDGET = 'mini_spending_widget',\n  MINI_BUDGET_WIDGET = 'mini_budgets_widget',\n  SPENDING_WIDGET = 'spending_widget',\n  BUDGET_WIDGET = 'budgets_widget',\n}\n","export default \"<div\\n  *ngIf=\\\"!hasError\\\"\\n  id=\\\"{{ tagName }}\\\"\\n  [ngClass]=\\\"isWeb ? 'web-mx-widget-component' : 'mobile-mx-widget-component'\\\"\\n></div>\\n<div *ngIf=\\\"hasError\\\" class=\\\"error-window\\\">\\n  <ion-text>{{ content.widgetError }}</ion-text>\\n  <ion-button (click)=\\\"refreshWidget()\\\" fill=\\\"clear\\\" color=\\\"btncolor\\\">\\n    {{ content.retry }}\\n  </ion-button>\\n</div>\\n\";"]}